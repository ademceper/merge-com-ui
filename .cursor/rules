# Keycloakify Proje KurallarÄ±

## Genel Kurallar
- Bu bir Keycloakify 11 projesidir
- Proje adÄ±: `keycloakify` (keycloakify-starter deÄŸil)
- **Package Manager: NPM kullanÄ±lÄ±yor (yarn deÄŸil)**
- React 18 ve TypeScript kullanÄ±lÄ±r
- Vite build tool olarak kullanÄ±lÄ±r
- Storybook ile component geliÅŸtirme yapÄ±lÄ±r

## Kod Stili
- TypeScript strict mode kullanÄ±lmalÄ±
- Functional components tercih edilmeli
- React hooks kullanÄ±lmalÄ±
- ESLint kurallarÄ±na uyulmalÄ±
- Prettier ile kod formatlamasÄ± yapÄ±lmalÄ±

## Proje YapÄ±sÄ±
- `src/login/` - Keycloak login temasÄ± dosyalarÄ±
- `src/login/KcPage.tsx` - Ana sayfa komponenti
- `src/login/KcContext.ts` - Keycloak context tanÄ±mlarÄ±
- `src/login/KcPageStory.tsx` - Storybook iÃ§in story helper
- `src/login/i18n.ts` - Ã‡eviri dosyalarÄ±
- `public/keycloakify-dev-resources/` - Keycloak geliÅŸtirme kaynaklarÄ±

## Keycloakify Ã–zellikleri
- Her sayfa iÃ§in KcContext kullanÄ±lÄ±r
- Storybook ile sayfa Ã¶nizlemesi yapÄ±lÄ±r
- `createKcPageStory` ile story oluÅŸturulur
- Tema Ã¶zelleÅŸtirmeleri `kc.gen.tsx` ile yapÄ±lÄ±r

## Komutlar
- `npm run dev` - Vite dev sunucusu (React uygulamasÄ±)
- `npm run storybook` - Storybook dev sunucusu (Keycloak sayfalarÄ± Ã¶nizleme)
- `npm run build` - Production build
- `npm run build-keycloak-theme` - Keycloak temasÄ± build
- `npm run format` - Prettier ile formatla

## GeliÅŸtirme AkÄ±ÅŸÄ±
1. Yeni Keycloak sayfasÄ± eklerken Ã¶nce story oluÅŸtur
2. Storybook'ta geliÅŸtir ve test et
3. KcPage.tsx'te sayfa routing'ini ekle
4. i18n.ts'te gerekli Ã§evirileri ekle
5. Build ve test et

## Dikkat Edilmesi Gerekenler
- Keycloak context'i her sayfa iÃ§in farklÄ±dÄ±r
- Story dosyalarÄ± `.stories.tsx` uzantÄ±sÄ± ile bitmeli
- Tema dosyalarÄ± build sonrasÄ± `.jar` formatÄ±nda Ã¼retilir
- GeliÅŸtirmede Storybook kullanÄ±lmalÄ±, Vite dev server sadece test iÃ§indir

---

# KEYCLOAKIFY RESMÄ° DOKÃœMANTASYON

## 1. QUICK START

### Keycloakify Nedir?
Keycloakify, Ã¶zel Keycloak temalarÄ± oluÅŸturmak iÃ§in kullanÄ±lan bir araÃ§tÄ±r. Keycloak'un kullanÄ±cÄ± arayÃ¼zlerinin gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ ve davranÄ±ÅŸÄ±nÄ± deÄŸiÅŸtirmenizi saÄŸlar:

- **Login Theme**: KullanÄ±cÄ±larÄ±n giriÅŸ yapma veya kayÄ±t olma sayfalarÄ±
- **Account Theme**: KullanÄ±cÄ±larÄ±n hesap ayarlarÄ±nÄ± yÃ¶nettikleri arayÃ¼z
- **Email Theme**: Keycloak'un otomatik e-posta ÅŸablonlarÄ±
- **Admin Theme**: YÃ¶neticilerin Keycloak'u yapÄ±landÄ±rdÄ±ÄŸÄ± Admin Console arayÃ¼zÃ¼

### Keycloakify Neden KullanÄ±lmalÄ±?

1. **Modern Frontend Teknolojileri**: TypeScript, React, Angular, Svelte ve istediÄŸiniz herhangi bir stil Ã§Ã¶zÃ¼mÃ¼ (Tailwind, MUI, shadcn/ui, vb.)
2. **Kolay Test OrtamÄ±**: Keycloak iÃ§inde ve dÄ±ÅŸÄ±nda hot reloading ile tema testi
3. **Otomatik Tema Paketleme**: TemanÄ±zÄ± JAR dosyasÄ±na paketleyerek Keycloak'a doÄŸrudan import etme
4. **Versiyon UyumluluÄŸu**: Keycloak 11'e kadar geriye dÃ¶nÃ¼k uyumlu, gelecek sÃ¼rÃ¼mlerle de uyumlu olmak Ã¼zere tasarlanmÄ±ÅŸ
5. **GerÃ§ek ZamanlÄ± Validasyon**: Frontend'te anlÄ±k geri bildirim (Ã¶rn: "Åifre en az 12 karakter olmalÄ±dÄ±r")
6. **Topluluk DesteÄŸi**: Discord ve GitHub Ã¼zerinden hÄ±zlÄ± destek

### Framework SeÃ§imi: React, Angular veya Svelte

Keycloakify, React, Angular ve Svelte'i destekler. Sadece CSS dÃ¼zeyinde Ã¶zelleÅŸtirme yapÄ±yorsanÄ±z herhangi bir framework Ã§alÄ±ÅŸÄ±r. **En iyi entegrasyon iÃ§in React Ã¶nerilir.**

**Angular ve Svelte kullanÄ±cÄ±larÄ± iÃ§in notlar:**
- Account Themes: Keycloak'un varsayÄ±lanÄ±ndan farklÄ± bir baÅŸlangÄ±Ã§ UI'Ä± vardÄ±r
- Admin Themes: Sadece React Ã¶zel Admin UI'larÄ± destekler
- Angular Setup: Keycloakify mevcut bir Angular projesine doÄŸrudan yÃ¼klenemez, standalone veya monorepo subproject olmalÄ±dÄ±r

### HÄ±zlÄ± BaÅŸlangÄ±Ã§ AdÄ±mlarÄ±

**Starter Repo'yu Klonlama:**
```bash
# React iÃ§in
git clone https://github.com/keycloakify/keycloakify-starter

# Angular iÃ§in
git clone https://github.com/keycloakify/keycloakify-starter-angular-vite keycloakify-starter

# Svelte iÃ§in
git clone https://github.com/keycloakify/keycloakify-starter-svelte keycloakify-starter
```

**Story OluÅŸturma ve Storybook Ã‡alÄ±ÅŸtÄ±rma:**
```bash
cd keycloakify

npm install               # Bu projede npm kullanÄ±lÄ±yor

npx keycloakify add-story # login.ftl seÃ§in (Ã¶rnek)
                          # Her zaman npx kullanÄ±n - bu standart JS proje pratiÄŸidir

npm run storybook         # Storybook'u baÅŸlatÄ±r
```

**Ä°lk CSS Ã–zelleÅŸtirmesi:**

`src/login/main.css` dosyasÄ± oluÅŸturun:
```css
.kcFormHeaderClass {
    border: 3px solid red;
}
```

Ve import edin:
```tsx
// src/login/KcPage.tsx (React iÃ§in)
import "./main.css";
// ...
```

**Storybook Nedir?**
Storybook, UI componentlerini izole bir ÅŸekilde geliÅŸtirmenizi saÄŸlayan bir araÃ§tÄ±r. Keycloakify starter repo'larÄ±nda varsayÄ±lan olarak gelir Ã§Ã¼nkÃ¼ iyi bir developer experience saÄŸlar ve temanÄ±zÄ±n farklÄ± sayfalarÄ±nÄ± hÄ±zlÄ±ca Ã¶nizlemenizi saÄŸlar.

### Ã–nemli Notlar

1. **CLI AraÃ§larÄ±**: Her zaman `npx` kullanÄ±n (Ã¶rn: `npx keycloakify add-story`)
2. **Package Manager**: BU PROJEDE NPM KULLANILMAKTADIR. TÃ¼m komutlar `npm` ile Ã§alÄ±ÅŸtÄ±rÄ±lmalÄ±dÄ±r.
3. **Proje AdÄ±**: Proje adÄ± `keycloakify`'dÄ±r (keycloakify-starter deÄŸil)
4. **Gelecek Uyumluluk**: Yeni Keycloak versiyonlarÄ±nda breaking change olursa, sadece Keycloakify versiyonunu gÃ¼ncelleyip rebuild etmek yeterli olur
5. **CSS Customization**: TÃ¼m CSS Ã¶zelleÅŸtirmeleri `src/login/main.css` gibi dosyalarda yapÄ±lmalÄ± ve `KcPage.tsx`'e import edilmelidir

---

## 2. CSS CUSTOMIZATION

### CSS Class Sistemini Anlamak

DOM'u Storybook'ta incelediÄŸinizde, Ã§oÄŸu elementin en az iki tip class'Ä± olduÄŸunu gÃ¶receksiniz:

1. **`kc` ile baÅŸlayan classlar** (Ã¶rn: `kcLabelClass`): Bu classlarÄ±n varsayÄ±lan olarak hiÃ§bir stili yoktur. Tek amaÃ§larÄ± Ã¶zel stilleriniz iÃ§in selector gÃ¶revi gÃ¶rmektir.

2. **`pf-` ile baÅŸlayan classlar** (Ã¶rn: `pf-c-form__label`): Bunlar Patternfly classlarÄ±dÄ±r. Patternfly, RedHat tarafÄ±ndan oluÅŸturulan ve Keycloak ekibinin tÃ¼m UI'larÄ±nda kullandÄ±ÄŸÄ± bir CSS framework'Ã¼dÃ¼r (Bootstrap benzeri).

**YapÄ±lmasÄ± gereken:** Patternfly stillerini kÄ±smen veya tamamen kaldÄ±rÄ±p, kendi Ã¶zel stillerinizi uygulamak.

### Ã–zel CSS Uygulama

âš ï¸ **Ã–NEMLÄ°:** `public/keycloakify-dev-resources` dizinindeki hiÃ§bir dosyayÄ± dÃ¼zenlemeyin. Bu dosyalar Storybook'un geliÅŸtirme sÄ±rasÄ±nda Keycloak ortamÄ±nÄ± simÃ¼le etmesi iÃ§in kullanÄ±lÄ±r ve gerÃ§ek temanÄ±zÄ±n parÃ§asÄ± deÄŸildir.

**Ã–zel CSS stilleri uygulamak iÃ§in `kc` classlarÄ±nÄ± kullanÄ±n:**

```css
/* src/login/main.css */
.kcLabelClass {
   border: 3px solid red;
}
```

**Import edin:**
```tsx
// src/login/KcPage.tsx (React iÃ§in)
import "./main.css";
// ...
```

### FarklÄ± Sayfalar iÃ§in FarklÄ± Stylesheet'ler

Global bir stylesheet kullanmak yerine, sayfa bazÄ±nda farklÄ± stylesheet'ler atayabilirsiniz (Ã¶rn: login sayfasÄ± iÃ§in bir, register sayfasÄ± iÃ§in baÅŸka bir).

Component seviyesinde Ã¶zelleÅŸtirme yapmayÄ± planlÄ±yorsanÄ±z ve `npx keycloakify eject-page` komutunu kullanacaksanÄ±z, bu bÃ¶lÃ¼mÃ¼ atlayabilirsiniz.

Ancak sadece CSS ile Ã¶zelleÅŸtirme yapacaksanÄ±z, `kcContext.pageId` deÄŸerine gÃ¶re farklÄ± stylesheet'ler yÃ¼kleyebilirsiniz:

```tsx
// src/login/KcPage.tsx
import { useMemo } from "react";

function useCustomStyles(kcContext: KcContext) {
    return useMemo(() => {
        // TÃ¼m sayfalar iÃ§in stylesheet
        import("./main.css");
        let classes: { [key in ClassKey]?: string } = {
            // TÃ¼m sayfalar iÃ§in classlar
        };

        switch (kcContext.pageId) {
            case "login.ftl":
                import("./pages/login.css");
                classes = {
                    ...classes,
                    // Sadece login sayfasÄ± iÃ§in classlar
                };
                break;
            case "register.ftl":
                import("./pages/register.css");
                classes = {
                    ...classes,
                    // Sadece register sayfasÄ± iÃ§in classlar
                };
                break;
        }

        return classes;
    }, []);
}
```

### Tailwind KullanÄ±mÄ±

Tailwind'i normal ÅŸekilde utility classlarÄ± ile kullanabileceÄŸiniz gibi, `@apply` direktifi ile sayfa yapÄ±sÄ±nÄ± deÄŸiÅŸtirmeden de kullanabilirsiniz.

### Bootstrap veya DiÄŸer CSS Framework'leri KullanÄ±mÄ±

Bootstrap gibi standart classlar saÄŸlayan bir CSS framework kullanmak istiyorsanÄ±z:

```bash
npm install bootstrap
```

```tsx
// src/login/KcPage.tsx
import "bootstrap/dist/css/bootstrap.min.css";
// ...

const classes = {
    kcLabelClass: "form-label col-form-label",
} satisfies { [key in ClassKey]?: string };
```

Bu sayede Patternfly classlarÄ± (`pf-c-form__label`) yerine Bootstrap classlarÄ± (`form-label col-form-label`) kullanÄ±lÄ±r.

### VarsayÄ±lan Stillerin Bir KÄ±smÄ±nÄ± KaldÄ±rma

Ã–rnek olarak login sayfasÄ±ndaki **Sign In** butonunu ele alalÄ±m. Bu butona uygulanan Patternfly classlarÄ±nÄ± kaldÄ±rmak iÃ§in:

1. Browser'da butonu inspect edin
2. Hangi classlarÄ±n uygulandÄ±ÄŸÄ±nÄ± gÃ¶rÃ¼n:
   - `kcButtonClass` -> `pf-c-button`
   - `kcButtonPrimaryClass` -> `pf-m-primary` ve `long-pf-btn`
   - `kcButtonBlockClass` -> `pf-m-block`
   - `kcButtonLargeClass` -> `btn-lg`

3. TÃ¼m varsayÄ±lan stilleri kaldÄ±rmak iÃ§in:

```tsx
// src/login/KcPage.tsx
const classes = {
    kcButtonClass: "",
    kcButtonPrimaryClass: "",
    kcButtonBlockClass: "",
    kcButtonLargeClass: ""
} satisfies { [key in ClassKey]?: string };
```

Bu deÄŸiÅŸiklikten sonra tÃ¼m Patternfly classlarÄ± kaldÄ±rÄ±lÄ±r ve buton varsayÄ±lan HTML stiline dÃ¶ner. ArtÄ±k kendi Ã¶zel buton stillerinizi Ã¶zgÃ¼rce uygulayabilirsiniz.

**Ã–rnek Ã¶zel button CSS:**
```css
.kcButtonClass {
    padding: 10px 20px;
    font-size: 16px;
    font-weight: bold;
    text-transform: uppercase;
    color: #ffffff;
    background: linear-gradient(45deg, #6a11cb, #2575fc);
    border: none;
    border-radius: 25px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
    width: 100%;
}

.kcButtonClass:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);
}
```

### TÃ¼m VarsayÄ±lan Stilleri KaldÄ±rma

TÃ¼m Patternfly stillerini kaldÄ±rÄ±p sÄ±fÄ±rdan baÅŸlamayÄ± tercih edebilirsiniz:

```tsx
// src/login/KcPage.tsx
<DefaultPage
    kcContext={kcContext}
    i18n={i18n}
    classes={classes}
    Template={Template}
    doUseDefaultCss={false}  // TÃ¼m varsayÄ±lan CSS'i kapat
    UserProfileFormFields={UserProfileFormFields}
    doMakeUserConfirmPassword={doMakeUserConfirmPassword}
/>
```

Bu yaklaÅŸÄ±mÄ±n faydasÄ±: Sadece tÃ¼m `pf-` classlarÄ± tek seferde kaldÄ±rÄ±lmakla kalmaz, global Patternfly stylesheet'i bile yÃ¼klenmez.

### VarsayÄ±lan Stilleri Sadece BazÄ± Sayfalarda Devre DÄ±ÅŸÄ± BÄ±rakma

`npx keycloakify eject-page` ile sadece belirli sayfalarÄ± Ã¶zelleÅŸtirdiÄŸinizde, ejected sayfalar iÃ§in varsayÄ±lan stilleri devre dÄ±ÅŸÄ± bÄ±rakÄ±rken, diÄŸer sayfalarda Patternfly stillerini tutmak isteyebilirsiniz:

```tsx
// src/login/KcPage.tsx
switch (kcContext.pageId) {
    case "login.ftl":
        return (
            <Login
                {...{ kcContext, i18n, classes }}
                Template={Template}
                doUseDefaultCss={false}  // Login iÃ§in kapalÄ±
            />
        );
    default:
        return (
            <DefaultPage
                kcContext={kcContext}
                i18n={i18n}
                classes={classes}
                Template={Template}
                doUseDefaultCss={true}   // DiÄŸerleri iÃ§in aÃ§Ä±k
                UserProfileFormFields={UserProfileFormFields}
                doMakeUserConfirmPassword={doMakeUserConfirmPassword}
            />
        );
}
```

### Ejected Componentlerde ClasslarÄ± KaldÄ±rma (kcClsx)

EÄŸer sayfalarÄ± eject ettiyseniz ve `doUseDefaultCss={false}` ayarladÄ±ysanÄ±z, `kcClsx`'i tutmanÄ±z gerekip gerekmediÄŸini merak edebilirsiniz:

```tsx
<input
    className={kcClsx(
        "kcButtonClass", 
        "kcButtonPrimaryClass", 
        "kcButtonBlockClass", 
        "kcButtonLargeClass"
    )}
    // ...
/>
```

**KÄ±sa cevap:** HayÄ±r, kcClsx'i kaldÄ±rabilirsiniz.

Sadece bu classlara hedefleyen Ã¶zel CSS tanÄ±mladÄ±ysanÄ±z (Ã¶rn: `.kcButtonClass { /* ... */ }`), classlarÄ± kaldÄ±rdÄ±ÄŸÄ±nÄ±zda bu stiller artÄ±k uygulanmayacak.

### CSS Customization Ã–zet

**Temel Prensipler:**
1. `kc` classlarÄ± = Ã–zel stilleriniz iÃ§in selector'lar (varsayÄ±lan stil yok)
2. `pf-` classlarÄ± = Patternfly framework stilleri (kaldÄ±rÄ±labilir)
3. `public/keycloakify-dev-resources` dizinini ASLA dÃ¼zenlemeyin
4. CSS dosyalarÄ±nÄ± `src/login/` iÃ§inde oluÅŸturun ve `KcPage.tsx`'e import edin
5. `doUseDefaultCss` ile Patternfly stillerini kontrol edin
6. `classes` objesi ile class override yapÄ±n
7. Tailwind, Bootstrap gibi frameworkler kullanÄ±labilir

---

## 3. TESTING YOUR THEME - OUTSIDE OF KEYCLOAK (STORYBOOK)

### Storybook ile Tema Ã–nizleme

TemanÄ±zÄ± geliÅŸtirirken Ã¶nizlemek iÃ§in Ã¶nerilen yÃ¶ntem **Storybook** kullanmaktÄ±r. Storybook, UI componentlerini izole bir ÅŸekilde test etmeyi saÄŸlayan bir araÃ§tÄ±r.

ğŸ’¡ **Not:** Storybook kullanmak istemiyorsanÄ±z, dev modunda Ã¶nizleme yapabilirsiniz (alternatif rehber mevcut).

### Story DosyalarÄ± Ekleme

Starter template baÅŸlangÄ±Ã§ta story dosyalarÄ± iÃ§ermez. Bunun yerine, test etmek istediÄŸiniz sayfalar iÃ§in story'leri projenize import eden bir Keycloakify CLI komutu vardÄ±r.

**Komut:**
```bash
npx keycloakify add-story
```

Bu komutu Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±nÄ±zda, story eklemek istediÄŸiniz sayfalarÄ± seÃ§ebilirsiniz (Ã¶rn: login.ftl, register.ftl, vb.).

Ã–rneÄŸin, `login -> register.ftl` seÃ§tiÄŸinizde ÅŸu dosya oluÅŸturulur:
- `src/login/pages/Register.stories.tsx`

**Birden fazla sayfa iÃ§in story eklemek:** Bu komutu istediÄŸiniz kadar Ã§alÄ±ÅŸtÄ±rarak farklÄ± sayfalar iÃ§in story'ler ekleyebilirsiniz.

### Storybook'u BaÅŸlatma

Story'leri ekledikten sonra Storybook'u yerel olarak baÅŸlatÄ±n:

```bash
npm run storybook
```

Kodunuzda yaptÄ±ÄŸÄ±nÄ±z deÄŸiÅŸiklikleri Storybook'ta gerÃ§ek zamanlÄ± olarak gÃ¶rebilirsiniz.

### Storybook'un AmacÄ±

Storybook, gerÃ§ek bir Keycloak'ta tam login/register sÃ¼recini tekrarlamak zorunda kalmadan, sayfalarÄ± farklÄ± konfigÃ¼rasyonlarda gÃ¶rmenizi kolaylaÅŸtÄ±rÄ±r.

Keycloakify her sayfa iÃ§in varsayÄ±lan bir mock context saÄŸlar. Story'ler, bu varsayÄ±lan mock'un belirli kÄ±sÄ±mlarÄ±nÄ± override ederek sayfalarÄ± farklÄ± konfigÃ¼rasyonlarda yansÄ±tmanÄ±zÄ± saÄŸlar.

### Story Ã–rnekleri

**Ã–rnek 1: Register SayfasÄ±nÄ± Ã‡ince GÃ¶sterme**

```tsx
// src/login/pages/Register.stories.tsx (React iÃ§in)
import type { Meta, StoryObj } from "@storybook/react";
import { createKcPageStory } from "../KcPageStory";

const { KcPageStory } = createKcPageStory({ pageId: "register.ftl" });

const meta = {
    title: "login/register.ftl",
    component: KcPageStory
} satisfies Meta<typeof KcPageStory>;

export default meta;

type Story = StoryObj<typeof meta>;

// VarsayÄ±lan story
export const Default: Story = {
    render: () => <KcPageStory />
};

// Ã‡ince versiyonu
export const InChinese: Story = {
    render: ()=> (
        <KcPageStory
            kcContext={{
                locale: {
                    currentLanguageTag: "zh-CN"
                }
            }}
        />
    )
};
```

**Angular iÃ§in:**
```typescript
// src/login/pages/register/register.stories.ts
import { Meta, StoryObj } from '@storybook/angular';
import { decorators, KcPageStory } from '../KcPageStory';

const meta: Meta<KcPageStory> = {
    title: 'login/register.ftl',
    component: KcPageStory,
    decorators: decorators,
    globals: {
        pageId: 'register.ftl'
    }
};

export default meta;

type Story = StoryObj<KcPageStory>;

export const Default: Story = {};

export const InChinese: Story = {
    globals: {
        kcContext: {
            locale: {
                currentLanguageTag: "zh-CN"
            }
        }
    }
};
```

**Svelte iÃ§in:**
```html
<!-- src/login/pages/Login.stories.svelte -->
<script context="module" lang="ts">
  import { defineMeta } from '@storybook/addon-svelte-csf';
  import type { KcPageStoryProps } from '../KcPageStory';
  import KcPageStory from '../KcPageStory.svelte';

  const args: KcPageStoryProps = { pageId: 'login.ftl' };
  const { Story } = defineMeta({
    title: 'login/login.ftl',
    component: KcPageStory,
    args: args,
  });
</script>

<Story name="Default" />

<Story
  name="InChinese"
  args={{
    ...args,
    kcContext: {
      locale: {
        currentLanguageTag: "zh-CN"
      }
    }
  }}
/>
```

### Storybook KullanÄ±m Ã–zeti

**Temel Workflow:**
1. `npx keycloakify add-story` ile story ekle
2. Test etmek istediÄŸin sayfalarÄ± seÃ§
3. `npm run storybook` ile Storybook'u baÅŸlat
4. Kod deÄŸiÅŸikliklerini gerÃ§ek zamanlÄ± gÃ¶r
5. FarklÄ± senaryolar iÃ§in yeni story'ler oluÅŸtur (dil deÄŸiÅŸikliÄŸi, hata durumlarÄ±, vb.)

**Story'lerde Override Yapma:**
- `kcContext` objesi ile mock context'i kÄ±smi override et
- FarklÄ± dil: `locale.currentLanguageTag` deÄŸiÅŸtir
- FarklÄ± konfigÃ¼rasyonlar: DiÄŸer `kcContext` property'lerini override et

**Ã–nemli Noktalar:**
- Story dosyalarÄ± `.stories.tsx` (veya `.stories.ts`) uzantÄ±sÄ± ile biter
- Her story farklÄ± bir senaryo temsil eder (Default, InChinese, WithError, vb.)
- `createKcPageStory` helper fonksiyonu ile story oluÅŸtur
- GerÃ§ek Keycloak'a ihtiyaÃ§ duymadan tÃ¼m sayfalarÄ± test et

---

## 4. TESTING YOUR THEME - INSIDE OF KEYCLOAK

### GerÃ§ek Keycloak Instance'Ä±nda Test

TemanÄ±zÄ± Storybook'ta test etmek faydalÄ±dÄ±r, ancak production'a deploy etmeden Ã¶nce gerÃ§ek bir Keycloak instance'Ä±nda test etmeniz gerekir.

### Ã–n Gereksinimler

**1. Docker Kurulumu:**
[Docker Desktop](https://www.docker.com/products/docker-desktop/) (veya sadece Docker) bilgisayarÄ±nÄ±zda kurulu ve Ã§alÄ±ÅŸÄ±yor olmalÄ±dÄ±r.

**2. Maven Kurulumu:**
Maven, `.jar` dosyalarÄ±nÄ± yerel olarak build etmek iÃ§in gereklidir. Kurulu olup olmadÄ±ÄŸÄ±nÄ± kontrol edin:

```bash
mvn --version
```

**Maven kurulu deÄŸilse:**

- **MacOS** (Homebrew ile):
  ```bash
  brew install maven
  ```

- **Windows** (Chocolatey ile):
  ```bash
  choco install openjdk
  choco install maven
  ```

- **Ubuntu/Debian**:
  ```bash
  sudo apt-get install maven
  ```

- **Fedora**:
  ```bash
  sudo dnf install maven
  ```

### Keycloak'u Docker'da Ã‡alÄ±ÅŸtÄ±rma

Ã–n gereksinimler tamamlandÄ±ktan sonra, Keycloakify projenizde ÅŸu komutu Ã§alÄ±ÅŸtÄ±rÄ±n:

```bash
npx keycloakify start-keycloak
```

BaÅŸlatmak istediÄŸiniz Keycloak versiyonunu seÃ§meniz istenecektir.

Keycloakify, seÃ§ilen Keycloak versiyonunu bir Docker container'Ä±nda baÅŸlatacaktÄ±r.

### Container Ã‡alÄ±ÅŸtÄ±ktan Sonra

Container Ã§alÄ±ÅŸtÄ±ÄŸÄ±nda iki link gÃ¶receksiniz:

**1. Keycloak Admin Console: `http://localhost:8080`**
   - Keycloak instance'Ä± temanÄ±zla Ã¶nceden yapÄ±landÄ±rÄ±lmÄ±ÅŸtÄ±r
   - `myrealm` adÄ±nda Ã¶zel bir realm
   - Test kullanÄ±cÄ±sÄ±: `testuser` / `password123`
   - YapÄ±landÄ±rma deÄŸiÅŸiklikleri `.keycloakify` dizininde saklanÄ±r (restart'larda kalÄ±cÄ±dÄ±r)

**2. Test Web App: `https://my-theme.keycloakify.dev`**
   - Bu uygulama login temanÄ±za yÃ¶nlendirir
   - TemanÄ±zda yaptÄ±ÄŸÄ±nÄ±z dÃ¼zenlemeler otomatik olarak rebuild edilir ve Keycloak container'Ä±na gÃ¼ncellenir
   - DeÄŸiÅŸiklikleri gÃ¶rmek iÃ§in sayfayÄ± yenileyin

**Test KullanÄ±cÄ±sÄ± ile GiriÅŸ:**
- KullanÄ±cÄ± adÄ±: `testuser`
- Åifre: `password123`

GiriÅŸ yaptÄ±ktan sonra:
- Decoded ID token (JWT) inceleyebileceÄŸiniz bir sayfaya yÃ¶nlendirilirsiniz
- Ã–zel Account ve Admin temalarÄ±nÄ±za eriÅŸebilirsiniz (eÄŸer oluÅŸturduysanÄ±z)

### window.kcContext Ä°nceleme

Browser'Ä±n developer tools'unu aÃ§arak sayfadaki `window.kcContext` objesini inceleyebilirsiniz. Bu, belirli konfigÃ¼rasyonlara sahip sayfalar iÃ§in yeni story'ler oluÅŸturmanÄ±zÄ± saÄŸlar.

**Konsola ÅŸunu yazÄ±n:**
```javascript
window.kcContext
```

Bu objeyi inceleyerek:
- SayfanÄ±n mevcut durumunu gÃ¶rÃ¼n
- Hangi property'lerin mevcut olduÄŸunu keÅŸfedin
- Story'lerinizde hangi deÄŸerleri override edeceÄŸinize karar verin

### Daha Fazla SeÃ§enek

Ã–zel bir Keycloak image kullanmak mÄ± istiyorsunuz? BazÄ± extension'larÄ± yÃ¼klemek mi? Realm konfigÃ¼rasyonu import etmek mi?

`start-keycloak` komutu birÃ§ok seÃ§eneÄŸi destekler! (Daha fazla bilgi iÃ§in `startkeycloakoptions` dokÃ¼mantasyonuna bakÄ±n)

### Test SÃ¼reci Ã–zeti

**AdÄ±m AdÄ±m:**
1. Docker ve Maven'Ä± kur
2. `npx keycloakify start-keycloak` Ã§alÄ±ÅŸtÄ±r
3. Keycloak versiyonunu seÃ§
4. Container baÅŸlatÄ±lmasÄ±nÄ± bekle
5. Admin Console'a git (`http://localhost:8080`)
6. Test Web App'i aÃ§ (`https://my-theme.keycloakify.dev`)
7. `testuser/password123` ile giriÅŸ yap
8. Kod deÄŸiÅŸikliklerini yap
9. SayfayÄ± yenile (otomatik rebuild olur)
10. `window.kcContext` ile debug yap

**Ã–nemli Noktalar:**
- `.keycloakify` dizini Keycloak konfigÃ¼rasyonunu saklar (git'e eklemeyin)
- Tema deÄŸiÅŸiklikleri otomatik olarak rebuild edilir
- Hot reload Ã§alÄ±ÅŸÄ±r, sadece sayfayÄ± yenileyin
- Test kullanÄ±cÄ±sÄ±: `testuser/password123`
- Admin Console iÃ§in default credentials kullanÄ±n
- `window.kcContext` ile runtime context'i inceleyin
- Docker container'Ä± durdurmak iÃ§in: `docker stop <container-id>`

### Sorun Giderme

**Docker Ã§alÄ±ÅŸmÄ±yor:**
- Docker Desktop'Ä±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun
- `docker ps` ile Ã§alÄ±ÅŸan container'larÄ± kontrol edin

**Maven hatasÄ±:**
- `mvn --version` ile Maven kurulumunu kontrol edin
- PATH deÄŸiÅŸkeninde Maven'Ä±n olduÄŸundan emin olun

**Port 8080 kullanÄ±mda:**
- BaÅŸka bir servisi durdurun veya farklÄ± port kullanÄ±n
- `start-keycloak` seÃ§eneklerinde port deÄŸiÅŸtirebilirsiniz

---

## 5. DEPLOYING YOUR THEME (PRODUCTION)

### Ã–nemli UyarÄ±

âš ï¸ **DÄ°KKAT:** Bu bÃ¶lÃ¼m **production** Keycloak instance'Ä±na tema deploy etmek iÃ§indir. 

EÄŸer amacÄ±nÄ±z geliÅŸtirme amaÃ§lÄ± Docker container'da tema test etmekse, **yanlÄ±ÅŸ bÃ¶lÃ¼mdesiniz**. Bunun yerine yukarÄ±daki "Testing Inside of Keycloak" bÃ¶lÃ¼mÃ¼ne bakÄ±n.

### JAR DosyasÄ± Build Etme

Keycloak, tema ve diÄŸer Ã¶zel plugin'lerin standart JAR dosyalarÄ± olarak paketlendiÄŸi bir extension sistemi kullanÄ±r.

Ä°lk adÄ±m, temanÄ±zÄ± Keycloak'a yÃ¼klenebilecek bir JAR dosyasÄ±na build etmektir:

```bash
npm run build-keycloak-theme
```

Bu komut **/dist_keycloak** dizini oluÅŸturacak ve iÃ§inde gerekli JAR dosyalarÄ±nÄ± barÄ±ndÄ±racaktÄ±r.

**VarsayÄ±lan olarak**, Keycloakify farklÄ± Keycloak versiyonlarÄ±nÄ± desteklemek iÃ§in birden fazla JAR dosyasÄ± Ã¼retir:

- **Keycloak 11-21 ve 26+**: `keycloak-theme-for-kc-all-other-versions.jar` kullanÄ±n
- **Keycloak 22-25**: `keycloak-theme-for-kc-22-to-25.jar` kullanÄ±n

Hangi JAR dosyalarÄ±nÄ±n Ã¼retileceÄŸini ve nasÄ±l isimlendirileceÄŸini yapÄ±landÄ±rabilirsiniz. Detaylar iÃ§in `keycloakversiontargets` dokÃ¼mantasyonuna bakÄ±n.

**EÄŸer bir OPS ekibiniz varsa** ve sorumluluÄŸunuz sadece tema geliÅŸtirmekle sÄ±nÄ±rlÄ±ysa, iÅŸiniz burada biter. JAR dosyasÄ± sizin deliverable'Ä±nÄ±zdÄ±r. Keycloak instance'Ä±nÄ± yÃ¶neten kiÅŸiye verin - ne yapacaÄŸÄ±nÄ± bilir.

**Hem geliÅŸtirme hem deployment'tan sorumluysan**, temayÄ± Keycloak'a nasÄ±l yÃ¼kleyeceÄŸinizi Ã¶ÄŸrenmek iÃ§in okumaya devam edin.

### JAR DosyasÄ±nÄ± Keycloak'a YÃ¼kleme

ArtÄ±k temanÄ±z JAR dosyasÄ± olarak paketlendiÄŸine gÃ¶re, diÄŸer Keycloak extension'larÄ± gibi Keycloak sunucunuza yÃ¼kleyebilirsiniz.

Resmi rehber iÃ§in: [Keycloak documentation on registering provider implementations](https://www.keycloak.org/docs/latest/server_development/#registering-provider-implementations)

âš ï¸ **Ã–NEMLÄ° NOT:**

**Keycloak'u production'a nasÄ±l deploy edeceÄŸiniz Keycloakify dokÃ¼mantasyonunun kapsamÄ± dÄ±ÅŸÄ±ndadÄ±r.**

Keycloak instance deploy etme konusunda bilginiz yoksa, [resmi Keycloak deployment rehberleri](https://www.keycloak.org/documentation) ile baÅŸlamanÄ±zÄ± ÅŸiddetle Ã¶neririz.

Keycloak deployment'Ä±n nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± anlamadan bu snippet'leri doÄŸrudan kullanmaya **Ã§alÄ±ÅŸmayÄ±n**.

Keycloak deploy etme konusunda kendinize gÃ¼vendiÄŸinizde, Ã¶zel temanÄ±zÄ± sorunsuz bir ÅŸekilde entegre etmek iÃ§in bu bÃ¶lÃ¼me geri dÃ¶nÃ¼n.

### Deployment YÃ¶ntemleri

#### 1. Docker

Production'da Keycloak'u deploy etmenin en yaygÄ±n yollarÄ±ndan biri resmi Docker image'Ä± kullanmaktÄ±r.

`-v` seÃ§eneÄŸi ile JAR dosyanÄ±zÄ± container iÃ§indeki `/opt/keycloak/providers` dizinine mount edin:

```bash
docker run \
    # ...diÄŸer seÃ§enekler
    -v "./dist_keycloak/keycloak-theme-for-kc-all-other-versions.jar":/opt/keycloak/providers/keycloak-theme.jar \
    quay.io/keycloak/keycloak:26.0.7 \
    start
```

#### 2. Docker Compose

Bu yaklaÅŸÄ±m temel Docker kurulumunun Ã¼zerine inÅŸa eder. Ã–rnek dizin yapÄ±sÄ±:

```
./docker-compose.yaml
./themes/keycloak-theme-for-kc-all-other-versions.jar
```

**docker-compose.yaml Ã¶rneÄŸi:**

```yaml
version: '3.7'

services:
  postgres:
    image: postgres:16.2
    volumes:
      - postgres_data:/var/lib/postgresql/data
    environment:
      POSTGRES_DB: ${POSTGRES_DB}
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    ports:
      - 5432:5432
    networks:
      - keycloak_network

  keycloak:
    image: quay.io/keycloak/keycloak:26.0.4
    command: start-dev

    environment:
      KC_HOSTNAME: ${KEYCLOAK_HOSTNAME}
      KC_HOSTNAME_PORT: 8080
      KC_HTTP_ENABLED: true
      KC_HEALTH_ENABLED: true
      KC_HOSTNAME_STRICT_HTTPS: false
      KC_HOSTNAME_STRICT: false

      KC_BOOTSTRAP_ADMIN_USERNAME: ${KEYCLOAK_ADMIN}
      KC_BOOTSTRAP_ADMIN_PASSWORD: ${KEYCLOAK_ADMIN_PASSWORD}
      KC_DB: postgres
      KC_DB_URL: jdbc:postgresql://postgres/${POSTGRES_DB}
      KC_DB_USERNAME: ${POSTGRES_USER}
      KC_DB_PASSWORD: ${POSTGRES_PASSWORD}
    ports:
      - 8080:8080
    volumes:
      - ./themes:/opt/keycloak/providers/
    restart: unless-stopped
    depends_on:
      - postgres
    networks:
      - keycloak_network

volumes:
  postgres_data:
    driver: local

networks:
  keycloak_network:
    driver: bridge
```

#### 3. Helm (Bitnami Chart)

Bitnami'nin Keycloak Helm chart'Ä±nÄ± kullanÄ±yorsanÄ±z, `initContainers` parametresi ile temanÄ±zÄ± yÃ¼kleyebilirsiniz:

**Chart.yaml:**
```yaml
apiVersion: v2
name: keycloak
version: 1.0.0
dependencies:
  - name: keycloak
    version: 24.4.10 # Keycloak 26.1.2
    repository: oci://registry-1.docker.io/bitnamicharts
```

**values.yaml (sadece ilgili kÄ±sÄ±mlar):**
```yaml
# OPTIONAL: Environment variables (tema iÃ§inde eriÅŸilebilir)
extraEnvVars:
  - name: MY_APP_PALLET
    value: "monokai"

initContainers:
  - name: realm-ext-provider
    image: curlimages/curl
    imagePullPolicy: IfNotPresent
    command:
      - sh
    args:
      - -c
      - |
        # USER ve PROJECT'i deÄŸiÅŸtirin, doÄŸru jar versiyonunu kullanÄ±n
        mkdir -p /emptydir/app-providers-dir
        curl -L -f -S -o /emptydir/app-providers-dir/keycloak-theme.jar https://github.com/USER/PROJECT/releases/download/VERSION/keycloak-theme-for-kc-all-other-versions.jar

    volumeMounts:
      - name: empty-dir
        mountPath: /emptydir
```

GitHub Actions'Ä± temanÄ±zÄ±n JAR'Ä±nÄ± GitHub release asset'i olarak publish etmek iÃ§in nasÄ±l kullanacaÄŸÄ±nÄ±zÄ± Ã¶ÄŸrenmek iÃ§in starter project readme'sine bakÄ±n.

#### 4. Bare Metal

JAR dosyanÄ±zÄ± Keycloak'un provider dizinine koyun (Ã¶rn: `/opt/keycloak/providers`).

ArdÄ±ndan build Ã§alÄ±ÅŸtÄ±rÄ±n:

```bash
sh /opt/keycloak/bin/kc.sh build
```

Sonra Keycloak sunucusunu baÅŸlatÄ±n, temanÄ±z kullanÄ±labilir olmalÄ±dÄ±r.

#### 5. Docker - Custom Image

Resmi Keycloak image'Ä±nÄ± extend eden ve temanÄ±zÄ± iÃ§eren Ã¶zel bir Docker image build etme:

```bash
cd ~/github
git clone https://github.com/keycloakify/keycloakify-starter
cd keycloakify-starter

# .dockerignore oluÅŸtur
cat << EOF > ./.dockerignore
node_modules
dist
dist_keycloak
# Ã–NEMLÄ°: .gitignore bu listede OLMAMALI
EOF

# Dockerfile oluÅŸtur
cat << EOF > ./Dockerfile
FROM node:20-alpine as build
RUN apk update && \
    apk add --no-cache openjdk17 maven
WORKDIR /app
COPY . .
RUN npm install
RUN npm run build-keycloak-theme

FROM quay.io/keycloak/keycloak:26.0.7
WORKDIR /opt/keycloak
COPY --from=build /app/dist_keycloak/keycloak-theme-for-kc-all-other-versions.jar /opt/keycloak/providers/
RUN /opt/keycloak/bin/kc.sh build
ENTRYPOINT ["/opt/keycloak/bin/kc.sh", "start", "--optimized"]
EOF

# Build ve run
docker build -t my-keycloak .
docker run \
    -e KC_BOOTSTRAP_ADMIN_USERNAME=admin \
    -e KC_BOOTSTRAP_ADMIN_PASSWORD=admin \
    -p 8080:8080 \
    my-keycloak
```

Resmi dokÃ¼mantasyon: https://www.keycloak.org/server/containers

#### 6. Cloud-IAM

Cloud-IAM tarafÄ±ndan yÃ¶netilen bir Keycloak instance'Ä±nÄ±z varsa, giriÅŸ yapÄ±p "Upload JAR File" butonuna tÄ±klayabilirsiniz.

### TemanÄ±zÄ± EtkinleÅŸtirme

JAR dosyanÄ±z Keycloak instance'Ä±nÄ±za yÃ¼klendikten sonra, Keycloak Admin Console'da temanÄ±zÄ± etkinleÅŸtirin:

1. Ä°stediÄŸiniz realm'de **Realm Settings**'e gidin
2. **Themes** bÃ¶lÃ¼mÃ¼nde dropdown menÃ¼lerden temanÄ±zÄ± seÃ§in (Ã¶rn: Login Theme)

âš ï¸ **UYARI:** Master realm'i uygulamanÄ±z iÃ§in asla yapÄ±landÄ±rmayÄ±n. UygulamanÄ±z iÃ§in ayrÄ± bir realm oluÅŸturun, master realm'i elle deÄŸmemiÅŸ tutun.

**Dropdown'da gÃ¶rÃ¼nen isim** (Ã¶rn: "keycloakify-starter"), `themeName` seÃ§eneÄŸi ile yapÄ±landÄ±rÄ±labilir. Theme variants oluÅŸturduysanÄ±z birden fazla seÃ§enek gÃ¶rÃ¼rsÃ¼nÃ¼z.

### FarklÄ± Client'lar iÃ§in FarklÄ± Tema

Login temasÄ± client seviyesinde uygulanabilir. Genellikle web uygulamasÄ± baÅŸÄ±na bir Keycloak client'Ä±nÄ±z olur.

Login temasÄ±nÄ± client seviyesinde ayarlamak, realm'inizdeki her uygulamanÄ±n farklÄ± login/register sayfalarÄ±na sahip olabileceÄŸi anlamÄ±na gelir. Theme Variants kullanÄ±yorsanÄ±z bu Ã§ok iÅŸe yarar.

**Client'ta login tema etkinleÅŸtirme:**
1. Sol Ã¼st kÃ¶ÅŸeden realm'inizi seÃ§in
2. -> Clients
3. -> Listeden client'Ä±nÄ±zÄ± seÃ§in
4. -> "Login Theme"'e scroll yapÄ±n ve temanÄ±zÄ± seÃ§in

**Account tema notu:**
- Account tema sadece realm seviyesinde etkinleÅŸtirilebilir
- Ancak account sayfalarÄ±na eriÅŸim authentication gerektirir
- KullanÄ±cÄ±larÄ±nÄ±zÄ±n oturumlarÄ± sona erdiÄŸinde varsayÄ±lan login temasÄ±yla karÅŸÄ±laÅŸmalarÄ±nÄ± istemiyorsanÄ±z, "account-console" client'Ä±nda login temanÄ±zÄ± etkinleÅŸtirin:
  1. Realm'inizi seÃ§in
  2. -> Clients
  3. -> "account console" seÃ§in
  4. -> "Login Theme" scroll yapÄ±n ve login temanÄ±zdan birini seÃ§in

### Deployment Ã–zeti

**Temel AdÄ±mlar:**
1. `npm run build-keycloak-theme` ile JAR build et
2. Keycloak versiyonunuza uygun JAR'Ä± seÃ§in
3. JAR'Ä± Keycloak provider dizinine yÃ¼kleyin (yÃ¶nteme gÃ¶re farklÄ±)
4. Keycloak'u build/restart edin
5. Admin Console'da Realm Settings -> Themes'den temanÄ±zÄ± seÃ§in

**Ã–nemli Noktlar:**
- Production ve development deployment farklÄ± sÃ¼reÃ§lerdir
- JAR dosyasÄ± `/opt/keycloak/providers/` dizinine konulmalÄ±dÄ±r
- Build sonrasÄ± Keycloak restart gerekir
- Master realm'i asla uygulamanÄ±z iÃ§in kullanmayÄ±n
- Client bazÄ±nda farklÄ± temalar atanabilir
- Theme Variants ile birden fazla tema seÃ§eneÄŸi sunulabilir
- `themeName` ile dropdown'daki ismi Ã¶zelleÅŸtirin
- GitHub Actions ile JAR'Ä± otomatik publish edebilirsiniz

---

## 6. VITE INTEGRATION (ADVANCED - MEVCUT PROJEYE ENTEGRASYON)

### ğŸš¨ UYARI: Ä°LERÄ° SEVÄ°YE KULLANICILAR Ä°Ã‡Ä°N ğŸš¨

âš ï¸ **Ã‡OK Ã–NEMLÄ°:** Bu bÃ¶lÃ¼mÃ¼n ne hakkÄ±nda olduÄŸundan emin deÄŸilseniz, **bu yaklaÅŸÄ±m SÄ°ZÄ°N Ä°Ã‡Ä°N DEÄÄ°LDÄ°R.**

Bunun yerine [Quick Start Guide ve starter project'i fork edin](https://docs.keycloakify.dev/readme#quick-start).

Bu bÃ¶lÃ¼m **SADECE**:
- Zaten mevcut bir projeye sahip olan
- Ve bu projeye bir Keycloak temasÄ± entegre etmesi gereken
- Mevcut componentleri ve stilleri yeniden kullanmak isteyen
- Ä°leri seviye geliÅŸtiriciler iÃ§indir

ğŸ”¹ Sadece Keycloakify'a baÅŸlamaya Ã§alÄ±ÅŸÄ±yorsanÄ±z, **BURADA DURUN** - starter project'ler Ã§ok daha basit ve Ã¶nerilen bir yoldur.

ğŸ”¹ Bu yaklaÅŸÄ±mÄ±n starter project'ten nasÄ±l farklÄ± olduÄŸunu tam olarak anlamadan devam ederseniz, kafanÄ±z karÄ±ÅŸacak, *basitleÅŸtirme* yapmaya Ã§alÄ±ÅŸacak ve sonunda bir engele takÄ±lacaksÄ±nÄ±z.

### Mevcut Vite Projesine Entegrasyon

Bir Vite projeniz varsa, Keycloakify'Ä± doÄŸrudan iÃ§ine entegre edebilirsiniz.

**Not:** Bu rehber React Ã¶rneÄŸi kullanÄ±yor ancak Svelte iÃ§in de geÃ§erlidir, sadece uygun yerlerde adapte edin.

### Ã–n HazÄ±rlÄ±k

âš ï¸ **Herhangi bir ÅŸey yapmadan Ã¶nce**, tÃ¼m bekleyen deÄŸiÅŸikliklerinizi commit edin, bÃ¶ylece gerekirse kolayca geri dÃ¶nebilirsiniz.

### AdÄ±m 1: Keycloakify'Ä± YÃ¼kleme

```bash
npm install keycloakify
# Storybook yÃ¼klemek opsiyoneldir
npm install --save-dev storybook @storybook/react @storybook/react-vite
```

### AdÄ±m 2: Starter Template DosyalarÄ±nÄ± Getirme

Starter template'ten ilgili dosyalarÄ± projenize taÅŸÄ±yÄ±n:

```bash
cd my-react-app
git clone https://github.com/keycloakify/keycloakify-starter tmp
mv tmp/src src/keycloak-theme

# Not: Projenizde zaten Storybook setup'Ä± varsa bunu atlayabilirsiniz
# Sadece .storybook/main.ts'de `staticDirs: ["../public"]` olduÄŸundan emin olun
mv tmp/.storybook .

rm -rf tmp
rm src/keycloak-theme/vite-env.d.ts
mv src/keycloak-theme/main.tsx src/main.tsx
```

**SonuÃ§ dizin yapÄ±sÄ±:**
```
src/
  keycloak-theme/    # veya keycloak_theme (src altÄ±nda herhangi bir yerde olabilir)
    login/
    kc.gen.tsx
  main.tsx
  App.tsx
  ...
```

### AdÄ±m 3: Entry Point'i Modifiye Etme

**Mevcut src/main.tsx dosyanÄ±z ÅŸu ÅŸekilde olabilir:**

```tsx
// src/main.tsx
import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import App from "./App";
import "./index.css";
import { MyProvider } from "./MyProvider";

createRoot(document.getElementById('root')!).render(
    <StrictMode>
      <MyProvider>
        <App />
      </MyProvider>
    </StrictMode>,
);
```

**Bu dosyayÄ± `src/main.app.tsx` olarak yeniden adlandÄ±rÄ±n ve ÅŸu ÅŸekilde dÃ¼zenleyin:**

```tsx
// src/main.app.tsx
import App from "./App.tsx";
import "./index.css";
import { MyProvider } from "./MyProvider.tsx";

export default function AppEntrypoint() {
  return (
    <MyProvider>
      <App />
    </MyProvider>
  )
}
```

ğŸ’¡ **Not:** Ãœst dÃ¼zey `await` kullanÄ±yorsanÄ±z ve nasÄ±l ele alacaÄŸÄ±nÄ±zÄ± bilmiyorsanÄ±z, Discord sunucusuna katÄ±lÄ±n.

**Yeni src/main.tsx dosyasÄ± oluÅŸturun (aÅŸaÄŸÄ±daki kodu kopyala-yapÄ±ÅŸtÄ±r yapabilirsiniz):**

```tsx
// src/main.tsx
import { createRoot } from "react-dom/client";
import { StrictMode, lazy, Suspense } from "react";
import { KcPage, type KcContext } from "./keycloak-theme/kc.gen";
const AppEntrypoint = lazy(() => import("./main.app"));

// AÅŸaÄŸÄ±daki blok `npm run dev` ile belirli bir sayfayÄ± test etmek iÃ§in uncomment edilebilir
// Geri comment yapmayÄ± unutmayÄ±n yoksa bundle size artar
/*
import { getKcContextMock } from "./keycloak-theme/login/KcPageStory";

if (import.meta.env.DEV) {
    window.kcContext = getKcContextMock({
        pageId: "register.ftl",
        overrides: {}
    });
}
*/

createRoot(document.getElementById("root")!).render(
    <StrictMode>
        {window.kcContext ? (
            <KcPage kcContext={window.kcContext} />
        ) : (
            <Suspense>
                <AppEntrypoint />
            </Suspense>
        )}
    </StrictMode>
);

declare global {
    interface Window {
        kcContext?: KcContext;
    }
}
```

### Entry Point YapÄ±sÄ± HakkÄ±nda Ã–nemli AÃ§Ä±klama

**Soru:** Ana uygulamam ve Keycloak temasÄ± neden aynÄ± entry point'i paylaÅŸÄ±yor?

**Cevap:** Build sÃ¼recini basitleÅŸtirmek iÃ§in. UygulamanÄ±zÄ±n performansÄ±nÄ± olumsuz etkilememesi iÃ§in ÅŸu noktalarÄ± anlamak Ã¶nemlidir:

1. **FarklÄ± Context'ler:** 
   - `App` ve `KcPage` Ã§ok farklÄ± context'lerde mount edilir
   - `main.tsx` seviyesinde ikisi arasÄ±nda provider paylaÅŸmayÄ±n
   - GerÃ§ek entry point'ler: `AppEntrypoint` (main.app.tsx) ve `KcPage` (keycloak-theme)

2. **main.tsx'in SorumluluÄŸu:**
   - Sadece context'i belirlemeli (uygulama veya Keycloak)
   - Uygun component'i mount etmeli
   - Ã–nemli bir logic veya dependency iÃ§ermemeli

3. **Performance Considerations:**
   - `main.tsx`'i mÃ¼mkÃ¼n olduÄŸunca hafif tutun
   - Ä°lk yÃ¼kleme sÃ¼resini artÄ±rmayÄ±n
   - State management library'lerini (redux-toolkit, vb.) bu seviyede yÃ¼klemeyin

### AdÄ±m 4: Vite Plugin KonfigÃ¼rasyonu

Keycloakify'Ä±n Vite plugin'ini kullanÄ±n:

```tsx
// vite.config.ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import { keycloakify } from "keycloakify/vite-plugin";

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
    react(), 
    keycloakify({
        accountThemeImplementation: "none"
    })
  ],
})
```

ğŸ’¡ **Not:** `accountThemeImplementation`'Ä± ÅŸimdilik "none" olarak bÄ±rakÄ±n. Account theme'i baÅŸlatmak iÃ§in ilgili rehbere bakÄ±n.

Build options tanÄ±mlamak isteyebilirsiniz, Ã¶zellikle [keycloakVersionTargets](https://docs.keycloakify.dev/features/compiler-options/keycloakversiontargets).

### AdÄ±m 5: Package.json Script'leri

```json
{
  "name": "my-react-app",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview",
    "build-keycloak-theme": "npm run build && keycloakify build",
    "storybook": "storybook dev -p 6006"
  },
  // ...
}
```

### AdÄ±m 6: HTML Head Temizleme

HTML `<head />`'den Keycloak sayfalarÄ± iÃ§in alakalÄ± olmayan ÅŸeyleri hariÃ§ tutun:

âš ï¸ **UYARI:** KÃ¶rÃ¼ kÃ¶rÃ¼ne kopyala-yapÄ±ÅŸtÄ±r yapmayÄ±n, bu sadece bir Ã¶rnek!

Keycloak UI sayfalarÄ±nÄ±zÄ±n `<head/>`'inde ne olmasÄ± ne olmamasÄ± gerektiÄŸini siz anlamalÄ±sÄ±nÄ±z.

```html
<!-- public/index.html -->
<!doctype html>
<html>

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="keycloakify-ignore-start">
    <title>ACME Dashboard</title>
    <script>
        window.ENV = {
            API_ADDRESS: '${API_ADDRESS}',
            SENTRY_DSN: '${SENTRY_DSN}'
        };
    </script>
    <meta name="keycloakify-ignore-end">
    
    <!-- ... -->

</head>

<!-- ... -->
```

**Ã–rnek aÃ§Ä±klama:**
- `<title>` hariÃ§ tutuldu Ã§Ã¼nkÃ¼ Keycloakify dinamik olarak "ACME - Login" veya "ACME - Register" gibi ayarlayacak
- Environment variable injection script'i hariÃ§ tutuldu (Keycloak sayfalarÄ±nda gerekmez)

### HazÄ±r! ğŸ‰

Projeniz hazÄ±r! ArtÄ±k:

```bash
npm run build-keycloak-theme
```

Komutu ile temanÄ±zÄ± JAR dosyasÄ±na dÃ¶nÃ¼ÅŸtÃ¼rebilirsiniz. JAR dosyasÄ± `dist_keycloak` dizininde oluÅŸturulacak.

TÃ¼m Keycloakify komutlarÄ±nÄ± (`npx keycloakify --help`) projenizin root'undan kullanabilirsiniz.

### Bonus: oidc-spa

Åu anda [keycloak-js](https://www.npmjs.com/package/keycloak-js) veya [react-oidc-context](https://github.com/authts/react-oidc-context) kullanÄ±yorsanÄ±z, Keycloakify ekibinin alternatifi olan [oidc-spa](https://www.oidc-spa.dev/)'ya gÃ¶z atabilirsiniz.

### Sorun mu yaÅŸÄ±yorsunuz?

[Discord'a katÄ±lÄ±n](https://discord.gg/mJdYJSdcm4)! YardÄ±m etmek iÃ§in buradayÄ±z!

### Vite Integration Ã–zeti

**Temel Prensipler:**
1. Bu yaklaÅŸÄ±m **sadece ileri seviye kullanÄ±cÄ±lar** iÃ§indir
2. Mevcut bir projeye Keycloak temasÄ± entegre etmek iÃ§in kullanÄ±lÄ±r
3. Entry point split edilir: `main.tsx` (router) ve `main.app.tsx` (asÄ±l app)
4. `window.kcContext` varlÄ±ÄŸÄ±na gÃ¶re KcPage veya App render edilir
5. `main.tsx` hafif tutulmalÄ±, hiÃ§bir aÄŸÄ±r dependency iÃ§ermemeli
6. `keycloakify-ignore-start/end` ile HTML head'i temizleyin
7. Vite config'e `keycloakify` plugin'i ekleyin
8. Build script: `npm run build && keycloakify build`

**Dikkat Edilmesi Gerekenler:**
- BaÅŸlamadan Ã¶nce tÃ¼m deÄŸiÅŸiklikleri commit edin
- `keycloak-theme` dizini `src` altÄ±nda herhangi bir yerde olabilir
- Provider'larÄ± `main.tsx` seviyesinde paylaÅŸmayÄ±n
- Top-level await kullanÄ±mÄ± iÃ§in destek gerekebilir
- HTML head temizliÄŸi proje bazÄ±nda Ã¶zelleÅŸtirilmelidir
- `accountThemeImplementation: "none"` ile baÅŸlayÄ±n
- Bundle size iÃ§in gereksiz import'lar yapmayÄ±n
- Performance iÃ§in lazy loading kullanÄ±n

**Starter Project vs Vite Integration:**
- **Starter Project**: SÄ±fÄ±rdan Keycloak temasÄ± geliÅŸtirme
- **Vite Integration**: Mevcut projeye tema ekleme
- **Hangisini kullanmalÄ±**: ÅÃ¼pheniz varsa Starter Project
- **AvantajÄ±**: Mevcut component ve stilleri yeniden kullanma
- **DezavantajÄ±**: Daha karmaÅŸÄ±k setup, daha fazla dikkat gerektirir

---

## 7. CREATE-REACT-APP / WEBPACK INTEGRATION (ADVANCED)

### ğŸš¨ UYARI: Ä°LERÄ° SEVÄ°YE KULLANICILAR Ä°Ã‡Ä°N ğŸš¨

âš ï¸ **Ã‡OK Ã–NEMLÄ°:** Bu bÃ¶lÃ¼mÃ¼n ne hakkÄ±nda olduÄŸundan emin deÄŸilseniz, **bu yaklaÅŸÄ±m SÄ°ZÄ°N Ä°Ã‡Ä°N DEÄÄ°LDÄ°R.**

Bunun yerine [Quick Start Guide ve starter project'i fork edin](https://docs.keycloakify.dev/readme#quick-start).

Bu bÃ¶lÃ¼m **SADECE**:
- Zaten mevcut bir Webpack/React/TypeScript projeye sahip olan
- Ve bu projeye bir Keycloak temasÄ± entegre etmesi gereken
- Mevcut componentleri ve stilleri yeniden kullanmak isteyen
- Ä°leri seviye geliÅŸtiriciler iÃ§indir

ğŸ”¹ Sadece Keycloakify'a baÅŸlamaya Ã§alÄ±ÅŸÄ±yorsanÄ±z, **BURADA DURUN** - starter project'ler Ã§ok daha basit ve Ã¶nerilen bir yoldur.

ğŸ”¹ Bu yaklaÅŸÄ±mÄ±n starter project'ten nasÄ±l farklÄ± olduÄŸunu tam olarak anlamadan devam ederseniz, kafanÄ±z karÄ±ÅŸacak ve sonunda bir engele takÄ±lacaksÄ±nÄ±z.

### Create React App / Webpack Projesine Entegrasyon

Bir Webpack/React/TypeScript projeniz varsa (Ã¶rn: Create React App), Keycloakify'Ä± doÄŸrudan iÃ§ine entegre edebilirsiniz.

Bu rehberde vanilla [Create React App](https://create-react-app.dev/) projesi kullanÄ±yoruz.

### Ã–n HazÄ±rlÄ±k

âš ï¸ **Herhangi bir ÅŸey yapmadan Ã¶nce**, tÃ¼m bekleyen deÄŸiÅŸikliklerinizi commit edin, bÃ¶ylece gerekirse kolayca geri dÃ¶nebilirsiniz.

### AdÄ±m 1: Keycloakify'Ä± YÃ¼kleme

```bash
npm install --save keycloakify
# Storybook yÃ¼klemek opsiyoneldir
npm install --save-dev rimraf storybook @storybook/react @storybook/react-vite
```

### AdÄ±m 2: Starter Template DosyalarÄ±nÄ± Getirme

Webpack iÃ§in Ã¶zel starter template'ten ilgili dosyalarÄ± projenize taÅŸÄ±yÄ±n:

```bash
cd my-app
git clone https://github.com/keycloakify/keycloakify-starter-webpack tmp
mv tmp/src src/keycloak-theme

# Not: Projenizde zaten Storybook setup'Ä± varsa bunu atlayabilirsiniz
# Sadece .storybook/main.ts'de `staticDirs: ["../public"]` olduÄŸundan emin olun
mv tmp/.storybook .

rm -rf tmp
rm src/keycloak-theme/react-app-env.d.ts
mv src/keycloak-theme/index.tsx src/index.tsx
```

**SonuÃ§ dizin yapÄ±sÄ±:**
```
src/
  keycloak-theme/
    login/
    kc.gen.tsx
  index.tsx
  App.tsx
  ...
```

### AdÄ±m 3: Entry Point'i Modifiye Etme

**Mevcut src/index.tsx dosyanÄ±z ÅŸu ÅŸekilde olabilir:**

```tsx
// src/index.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import { MyProvider } from "./MyProvider";
import reportWebVitals from './reportWebVitals';

const root = ReactDOM.createRoot(
  document.getElementById('root') as HTMLElement
);
root.render(
  <React.StrictMode>
    <MyProvider>
      <App />
    </MyProvider>
  </React.StrictMode>
);

reportWebVitals();
```

**Bu dosyayÄ± `src/index.app.tsx` olarak yeniden adlandÄ±rÄ±n ve ÅŸu ÅŸekilde dÃ¼zenleyin:**

```tsx
// src/index.app.tsx
import './index.css';
import App from './App';
import { MyProvider } from "./MyProvider";
import reportWebVitals from './reportWebVitals';

export default function AppEntrypoint(){
  return (
    <MyProvider>
      <App />
    </MyProvider>
  );
}

reportWebVitals();
```

**Yeni src/index.tsx dosyasÄ± oluÅŸturun:**

```tsx
// src/index.tsx
import { createRoot } from "react-dom/client";
import { StrictMode, lazy, Suspense } from "react";
import { KcPage, type KcContext } from "./keycloak-theme/kc.gen";
const AppEntrypoint = lazy(() => import("./index.app"));

// AÅŸaÄŸÄ±daki blok `npm start` ile belirli bir sayfayÄ± test etmek iÃ§in uncomment edilebilir
// Geri comment yapmayÄ± unutmayÄ±n yoksa bundle size artar
/*
import { getKcContextMock } from "./keycloak-theme/login/KcPageStory";

if (process.env.NODE_ENV === "development") {
    window.kcContext = getKcContextMock({
        pageId: "register.ftl",
        overrides: {}
    });
}
*/

createRoot(document.getElementById("root")!).render(
    <StrictMode>
        {window.kcContext ? (
            <KcPage kcContext={window.kcContext} />
        ) : (
            <Suspense>
                <AppEntrypoint />
            </Suspense>
        )}
    </StrictMode>
);

declare global {
    interface Window {
        kcContext?: KcContext;
    }
}
```

### Entry Point YapÄ±sÄ± HakkÄ±nda Ã–nemli AÃ§Ä±klama

**Soru:** Ana uygulamam ve Keycloak temasÄ± neden aynÄ± entry point'i paylaÅŸÄ±yor?

**Cevap:** Build sÃ¼recini basitleÅŸtirmek iÃ§in. UygulamanÄ±zÄ±n performansÄ±nÄ± olumsuz etkilememesi iÃ§in ÅŸu noktalarÄ± anlamak Ã¶nemlidir:

1. **FarklÄ± Context'ler:** 
   - `App` ve `KcPage` Ã§ok farklÄ± context'lerde mount edilir
   - `index.tsx` seviyesinde ikisi arasÄ±nda provider paylaÅŸmayÄ±n
   - GerÃ§ek entry point'ler: `AppEntrypoint` (index.app.tsx) ve `KcPage` (keycloak-theme)

2. **index.tsx'in SorumluluÄŸu:**
   - Sadece context'i belirlemeli (uygulama veya Keycloak)
   - Uygun component'i mount etmeli
   - Ã–nemli bir logic veya dependency iÃ§ermemeli

3. **Performance Considerations:**
   - `index.tsx`'i mÃ¼mkÃ¼n olduÄŸunca hafif tutun
   - State management library'lerini (redux-toolkit, vb.) bu seviyede yÃ¼klemeyin

### AdÄ±m 4: Package.json KonfigÃ¼rasyonu

Script'leri ve Keycloakify konfigÃ¼rasyonunu ekleyin:

```json
{
    "name": "my-app",
    "scripts": {
        "prestart": "keycloakify update-kc-gen && keycloakify copy-keycloak-resources-to-public",
        "start": "react-scripts start",
        "prestorybook": "npm run prestart",
        "storybook": "storybook dev -p 6006",
        "prebuild": "keycloakify update-kc-gen",
        "build": "react-scripts build",
        "postbuild": "rimraf build/keycloakify-dev-resources",
        "build-keycloak-theme": "npm run build && keycloakify build",
        "format": "prettier . --write"
        // ...
    },
    "keycloakify": {
        "accountThemeImplementation": "none",
        "projectBuildDirPath": "build",
        "staticDirPathInProjectBuildDirPath": "static",
        "publicDirPath": "public"
    },
    // ...
}
```

ğŸ’¡ **Not:** `accountThemeImplementation`'Ä± ÅŸimdilik "none" olarak bÄ±rakÄ±n.

### Webpack-Specific KonfigÃ¼rasyon Parametreleri

âš ï¸ **Ã–NEMLÄ°:** `projectBuildDirPath`, `staticDirPathInProjectBuildDirPath` ve `publicDirPath` Webpack kullanÄ±mÄ±na Ã¶zel parametrelerdir.

**Bunlar tercih DEÄÄ°L, gerekliliklerdir!** Create React App kullanmÄ±yorsanÄ±z, Webpack konfigÃ¼rasyonunuz muhtemelen farklÄ±dÄ±r ve bu deÄŸerleri projenizin build yapÄ±sÄ±na gÃ¶re gÃ¼ncellemeniz gerekir.

**Create React App iÃ§in aÃ§Ä±klama:**
- `npm run build` Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda app distribution **build/** dizininde oluÅŸturulur â†’ `"projectBuildDirPath": "build"`
- TÃ¼m assetler **static/** dizini altÄ±nda toplanÄ±r â†’ `"staticDirPathInProjectBuildDirPath": "static"`
- **public/** dizinindeki her ÅŸey **build/** dizinine kopyalanÄ±r â†’ `"publicDirPath": "public"`

**Ã–rnek build yapÄ±sÄ±:**
```
build/
  static/
    css/
    js/
    media/
  index.html
  manifest.json
  ...
```

### AdÄ±m 5: HTML Head Temizleme

HTML `<head />`'den Keycloak sayfalarÄ± iÃ§in alakalÄ± olmayan ÅŸeyleri hariÃ§ tutun:

âš ï¸ **UYARI:** KÃ¶rÃ¼ kÃ¶rÃ¼ne kopyala-yapÄ±ÅŸtÄ±r yapmayÄ±n!

```html
<!-- public/index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/icon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/icon.png" />
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

  <meta name="keycloakify-ignore-start">
  <title>ACME Dashboard</title>
  <script>
    window.ENV = {
      API_ADDRESS: '${API_ADDRESS}',
      SENTRY_DSN: '${SENTRY_DSN}'
    };
  </script>
  <meta name="keycloakify-ignore-end">

  <!-- ... -->

</head>

<!-- ... -->
```

**Ã–rnek aÃ§Ä±klama:**
- `<title>` hariÃ§ tutuldu (Keycloakify dinamik olarak ayarlayacak)
- Environment variable injection script'i hariÃ§ tutuldu

### HazÄ±r! ğŸ‰

Projeniz hazÄ±r! ArtÄ±k:

```bash
npm run build-keycloak-theme
```

Komutu ile temanÄ±zÄ± JAR dosyasÄ±na dÃ¶nÃ¼ÅŸtÃ¼rebilirsiniz. JAR dosyasÄ± `build_keycloak` dizininde oluÅŸturulacak (bu dizin adÄ± deÄŸiÅŸtirilebilir).

TÃ¼m Keycloakify komutlarÄ±nÄ± (`npx keycloakify --help`) projenizin root'undan kullanabilirsiniz.

### Bonus: oidc-spa

Åu anda [keycloak-js](https://www.npmjs.com/package/keycloak-js) veya [react-oidc-context](https://github.com/authts/react-oidc-context) kullanÄ±yorsanÄ±z, [oidc-spa](https://www.oidc-spa.dev/)'ya gÃ¶z atabilirsiniz.

### Sorun mu yaÅŸÄ±yorsunuz?

[Discord'a katÄ±lÄ±n](https://discord.gg/mJdYJSdcm4)! YardÄ±m etmek iÃ§in buradayÄ±z!

### Webpack/CRA Integration Ã–zeti

**Temel Prensipler:**
1. Bu yaklaÅŸÄ±m **sadece ileri seviye kullanÄ±cÄ±lar** iÃ§indir
2. Mevcut Webpack/CRA projesine Keycloak temasÄ± entegre etmek iÃ§in
3. Entry point split edilir: `index.tsx` (router) ve `index.app.tsx` (asÄ±l app)
4. `window.kcContext` varlÄ±ÄŸÄ±na gÃ¶re KcPage veya App render edilir
5. Webpack-specific konfigÃ¼rasyon parametreleri MUTLAKA doÄŸru olmalÄ±
6. Pre/post build script'leri ile Keycloakify komutlarÄ± entegre edilir

**Webpack-Specific KonfigÃ¼rasyon:**
- `projectBuildDirPath`: Build output dizini (Ã¶rn: "build")
- `staticDirPathInProjectBuildDirPath`: Static assetlerin toplanma dizini (Ã¶rn: "static")
- `publicDirPath`: Public assets dizini (Ã¶rn: "public")
- Bu parametreler projenize gÃ¶re deÄŸiÅŸir, CRA deÄŸerleri deÄŸildir!

**Script'ler:**
- `prestart`: Dev sunucusu baÅŸlamadan Ã¶nce Keycloakify hazÄ±rlÄ±k
- `prestorybook`: Storybook baÅŸlamadan Ã¶nce hazÄ±rlÄ±k
- `prebuild`: Build Ã¶ncesi Keycloakify hazÄ±rlÄ±k
- `postbuild`: Build sonrasÄ± geliÅŸtirme kaynaklarÄ±nÄ± temizleme
- `build-keycloak-theme`: Tema JAR'Ä±nÄ± oluÅŸturma

**Dikkat Edilmesi Gerekenler:**
- CRA kullanmÄ±yorsanÄ±z, Webpack build yapÄ±nÄ±zÄ± analiz edin
- `projectBuildDirPath` gibi parametreleri projenize gÃ¶re ayarlayÄ±n
- `rimraf` dependency olarak gerekli (build temizleme iÃ§in)
- Dev modda `process.env.NODE_ENV === "development"` kullanÄ±n
- Starter template Webpack versiyonunu kullanÄ±n (starter-webpack)
- Build output'u inceleyerek doÄŸru parametreleri belirleyin

**CRA vs Vite:**
- **CRA**: Webpack tabanlÄ±, daha eski setup
- **Vite**: Modern, daha hÄ±zlÄ± build
- **Hangisini kullanmalÄ±**: Mevcut projenize gÃ¶re
- **Migration**: CRA'dan Vite'a geÃ§meyi dÃ¼ÅŸÃ¼nebilirsiniz

---

## 8. NX MONOREPO INTEGRATION (ADVANCED)

### UyarÄ±

âš ï¸ Bu bÃ¶lÃ¼mÃ¼n ne hakkÄ±nda olduÄŸundan emin deÄŸilseniz, **bu yaklaÅŸÄ±m sizin iÃ§in deÄŸildir.** Bunun yerine [Quick Start Guide ve starter project'i fork edin](https://docs.keycloakify.dev/readme#quick-start).

### Nx Integrated Monorepo'ya Entegrasyon

Keycloakify temasÄ±nÄ± Nx projesi (integrated monorepo) iÃ§ine nasÄ±l entegre edeceÄŸimizi gÃ¶relim.

Bu Ã¶rnekte Nx Vite starter ile baÅŸlayacaÄŸÄ±z:

```bash
npx create-nx-workspace@latest --preset=react-monorepo --bundler=vite
```

**Workspace adÄ± Ã¶rneÄŸi:** `nx-monorepo`
**Application adÄ± Ã¶rneÄŸi:** `keycloak-theme`

### AdÄ±m 1: Keycloakify Starter Template KaynaklarÄ±nÄ± Getirme

Keycloakify Starter template kaynaklarÄ±nÄ± projeye taÅŸÄ±yÄ±n. Sadece `src` ve `.storybook` dizinlerini kopyalayÄ±n:

```bash
cd nx-monorepo
rm -rf apps/keycloak-theme/src
git clone https://github.com/keycloakify/keycloakify-starter tmp
mv tmp/src apps/keycloak-theme
mv tmp/.storybook apps/keycloak-theme
rm -rf tmp
```

**SonuÃ§ dizin yapÄ±sÄ±:**
```
nx-monorepo/
  apps/
    keycloak-theme/
      src/
        login/
        kc.gen.tsx
        main.tsx
        ...
      .storybook/
      vite.config.ts
      project.json
      ...
  libs/
  package.json
  ...
```

### AdÄ±m 2: Package.json KonfigÃ¼rasyonu

Root `package.json` dosyasÄ±na script'ler ve dependency'ler ekleyin:

```json
{
  "name": "@nx-monorepo/source",
  "version": "0.0.0",
  "scripts": {
    "build-keycloak-theme": "nx build keycloak-theme && keycloakify build -p apps/keycloak-theme",
    "keycloak-theme-storybook": "npx storybook dev -p 6006 -c apps/keycloak-theme/.storybook",
    "start-keycloak": "keycloakify start-keycloak -p apps/keycloak-theme"
  },
  "dependencies": {
    "react": "18.3.1",
    "react-dom": "18.3.1",
    "tslib": "^2.3.0",
    "keycloakify": "^10.0.0"
  },
  "devDependencies": {
      "storybook": "^8.1.10",
      "@storybook/react": "^8.1.10",
      "@storybook/react-vite": "^8.1.10"
  // ...
}
```

**Dependency'leri yÃ¼kleyin:**
```bash
npm install  # veya pnpm install, yarn, bun install
```

### AdÄ±m 3: Vite Config KonfigÃ¼rasyonu

`apps/keycloak-theme/vite.config.ts` dosyasÄ±nÄ± dÃ¼zenleyin:

```typescript
/// <reference types='vitest' />
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { nxViteTsPaths } from '@nx/vite/plugins/nx-tsconfig-paths.plugin';
import { keycloakify } from "keycloakify/vite-plugin";

export default defineConfig({
  root: __dirname,
  cacheDir: '../../node_modules/.vite/apps/keycloak-theme',

  server: {
    port: 4200,
    host: 'localhost',
  },

  preview: {
    port: 4300,
    host: 'localhost',
  },

  plugins: [
    react(), 
    nxViteTsPaths(), 
    keycloakify({
      themeName: "my-project",
      themeVersion: "1.0.0",
      keycloakifyBuildDirPath: '../../dist/apps/keycloak-theme'
    })
  ],

  // Uncomment this if you are using workers.
  // worker: {
  //  plugins: [ nxViteTsPaths() ],
  // },

  build: {
    outDir: 'dist',
    emptyOutDir: true,
    reportCompressedSize: true,
    commonjsOptions: {
      transformMixedEsModules: true,
    },
  },
});
```

### AdÄ±m 4: Build ve Test

ArtÄ±k tema build edebilirsiniz:

```bash
npm run build-keycloak-theme
```

Bu komut JAR dosyasÄ±nÄ± `dist/apps/keycloak-theme` dizininde oluÅŸturacaktÄ±r.

**SonuÃ§:**
```
dist/
  apps/
    keycloak-theme/
      keycloak-theme-for-kc-all-other-versions.jar
      keycloak-theme-for-kc-22-to-25.jar
      ...
```

### Keycloakify CLI KomutlarÄ±nÄ± Kullanma

Keycloakify CLI komutlarÄ±nÄ± kullanmak iÃ§in iki seÃ§eneÄŸiniz var:

**SeÃ§enek 1: Sub-app dizinine cd ile:**
```bash
cd apps/keycloak-theme
npx keycloakify add-story
```

**SeÃ§enek 2: --project (-p) flag ile root'tan:**
```bash
npx keycloakify add-story -p apps/keycloak-theme
```

Her iki yÃ¶ntem de aynÄ± ÅŸekilde Ã§alÄ±ÅŸÄ±r. Monorepo root'undan Ã§alÄ±ÅŸmak istiyorsanÄ±z `-p` flag'ini kullanÄ±n.

### DiÄŸer Keycloakify KomutlarÄ±

**Story ekleme:**
```bash
npx keycloakify add-story -p apps/keycloak-theme
```

**Page eject etme:**
```bash
npx keycloakify eject-page -p apps/keycloak-theme
```

**Keycloak baÅŸlatma:**
```bash
npm run start-keycloak
```

**Storybook baÅŸlatma:**
```bash
npm run keycloak-theme-storybook
```

### Ä°leri KonfigÃ¼rasyon

Temel konfigÃ¼rasyonun Ã¶tesine geÃ§mek iÃ§in [build options](https://docs.keycloakify.dev/features/compiler-options) keÅŸfedebilirsiniz.

Ã–zellikle `keycloakVersionTargets` ile sadece ihtiyacÄ±nÄ±z olan JAR dosyalarÄ±nÄ±n Ã¼retildiÄŸinden emin olabilirsiniz.

**Ã–rnek:**
```typescript
keycloakify({
  themeName: "my-project",
  themeVersion: "1.0.0",
  keycloakifyBuildDirPath: '../../dist/apps/keycloak-theme',
  keycloakVersionTargets: {
    "26": "keycloak-theme.jar"  // Sadece Keycloak 26 iÃ§in
  }
})
```

### Nx Monorepo Ã–zeti

**Temel YapÄ±:**
1. Nx workspace oluÅŸtur (react-monorepo preset)
2. Keycloakify starter'Ä± sub-app olarak ekle
3. Root package.json'a script'ler ekle
4. Vite config'e keycloakify plugin ekle
5. Build ve test et

**Ã–nemli KonfigÃ¼rasyon:**
- `keycloakifyBuildDirPath`: JAR Ã§Ä±ktÄ± dizini (Nx dist yapÄ±sÄ±na gÃ¶re)
- `themeName`: Tema adÄ±
- `themeVersion`: Tema versiyonu
- `-p` flag: CLI komutlarÄ± iÃ§in project path

**Script'ler:**
- `build-keycloak-theme`: Nx build + Keycloakify build
- `keycloak-theme-storybook`: Storybook'u baÅŸlat
- `start-keycloak`: Test Keycloak container baÅŸlat

**Nx AvantajlarÄ±:**
- Monorepo iÃ§inde tema yÃ¶netimi
- DiÄŸer projelerle kod paylaÅŸÄ±mÄ± (libs)
- Nx cache ve build optimizasyonlarÄ±
- TutarlÄ± tooling ve konfigÃ¼rasyon

**Dikkat Edilmesi Gerekenler:**
- Build output path'i Nx yapÄ±sÄ±na uygun ayarlayÄ±n
- CLI komutlarÄ±nda `-p` flag'ini unutmayÄ±n (root'tan Ã§alÄ±ÅŸtÄ±rÄ±rken)
- Nx'in kendi build system'ini atlamamak iÃ§in `nx build` kullanÄ±n
- `keycloakifyBuildDirPath` mutlaka doÄŸru olmalÄ±
- Sub-app iÃ§indeki `.storybook` config'i doÄŸru yola iÅŸaret etmeli

**Monorepo Best Practices:**
- Shared componentleri `libs/` altÄ±nda tutun
- Theme-specific kodlarÄ± `apps/keycloak-theme` iÃ§inde tutun
- Nx generators ile consistency saÄŸlayÄ±n
- Dependency graph'Ä± dÃ¼zenli kontrol edin (`nx graph`)
- Build cache'den faydalanÄ±n

---

## 9. USING A COMPONENT LIBRARY (MUI, SHADCN/UI, VB.)

### Component Library ile Ã–zelleÅŸtirme

Keycloakify starter repository'si baÅŸlangÄ±Ã§ta React/Angular/Svelte componentleri aÃ§Ä±sÄ±ndan seyrek gÃ¶rÃ¼nebilir, bu kafa karÄ±ÅŸtÄ±rÄ±cÄ± olabilir. Ancak endiÅŸelenmeyinâ€”bu tasarÄ±m seÃ§imi yakÄ±nda mantÄ±klÄ± gelecek.

### VarsayÄ±lan YaklaÅŸÄ±m: DefaultPage

**VarsayÄ±lan olarak**, Keycloakify, default UI'Ä± oluÅŸturan tÃ¼m componentleri iÃ§selleÅŸtirir ve sadece `DefaultPage` componentini dÄ±ÅŸa aÃ§ar.

**Bu yaklaÅŸÄ±mÄ±n arkasÄ±ndaki fikir:**
- Projenizde sadece deÄŸiÅŸtirdiÄŸiniz sayfalarÄ± bulundurmanÄ±z
- Sadece CSS customization yapmak isteyenleri bunaltmamak
- Temiz ve minimal bir codebase tutmak

### Component Eject Etme

Default tema'dan herhangi bir componenti Ã¶zelleÅŸtirmek istiyorsanÄ±z, ÅŸu komutu Ã§alÄ±ÅŸtÄ±rabilirsiniz:

```bash
npx keycloakify eject-page
```

Bu komut:
1. Keycloakify'Ä±n kaynak kodundan belirli componentleri seÃ§menizi saÄŸlar
2. SeÃ§ilen componentleri kendi codebase'inize kopyalar
3. Ä°leri Ã¶zelleÅŸtirme iÃ§in hazÄ±r hale getirir

### eject-page Komutu KullanÄ±mÄ±

**Komut Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda:**
```bash
npx keycloakify eject-page
```

**Bir liste gÃ¶receksiniz:**
- Login sayfasÄ± (login.ftl)
- Register sayfasÄ± (register.ftl)
- Password reset sayfasÄ± (login-reset-password.ftl)
- Error sayfasÄ± (error.ftl)
- Ve diÄŸer tÃ¼m sayfalar...

**SeÃ§tiÄŸiniz sayfa:**
- `src/login/pages/` dizinine kopyalanÄ±r (React iÃ§in)
- TÃ¼m component kodu projenize gelir
- ArtÄ±k istediÄŸiniz gibi dÃ¼zenleyebilirsiniz

### Component Library KullanÄ±mÄ±

Eject ettikten sonra, istediÄŸiniz component library'yi kullanabilirsiniz:

**Material-UI (MUI) Ã–rneÄŸi:**

```bash
npm install @mui/material @emotion/react @emotion/styled
```

```tsx
// src/login/pages/Login.tsx
import { TextField, Button, Box, Typography } from '@mui/material';
import { useGetClassName } from 'keycloakify/login/lib/useGetClassName';

export default function Login(props: PageProps<Extract<KcContext, { pageId: "login.ftl" }>>) {
    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;
    const { getClassName } = useGetClassName({ doUseDefaultCss, classes });
    
    return (
        <Template {...{ kcContext, i18n, doUseDefaultCss, classes }}>
            <Box sx={{ maxWidth: 400, margin: '0 auto', p: 3 }}>
                <Typography variant="h4" gutterBottom>
                    {i18n.msgStr("loginTitle")}
                </Typography>
                
                <TextField
                    fullWidth
                    label="Username"
                    name="username"
                    margin="normal"
                    variant="outlined"
                />
                
                <TextField
                    fullWidth
                    label="Password"
                    name="password"
                    type="password"
                    margin="normal"
                    variant="outlined"
                />
                
                <Button
                    fullWidth
                    variant="contained"
                    color="primary"
                    type="submit"
                    sx={{ mt: 2 }}
                >
                    {i18n.msgStr("doLogIn")}
                </Button>
            </Box>
        </Template>
    );
}
```

**shadcn/ui Ã–rneÄŸi:**

```bash
npx shadcn-ui@latest init
npx shadcn-ui@latest add button input
```

```tsx
// src/login/pages/Login.tsx
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"

export default function Login(props: PageProps<Extract<KcContext, { pageId: "login.ftl" }>>) {
    // ... component kodu
    
    return (
        <Template {...{ kcContext, i18n, doUseDefaultCss, classes }}>
            <div className="max-w-md mx-auto p-6">
                <h1 className="text-2xl font-bold mb-6">
                    {i18n.msgStr("loginTitle")}
                </h1>
                
                <div className="space-y-4">
                    <div>
                        <Label htmlFor="username">Username</Label>
                        <Input id="username" name="username" />
                    </div>
                    
                    <div>
                        <Label htmlFor="password">Password</Label>
                        <Input id="password" name="password" type="password" />
                    </div>
                    
                    <Button className="w-full" type="submit">
                        {i18n.msgStr("doLogIn")}
                    </Button>
                </div>
            </div>
        </Template>
    );
}
```

### Default Styles'Ä± Devre DÄ±ÅŸÄ± BÄ±rakma

Component library kullanÄ±rken, genellikle tÃ¼m default styles'Ä± devre dÄ±ÅŸÄ± bÄ±rakmak istersiniz:

```tsx
// src/login/pages/Login.tsx
<Template
    {...{ kcContext, i18n, classes }}
    doUseDefaultCss={false}  // Default CSS'i kapat
>
    {/* MUI veya shadcn/ui componentleriniz */}
</Template>
```

**Veya tÃ¼m sayfalar iÃ§in:**

```tsx
// src/login/KcPage.tsx
<DefaultPage
    kcContext={kcContext}
    i18n={i18n}
    classes={classes}
    Template={Template}
    doUseDefaultCss={false}  // Global olarak kapat
    UserProfileFormFields={UserProfileFormFields}
    doMakeUserConfirmPassword={doMakeUserConfirmPassword}
/>
```

DetaylÄ± bilgi iÃ§in [CSS Customization - Remove All Default Styles](#2-css-customization) bÃ¶lÃ¼mÃ¼ne bakÄ±n.

### Video Tutorial

MUI kullanarak login sayfasÄ±nÄ± nasÄ±l Ã¶zelleÅŸtireceÄŸinizi gÃ¶steren video tutorial:
[https://youtu.be/PhNE-3EwwP8](https://youtu.be/PhNE-3EwwP8)

**Video'da Ã¶nemli noktalar:**
- Component library kurulumu
- Sayfa eject etme
- Default styles'Ä± devre dÄ±ÅŸÄ± bÄ±rakma ([video'nun 22:18'inde](https://youtu.be/PhNE-3EwwP8?t=1338))
- MUI componentleri ile Ã¶zelleÅŸtirme

### Component Library KullanÄ±mÄ± Ã–zeti

**Temel Workflow:**
1. Component library'yi kur (MUI, shadcn/ui, Ant Design, vb.)
2. `npx keycloakify eject-page` ile sayfayÄ± eject et
3. SayfayÄ± seÃ§tiÄŸin component library ile yeniden yaz
4. `doUseDefaultCss={false}` ile default styles'Ä± kapat
5. Test et ve deploy et

**PopÃ¼ler Component Libraries:**
- **Material-UI (MUI)**: Comprehensive, Google'Ä±n Material Design
- **shadcn/ui**: Tailwind tabanlÄ±, modern, Ã¶zelleÅŸtirilebilir
- **Ant Design**: Enterprise-grade, Ã§ok sayÄ±da component
- **Chakra UI**: Accessibility-focused, kolay kullanÄ±m
- **Radix UI**: Unstyled primitives, tam kontrol
- **Mantine**: Hooks tabanlÄ±, zengin feature set

**Avantajlar:**
- Professional gÃ¶rÃ¼nÃ¼m hemen kullanÄ±ma hazÄ±r
- Accessibility built-in
- Responsive design otomatik
- TutarlÄ± design system
- HÄ±zlÄ± geliÅŸtirme

**Dikkat Edilmesi Gerekenler:**
- Sadece kullandÄ±ÄŸÄ±nÄ±z sayfalarÄ± eject edin
- Bundle size'Ä± gÃ¶z Ã¶nÃ¼nde bulundurun
- Tree-shaking'in Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun
- Component library CSS'ini doÄŸru import edin
- Theme konfigÃ¼rasyonunu dikkatli yapÄ±n

**Best Practices:**
- Ã–nce bir sayfada test edin (Ã¶rn: login.ftl)
- Default styles'Ä± tamamen kapat
- Component library'nin theme'ini projenize uyarlayÄ±n
- Reusable wrapper componentler oluÅŸturun
- Form validation'Ä± component library'den kullanÄ±n
- Accessibility'yi test edin

**Ã–rnek Proje YapÄ±sÄ±:**
```
src/
  login/
    pages/
      Login.tsx           # Eject edilmiÅŸ, MUI ile Ã¶zelleÅŸtirilmiÅŸ
      Register.tsx        # Eject edilmiÅŸ, MUI ile Ã¶zelleÅŸtirilmiÅŸ
      LoginResetPassword.tsx  # Eject edilmiÅŸ
    components/          # Shared components
      FormCard.tsx       # MUI Card wrapper
      SubmitButton.tsx   # MUI Button wrapper
    KcPage.tsx          # doUseDefaultCss={false} buraya
    i18n.ts
  components/
    ui/                  # shadcn/ui components (eÄŸer kullanÄ±yorsanÄ±z)
```

---

## 10. CUSTOM FONTS (Ã–ZEL FONTLAR)

### Web Font Service KullanÄ±mÄ±

Google Fonts gibi web font servislerinden font kullanmak Ã§ok kolaydÄ±r. Ã–rnek olarak [Playwrite Nederland](https://fonts.google.com/specimen/Playwrite+NL) fontunu kullanalÄ±m.

#### AdÄ±m 1: CSS DosyasÄ± OluÅŸturma

```css
/* src/login/main.css */
@import url('https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Playwrite+NL:wght@100..400&family=Playwrite+PL:wght@100..400&display=swap');

.kcHeaderWrapperClass {
    /* NOT: Her yere uygulamak iÃ§in `body {` kullanabilirsiniz */
    font-family: "Playwrite NL", cursive;
}
```

#### AdÄ±m 2: Global Stylesheet Olarak Import Etme

**React iÃ§in:**
```tsx
// src/login/KcPage.tsx
import "./main.css";
// ...
```

**Angular iÃ§in:**
```tsx
// src/login/KcApp.ts
import "./main.css";
// ...
```

**Svelte iÃ§in:**
```html
<!-- src/login/KcPage.svelte -->
<script lang="ts">
  import "./main.css";
  import Template from '@keycloakify/svelte/login/Template.svelte';
  ...
</script>
```

**SonuÃ§:** Playwrite NL fontu baÅŸarÄ±yla header'a uygulandÄ±!

### Self-Hosted Fonts KullanÄ±mÄ±

Keycloak genellikle kurumsal iÃ§ aÄŸlarda katÄ± network trafik kontrolÃ¼ ile kullanÄ±lÄ±r. Bu durumda, Font CDN kullanmak bir seÃ§enek deÄŸildir. Fontu JAR iÃ§inde paketlemek ve doÄŸrudan Keycloak sunucusu Ã¼zerinden sunmak istersiniz.

Ã–rnek olarak [Vercel'in Geist](https://vercel.com/font) fontunun self-hosted kopyasÄ±nÄ± kullanalÄ±m.

#### AdÄ±m 1: Font DosyalarÄ±nÄ± Ä°ndirme ve YerleÅŸtirme

Font dosyalarÄ±nÄ± indirin ve `src/login/assets/fonts/geist/` dizinine yerleÅŸtirin.

**Dizin yapÄ±sÄ±:**
```
src/
  login/
    assets/
      fonts/
        geist/
          main.css
          GeistVF.woff2
          GeistMonoVF.woff2
          ...
    main.css
    KcPage.tsx
    ...
```

#### AdÄ±m 2: CSS DosyasÄ± OluÅŸturma

```css
/* src/login/main.css */
@import url(./assets/fonts/geist/main.css);

body {
  font-family: Geist;
}
```

#### AdÄ±m 3: Global Stylesheet Olarak Import Etme

**React iÃ§in:**
```tsx
// src/login/KcPage.tsx
import "./main.css";
// ...
```

**Angular iÃ§in:**
```tsx
// src/login/KcApp.ts
import "./main.css";
// ...
```

**Svelte iÃ§in:**
```html
<!-- src/login/KcPage.svelte -->
<script lang="ts">
  import "./main.css";
  import Template from '@keycloakify/svelte/login/Template.svelte';
  ...
</script>
```

**SonuÃ§:** Geist fontu baÅŸarÄ±yla uygulandÄ±!

### Custom Fonts Ã–zeti

**Web Font Service (Google Fonts, Adobe Fonts, vb.):**

**Avantajlar:**
- Kolay kullanÄ±m, tek satÄ±r `@import`
- CDN Ã¼zerinden hÄ±zlÄ± yÃ¼kleme
- Otomatik optimizasyon ve caching
- GeniÅŸ font seÃ§enekleri

**Dezavantajlar:**
- DÄ±ÅŸ network eriÅŸimi gerektirir
- Kurumsal gÃ¼venlik politikalarÄ± ile uyumsuz olabilir
- Privacy endiÅŸeleri (GDPR)
- CDN kesintilerinden etkilenir

**KullanÄ±m SenaryolarÄ±:**
- Public facing uygulamalar
- Network kÄ±sÄ±tlamasÄ± olmayan ortamlar
- HÄ±zlÄ± prototipleme

**Self-Hosted Fonts:**

**Avantajlar:**
- DÄ±ÅŸ network eriÅŸimi gerektirmez
- Kurumsal network politikalarÄ±na uyumlu
- Tam kontrol (versiyonlama, optimizasyon)
- Privacy uyumlu (GDPR, CCPA)
- Offline Ã§alÄ±ÅŸma

**Dezavantajlar:**
- Font lisanslarÄ±nÄ± kontrol etme sorumluluÄŸu
- Manuel gÃ¼ncelleme gereksinimi
- JAR dosya boyutunu artÄ±rÄ±r
- Font dosyalarÄ±nÄ± yÃ¶netme yÃ¼kÃ¼

**KullanÄ±m SenaryolarÄ±:**
- Kurumsal iÃ§ network'ler
- Strict network politikalarÄ±
- High-security ortamlar
- Offline capability gereklilikleri

### Best Practices

**Font SeÃ§imi:**
- Web-safe fallback fontlarÄ± belirleyin
- Font stack kullanÄ±n: `font-family: "Geist", -apple-system, system-ui, sans-serif;`
- Variable fonts tercih edin (daha az dosya boyutu)
- WOFF2 formatÄ±nÄ± kullanÄ±n (en iyi compression)

**Performance:**
- Sadece kullandÄ±ÄŸÄ±nÄ±z font weight'leri yÃ¼kleyin
- `font-display: swap` kullanÄ±n (FOUT yerine FOIT)
- Font subsetting dÃ¼ÅŸÃ¼nÃ¼n (sadece kullanÄ±lan karakterler)
- Preload kullanÄ±n kritik fontlar iÃ§in

**Ã–rnek font-display kullanÄ±mÄ±:**
```css
@font-face {
  font-family: 'MyFont';
  src: url('./fonts/myfont.woff2') format('woff2');
  font-display: swap; /* FOIT yerine FOUT */
  font-weight: 400;
  font-style: normal;
}
```

**Self-Hosted Font Lisans KontrolÃ¼:**
- Font lisansÄ±nÄ± kontrol edin (SIL Open Font License, Apache, vb.)
- Self-hosting'e izin verildiÄŸinden emin olun
- Lisans dosyasÄ±nÄ± projeye dahil edin
- Attribution requirements'Ä± karÅŸÄ±layÄ±n

**Ã–rnek Lisans DosyasÄ±:**
```
src/
  login/
    assets/
      fonts/
        geist/
          LICENSE.txt    # Font lisansÄ±
          main.css
          GeistVF.woff2
```

**Font Format Ã–ncelikleri:**
1. **WOFF2** - En iyi compression, modern tarayÄ±cÄ±lar
2. **WOFF** - Fallback, eski tarayÄ±cÄ±lar
3. **TTF/OTF** - Son Ã§are, Ã§ok eski tarayÄ±cÄ±lar

**Ã–rnek @font-face tanÄ±mÄ±:**
```css
@font-face {
  font-family: 'MyFont';
  src: url('./fonts/myfont.woff2') format('woff2'),
       url('./fonts/myfont.woff') format('woff'),
       url('./fonts/myfont.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
```

**JAR Dosya Boyutu Optimizasyonu:**
- Gereksiz font weight'leri Ã§Ä±karÄ±n
- Font subsetting yapÄ±n (pyftsubset, glyphhanger)
- Variable fonts kullanÄ±n (tek dosya, birÃ§ok weight)
- Compression'dan faydalanÄ±n

**Testing:**
- FarklÄ± tarayÄ±cÄ±larda test edin
- Network throttling ile test edin (slow 3G)
- Font yÃ¼klenene kadar UI'Ä±n nasÄ±l gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nÃ¼ kontrol edin
- Fallback fontlarÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun

**Ã–rnek Complete Setup:**
```css
/* src/login/main.css */

/* Self-hosted font */
@import url(./assets/fonts/geist/main.css);

/* Font stack with fallbacks */
body {
  font-family: 
    Geist,                    /* Primary font */
    -apple-system,            /* macOS/iOS system font */
    BlinkMacSystemFont,       /* macOS Chrome */
    "Segoe UI",               /* Windows */
    Roboto,                   /* Android */
    "Helvetica Neue",         /* Fallback */
    Arial,                    /* Universal fallback */
    sans-serif;               /* Generic fallback */
  
  /* Improve font rendering */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Specific weights for headings */
h1, h2, h3 {
  font-weight: 600;
}

/* Specific font for monospace */
code, pre {
  font-family: 
    "Geist Mono",
    "SF Mono",
    Monaco,
    "Cascadia Code",
    "Roboto Mono",
    Consolas,
    "Courier New",
    monospace;
}
```

---

## 11. USING TAILWIND CSS

### Tailwind ile Keycloakify KullanÄ±mÄ±

Bu rehber, Keycloakify login theme'inde Tailwind CSS'in temel kullanÄ±mÄ±nÄ± gÃ¶sterir.

**Ä°ki yaklaÅŸÄ±m gÃ¶sterilecek:**
1. **`@apply` directive** ile default stilleri Ã¶zelleÅŸtirme (component'leri deÄŸiÅŸtirmeden, kc classlarÄ±nÄ± hedefleyerek)
2. **Regular Tailwind** kullanÄ±mÄ± (eject edilmiÅŸ sayfalarda, component seviyesinde)

### BaÅŸlamadan Ã–nce

âš ï¸ **Ã–NEMLÄ°:** Bu Ã¶rneÄŸe baÅŸlamadan Ã¶nce [CSS Level Customization](#2-css-customization) rehberini okumanÄ±z **ÅŸiddetle Ã¶nerilir**. Bu rehber, default theme'den inherit edilen PatternFly stillerini kÄ±smen veya tamamen nasÄ±l devre dÄ±ÅŸÄ± bÄ±rakacaÄŸÄ±nÄ±zÄ± Ã¶ÄŸretir.

**PatternFly Nedir?**
[PatternFly](https://v5-archive.patternfly.org/), RedHat tarafÄ±ndan oluÅŸturulan utility-based bir CSS framework'Ã¼dÃ¼r (Bootstrap CSS'e benzer). Keycloak ekibi tÃ¼m UI'larÄ±nÄ± bu framework ile oluÅŸturur.

### Tailwind Setup

Tailwind'i Keycloakify projenize eklemek iÃ§in Ã¶nce Vite setup guide'Ä±nÄ± takip edin:
[Tailwind CSS - Vite + React Guide](https://tailwindcss.com/docs/guides/vite#react)

**Temel adÄ±mlar:**
```bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

### Demo Ã–rneÄŸi

Starter template'in hafif modifikasyonlu demo setup'Ä±:
[keycloakify-starter tailwind branch](https://github.com/keycloakify/keycloakify-starter/tree/tailwind)

### YapÄ±lan DeÄŸiÅŸiklikler

**1. @apply Directive ile Ã–zelleÅŸtirme:**

Standardized `kc` classlarÄ±nÄ± hedefleyerek, component'leri deÄŸiÅŸtirmeden Ã¶zelleÅŸtirme:

```css
/* src/login/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .kcButtonClass {
    @apply bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors;
  }
  
  .kcInputClass {
    @apply border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500;
  }
  
  .kcLabelClass {
    @apply block text-sm font-medium text-gray-700 mb-1;
  }
}
```

**2. Geist Font KullanÄ±mÄ±:**

**tailwind.config.js:**
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ['Geist', 'system-ui', 'sans-serif'],
        mono: ['Geist Mono', 'monospace'],
      },
    },
  },
  plugins: [],
}
```

**src/login/index.css:**
```css
@import url(./assets/fonts/geist/main.css);

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply font-sans;
  }
}
```

**3. Ejected Page'de Tailwind KullanÄ±mÄ±:**

Login sayfasÄ±nÄ± eject edin:
```bash
npx keycloakify eject-page
# Select: login -> login.ftl
```

Sonra Tailwind classlarÄ±nÄ± doÄŸrudan kullanÄ±n:

```tsx
// src/login/pages/Login.tsx
export default function Login(props: PageProps<Extract<KcContext, { pageId: "login.ftl" }>>) {
    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;
    
    return (
        <Template {...{ kcContext, i18n, doUseDefaultCss, classes }}>
            <div className="max-w-md mx-auto">
                <h1 className="text-3xl font-bold text-center mb-8">
                    {i18n.msgStr("loginTitle")}
                </h1>
                
                <form className="space-y-6">
                    <div>
                        <label className="block text-sm font-medium text-gray-700">
                            Username
                        </label>
                        <input
                            type="text"
                            className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                        />
                    </div>
                    
                    <button 
                        type="submit"
                        className="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors"
                    >
                        {i18n.msgStr("doLogIn")}
                    </button>
                </form>
            </div>
        </Template>
    );
}
```

### DeÄŸiÅŸikliklerin Ã–zeti

TÃ¼m deÄŸiÅŸiklikler tek bir commit'te:
[GitHub Commit - Tailwind Integration](https://github.com/keycloakify/keycloakify-starter/commit/e6c71f13acbc65ccb8f57172c45e8c04a2151007)

**Ana deÄŸiÅŸiklikler:**
1. Tailwind CSS kurulumu ve konfigÃ¼rasyonu
2. `@apply` directive ile kc classlarÄ± Ã¶zelleÅŸtirme
3. Geist font entegrasyonu
4. login.ftl eject edip Tailwind classlarÄ± ekleme

### Tailwind KullanÄ±m Stratejileri

#### Strateji 1: @apply ile Sadece CSS DeÄŸiÅŸikliÄŸi

**Avantajlar:**
- Component'lere dokunmaya gerek yok
- Default page yapÄ±sÄ± korunur
- Minimal deÄŸiÅŸiklik
- Kolay maintenance

**KullanÄ±m:**
```css
@layer components {
  /* Buttons */
  .kcButtonClass {
    @apply px-4 py-2 rounded-md font-medium transition-all;
  }
  
  .kcButtonPrimaryClass {
    @apply bg-blue-600 text-white hover:bg-blue-700;
  }
  
  /* Inputs */
  .kcInputClass {
    @apply w-full px-3 py-2 border border-gray-300 rounded-md 
           focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
  }
  
  /* Form Groups */
  .kcFormGroupClass {
    @apply space-y-2 mb-4;
  }
  
  /* Labels */
  .kcLabelClass {
    @apply block text-sm font-medium text-gray-700;
  }
  
  /* Cards */
  .kcFormCardClass {
    @apply bg-white p-8 rounded-lg shadow-lg;
  }
  
  /* Alerts */
  .kcAlertClass {
    @apply p-4 rounded-md;
  }
  
  .kcAlertErrorClass {
    @apply bg-red-50 text-red-800 border border-red-200;
  }
  
  .kcAlertSuccessClass {
    @apply bg-green-50 text-green-800 border border-green-200;
  }
}
```

#### Strateji 2: Component Seviyesinde Tailwind

**Avantajlar:**
- Tam kontrol
- Modern component yapÄ±sÄ±
- Tailwind'in tÃ¼m gÃ¼cÃ¼nden faydalanma
- Responsive design kolaylÄ±ÄŸÄ±

**KullanÄ±m:**
```tsx
// src/login/pages/Login.tsx
<div className="min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
  <div className="max-w-md w-full space-y-8">
    <div>
      <h2 className="mt-6 text-center text-3xl font-extrabold text-gray-900">
        Sign in to your account
      </h2>
    </div>
    
    <form className="mt-8 space-y-6">
      <div className="rounded-md shadow-sm -space-y-px">
        <div>
          <input
            type="text"
            className="appearance-none rounded-none relative block w-full px-3 py-2 border 
                       border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md 
                       focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 
                       focus:z-10 sm:text-sm"
            placeholder="Username"
          />
        </div>
        <div>
          <input
            type="password"
            className="appearance-none rounded-none relative block w-full px-3 py-2 border 
                       border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md 
                       focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 
                       focus:z-10 sm:text-sm"
            placeholder="Password"
          />
        </div>
      </div>

      <button
        type="submit"
        className="group relative w-full flex justify-center py-2 px-4 border border-transparent 
                   text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 
                   focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
      >
        Sign in
      </button>
    </form>
  </div>
</div>
```

### Tailwind + Dark Mode

Tailwind'in dark mode desteÄŸinden faydalanÄ±n:

**tailwind.config.js:**
```javascript
export default {
  darkMode: 'class',
  // ...
}
```

**KullanÄ±m:**
```tsx
<div className="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100">
  <input className="bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600" />
  <button className="bg-blue-600 dark:bg-blue-500 hover:bg-blue-700 dark:hover:bg-blue-600">
    Login
  </button>
</div>
```

### Best Practices

**1. Content Configuration:**
```javascript
// tailwind.config.js
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
    // Ejected pages'i dahil et
    "./src/login/pages/**/*.{js,ts,jsx,tsx}",
  ],
  // ...
}
```

**2. Custom Utilities:**
```css
@layer utilities {
  .input-focus {
    @apply focus:ring-2 focus:ring-blue-500 focus:border-transparent;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-md p-6;
  }
}
```

**3. Component Extraction:**
```css
@layer components {
  .btn {
    @apply px-4 py-2 rounded font-medium transition-colors;
  }
  
  .btn-primary {
    @apply btn bg-blue-600 text-white hover:bg-blue-700;
  }
  
  .btn-secondary {
    @apply btn bg-gray-200 text-gray-800 hover:bg-gray-300;
  }
}
```

### Tailwind + Keycloakify Ã–zeti

**Temel YaklaÅŸÄ±mlar:**
1. **@apply ile CSS customization**: Component'lere dokunmadan stil deÄŸiÅŸikliÄŸi
2. **Component seviyesi**: Tam kontrol, eject edilmiÅŸ sayfalarda

**Avantajlar:**
- HÄ±zlÄ± styling
- Utility-first yaklaÅŸÄ±m
- Responsive design built-in
- Dark mode desteÄŸi
- KÃ¼Ã§Ã¼k bundle size (PurgeCSS ile)

**Dikkat Edilmesi Gerekenler:**
- PatternFly stillerini devre dÄ±ÅŸÄ± bÄ±rakmayÄ± unutmayÄ±n
- Content path'lerini doÄŸru ayarlayÄ±n
- Production build'de PurgeCSS Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin olun
- `@layer` directive'lerini doÄŸru kullanÄ±n
- Component extraction ile tekrarÄ± Ã¶nleyin

**Ã–nerilen Workflow:**
1. Tailwind'i kur ve yapÄ±landÄ±r
2. PatternFly stillerini devre dÄ±ÅŸÄ± bÄ±rak (`doUseDefaultCss={false}`)
3. `@apply` ile hÄ±zlÄ± customization yap
4. Derinlemesine Ã¶zelleÅŸtirme iÃ§in sayfalarÄ± eject et
5. Tailwind classlarÄ±nÄ± doÄŸrudan kullan
6. Dark mode ekle (opsiyonel)
7. Test et ve deploy et

---

## 12. DARK MODE PERSISTENCE (STATE TRANSFER)

### Dark/Light Mode Transfer

UygulamanÄ±z dark/light mode sunuyorsa, bu mode'u login theme'inize nasÄ±l "transfer" edeceÄŸinizi merak edebilirsiniz. Bu, kullanÄ±cÄ±lar uygulamanÄ±zÄ± dark mode'da gezinirken "Login" butonuna tÄ±kladÄ±klarÄ±nda, dark mode'da render edilmiÅŸ bir Keycloakify login UI'Ä±na yÃ¶nlendirilmelerini saÄŸlar.

**Video Tutorial:**
[Dark Mode Persistence Ã–rneÄŸi](https://youtu.be/EbNGhg5aNF8)

Bu biraz niÅŸ bir kullanÄ±m senaryosudur, ancak uygulamanÄ±zdan Keycloak UI'larÄ±nÄ±za state'i nasÄ±l geÃ§ireceÄŸinizi gÃ¶sterir.

### Web UygulamanÄ±zda

Tipik olarak, kullanÄ±cÄ±nÄ±z header'daki "Login" butonuna tÄ±kladÄ±ÄŸÄ±nda, uygulamanÄ±z onlarÄ± ÅŸuna benzer bir URL'ye yÃ¶nlendirir:

```
https://<your-keycloak-url>/realms/protocol/openid-connect/auth?client_id=<your-client>
```

**Yapmak istediÄŸimiz:** Bu URL'ye `&dark=true` veya `&dark=false` eklemek, bÃ¶ylece diÄŸer tarafta Keycloak temanÄ±z tarafÄ±ndan alÄ±nabilir.

### Ã–rnek: React SPA + oidc-spa + MUI

AÅŸaÄŸÄ±daki snippet, Login ve Register butonlarÄ±nÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in tipik olarak uygulamanÄ±zÄ±n header'Ä±nda yerleÅŸtirilen bir React component'idir.

**Stack:**
- React SPA
- [oidc-spa](https://www.oidc-spa.dev/) - `keycloak-js`'in modern alternatifi
- [MUI](https://mui.com/material-ui/) - PopÃ¼ler React component library

```tsx
// src/components/AuthButtons.tsx
import { useOidc } from "oidc";
import { useTheme } from "@mui/material/styles";
import Button from "@mui/material/Button";
import { assert } from "tsafe/assert";

export function AuthButtons() {
  const { isUserLoggedIn, login } = useOidc();

  assert(
    !isUserLoggedIn,
    "If this component is rendered, the user should not be logged in"
  );

  const theme = useTheme();

  const extraQueryParams = {
    dark: theme.palette.mode === "dark" ? "true" : "false",
    // ui_locales, Keycloak'un tanÄ±dÄ±ÄŸÄ± Ã¶zel bir query param.
    // Login sayfalarÄ±nÄ±n doÄŸru dilde gÃ¶rÃ¼ntÃ¼lenmesini saÄŸlar.
    ui_locales: "en"
  };

  return (
    <>
      <Button
        onClick={() =>
          login({
            doesCurrentHrefRequiresAuth: false,
            extraQueryParams
          })
        }
      >
        Login
      </Button>
      <Button
        variant="contained"
        onClick={() =>
          login({
            doesCurrentHrefRequiresAuth: false,
            transformUrlBeforeRedirect: url => {
              const urlObj = new URL(url);
              urlObj.pathname = urlObj.pathname.replace(
                /\/auth$/,
                "/registrations"
              );
              return urlObj.href;
            },
            extraQueryParams
          })
        }
      >
        Register
      </Button>
    </>
  );
}
```

**Ne yapÄ±yor:**
1. MUI theme'inden mevcut mode'u alÄ±yor (`dark` veya `light`)
2. `extraQueryParams` ile `&dark=true` veya `&dark=false` ekliyor
3. Login ve Register butonlarÄ± tÄ±klandÄ±ÄŸÄ±nda bu parametreyi Keycloak'a gÃ¶nderiyor

### Login Theme'inizde

Keycloak temanÄ±zda, Ã¶zel `&dark=true|false` parametresini okumak iÃ§in bir utility oluÅŸturabilirsiniz.

```typescript
// src/shared/isDark.ts
const SESSION_STORAGE_KEY = "isDark";

function getIsDark(): boolean {
    from_url: {
        const url = new URL(window.location.href);

        const value = url.searchParams.get("dark");

        if (value === null) {
            // URL'de &dark= query param yok,
            // bu yÃ¼zden session storage'Ä± kontrol ediyoruz.
            break from_url;
        }

        // &dark= parametresini URL'den kaldÄ±r (temiz tutmak iÃ§in)
        url.searchParams.delete("dark");
        window.history.replaceState({}, "", url.toString());

        const isDark = value === "true";
        
        // DeÄŸeri session storage'da persist et, bÃ¶ylece
        // kullanÄ±cÄ± Ã¶rneÄŸin login.ftl'den register.ftl'ye 
        // navigate ettiÄŸinde state'i kaybetmeyiz.
        sessionStorage.setItem(SESSION_STORAGE_KEY, `${isDark}`);

        return isDark;
    }

    from_session_storage: {
        const value = sessionStorage.getItem(SESSION_STORAGE_KEY);

        if (value === null) {
            break from_session_storage;
        }

        return value === "true";
    }

    // Browser preference'Ä±nÄ± dÃ¶ndÃ¼r
    return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
}

export { getIsDark };
```

**Utility'nin mantÄ±ÄŸÄ±:**
1. **Ã–nce URL'yi kontrol et:** `&dark=` parametresi var mÄ±?
2. **Varsa:** DeÄŸeri al, URL'den kaldÄ±r, session storage'a kaydet
3. **Yoksa:** Session storage'Ä± kontrol et
4. **O da yoksa:** Browser'Ä±n `prefers-color-scheme` tercihini kullan

### React/MUI ile KullanÄ±m

Bu utility'yi nasÄ±l kullanacaÄŸÄ±nÄ±z framework ve UI library'nize baÄŸlÄ±. Ä°ÅŸte React/MUI Ã¶rneÄŸi:

```tsx
// src/login/KcPage.tsx
import type { KcContext } from "./KcContext";
import { useI18n } from "./i18n";
import DefaultPage from "keycloakify/login/DefaultPage";
import Template from "keycloakify/login/Template";
import { createTheme, ThemeProvider } from "@mui/material/styles";
import { getIsDark } from "../shared/isDark";

const UserProfileFormFields = lazy(() => import("keycloakify/login/UserProfileFormFields"));

const doMakeUserConfirmPassword = true;

const theme_dark = createTheme({
    palette: {
        mode: "dark"
    }
});

const theme_light = createTheme({
    palette: {
        mode: "light"
    }
});

export default function KcPage(props: { kcContext: KcContext }) {
    return (
        <ThemeProvider theme={getIsDark() ? theme_dark : theme_light}>
            <KcPageContextualized {...props} />
        </ThemeProvider>
    );
}

function KcPageContextualized(props: { kcContext: KcContext }) {
    const { kcContext } = props;
    const { i18n } = useI18n({ kcContext });

    return (
        <Suspense>
            {(() => {
                switch (kcContext.pageId) {
                    default:
                        return (
                            <DefaultPage
                                kcContext={kcContext}
                                i18n={i18n}
                                classes={classes}
                                Template={Template}
                                doUseDefaultCss={true}
                                UserProfileFormFields={UserProfileFormFields}
                                doMakeUserConfirmPassword={doMakeUserConfirmPassword}
                            />
                        );
                }
            })()}
        </Suspense>
    );
}
```

### Tailwind ile Dark Mode Persistence

Tailwind kullanÄ±yorsanÄ±z:

```tsx
// src/login/KcPage.tsx
import { getIsDark } from "../shared/isDark";
import { useEffect } from "react";

export default function KcPage(props: { kcContext: KcContext }) {
    useEffect(() => {
        // Dark mode'a gÃ¶re document'e class ekle/Ã§Ä±kar
        if (getIsDark()) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    }, []);

    return (
        <div className="min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100">
            {/* Your theme components */}
        </div>
    );
}
```

### DiÄŸer Authentication Library'ler

**keycloak-js ile:**
```typescript
import Keycloak from 'keycloak-js';

const keycloak = new Keycloak({
  url: 'https://your-keycloak-url',
  realm: 'your-realm',
  clientId: 'your-client'
});

// Login
keycloak.login({
  redirectUri: window.location.href,
  loginHint: '',
  // Dark mode parametresini ekle
  cordovaOptions: {
    dark: isDarkMode ? 'true' : 'false'
  }
});
```

**react-oidc-context ile:**
```tsx
import { useAuth } from "react-oidc-context";
import { useTheme } from "your-theme-context";

export function LoginButton() {
  const auth = useAuth();
  const { isDarkMode } = useTheme();

  const handleLogin = () => {
    auth.signinRedirect({
      extraQueryParams: {
        dark: isDarkMode ? 'true' : 'false',
        ui_locales: 'en'
      }
    });
  };

  return <button onClick={handleLogin}>Login</button>;
}
```

### Dark Mode Persistence Ã–zeti

**Temel Workflow:**
1. **Web uygulamasÄ±nda:** Dark mode durumunu `extraQueryParams` ile URL'ye ekle
2. **Login theme'de:** URL'den parametreyi oku
3. **Session storage:** State'i persist et (navigation sÄ±rasÄ±nda kaybolmasÄ±n)
4. **Fallback:** Browser preference'Ä±nÄ± kullan

**Avantajlar:**
- Seamless user experience
- Mode consistency between app and auth pages
- User preference korunur
- Browser native preference desteÄŸi

**KullanÄ±m SenaryolarÄ±:**
- SPA ile Keycloak entegrasyonu
- Consistent branding ve UX
- User preference persistence
- Accessibility gereksinimleri

**Best Practices:**
1. Session storage kullanÄ±n (localStorage deÄŸil - security)
2. URL'den parametreyi temizleyin (clean URL)
3. Browser preference'Ä±nÄ± fallback olarak kullanÄ±n
4. `prefers-color-scheme` media query'sini destekleyin
5. Theme deÄŸiÅŸikliklerini smooth transition ile yapÄ±n

**GeniÅŸletme Fikirleri:**
```typescript
// Daha fazla state transfer edebilirsiniz
const extraQueryParams = {
  dark: theme.palette.mode === "dark" ? "true" : "false",
  ui_locales: currentLanguage, // Dil
  brand: "primary", // Brand variant
  layout: "compact", // Layout preference
  // vb...
};
```

**Ã–rnek: Dil Persistence:**
```typescript
// src/shared/getLocale.ts
function getLocale(): string {
    const url = new URL(window.location.href);
    const locale = url.searchParams.get("ui_locales");
    
    if (locale) {
        url.searchParams.delete("ui_locales");
        window.history.replaceState({}, "", url.toString());
        sessionStorage.setItem("locale", locale);
        return locale;
    }
    
    const stored = sessionStorage.getItem("locale");
    if (stored) return stored;
    
    // Browser language
    return navigator.language.split('-')[0];
}
```

Bu yaklaÅŸÄ±mla, web uygulamanÄ±z ve Keycloak UI'larÄ± arasÄ±nda seamless bir deneyim oluÅŸturabilirsiniz!

---

## 13. i18n (INTERNATIONALIZATION) - BASIC PRINCIPLES

### Ã‡ok Dilli Destek Temelleri

ğŸ’¡ **Not:** Bu dokÃ¼mantasyon Login theme'de i18n'in nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± aÃ§Ä±klar.

**Account Multi-Page theme'de:** Her ÅŸey Login theme ile aynÄ± Ã§alÄ±ÅŸÄ±r, sadece import path'lerinde **/login/** yerine **/account/** kullanÄ±n.

**Account Single-Page theme'de:** FarklÄ± Ã§alÄ±ÅŸÄ±r (ayrÄ± dokÃ¼mantasyona bakÄ±n).

### Keycloak Admin Console'da Dil AyarlarÄ±

Keycloak Admin Console'da desteklemek istediÄŸiniz dilleri seÃ§erek yerelleÅŸtirmeyi etkinleÅŸtirebilirsiniz:

**Realm Settings â†’ Themes â†’ Internationalization:**
- Internationalization: **Enabled**
- Supported Locales: Ä°ngilizce, FransÄ±zca, Ä°spanyolca, vb. seÃ§in

Ã–rnek: Ä°ngilizce, FransÄ±zca ve Ä°spanyolca'yÄ± destekleyen bir Keycloak Realm.

ğŸ’¡ **Ek Dil Eklemek Ä°ster misiniz?**
VarsayÄ±lan set'te olmayan dilleri Keycloakify'a nasÄ±l ekleyeceÄŸinizi Ã¶ÄŸrenmek iÃ§in ilgili dokÃ¼mantasyona bakÄ±n.

### Dil Dropdown Select

Internationalization etkinleÅŸtirildiÄŸinde, UI'larÄ±nÄ±zda bir dil dropdown select gÃ¶receksiniz.

âš ï¸ **Ã–NEMLÄ° TAVSÄ°YE:**

**Dil seÃ§im dropdown'una gÃ¼venmemelisiniz.** Hatta onu gizlemenizi veya kaldÄ±rmanÄ±zÄ± tavsiye ederim.

**Bunun yerine yapmanÄ±z gereken:** KullanÄ±cÄ±nÄ±zÄ± uygulamanÄ±zdan Keycloak login sayfasÄ±na yÃ¶nlendirirken, sayfanÄ±n hangi dilde render edileceÄŸini Keycloak'a bildirmek iÃ§in ekstra bir query param ekleyin.

**Eklenecek parametre:** `?ui_locales=fr` (UI'Ä±n FransÄ±zca olmasÄ±nÄ± istiyorsak)

**Ã–rnek:** oidc-spa dokÃ¼mantasyonunda bu parametreyi nasÄ±l saÄŸlayacaÄŸÄ±nÄ±z anlatÄ±lÄ±yor (keycloak-js veya NextAuth ile de aynÄ±sÄ±nÄ± yapabilirsiniz).

```tsx
// Ã–rnek: oidc-spa ile
login({
  extraQueryParams: {
    ui_locales: 'fr'  // FransÄ±zca
  }
});
```

### Component'lerde i18n KullanÄ±mÄ±

BazÄ± sayfalarÄ± eject ederseniz, component'inizde internationalization'Ä±n nasÄ±l implement edildiÄŸini gÃ¶receksiniz:

**React iÃ§in:**
```tsx
// src/login/pages/Register.tsx
export default function Register(props: RegisterProps) {
    const { i18n } = props;
    
    const { msg, msgStr, advancedMsg, advancedMsgStr } = i18n;

    return (
        //...
        <a href={url.loginUrl}>
            {msg("backToLogin")}
        </a>
        // ...
    );
}
```

**Svelte iÃ§in:**
```html
<!-- src/login/pages/Register.svelte -->
<script lang="ts">
  const props: RegisterProps = $props();
  const { i18n } = props;
  const { msg, msgStr, advancedMsg } = $i18n;
</script>

<a href={url.loginUrl}>{@render msg('backToLogin')()}</a>
```

**Angular iÃ§in:**
```html
<!-- src/login/pages/register/register.component.html -->
<a
  [href]="url.loginUrl"
  [innerHTML]="i18n.msgStr('backToLogin') | kcSanitize: 'html'"
></a>
```

**SonuÃ§:** `msg("backToLogin")` **Â« Back to Login** olarak render edilir.

### Default Message Translations

Temel message Ã§evirilerini gÃ¶rmek iÃ§in **node_modules/keycloakify/src/login/i18n/messages_defaultSet/** dizinine gidebilirsiniz:

âš ï¸ **UYARI:** Bu dosyalarÄ± doÄŸrudan dÃ¼zenlemeyin, sadece varsayÄ±lan i18n mesajlarÄ±nÄ±n ne olduÄŸunu gÃ¶rmek iÃ§indir.

**Dizin yapÄ±sÄ±:**
```
messages_defaultSet/
  en.ts     # Ä°ngilizce
  fr.ts     # FransÄ±zca
  es.ts     # Ä°spanyolca
  de.ts     # Almanca
  ...
```

**Ã–rnek: en.ts'de backToLogin:**
```typescript
backToLogin: "We are <strong>sorry</strong> ..."
```

### msg() ve msgStr() FarkÄ±

**React iÃ§in:**

`msg("backToLogin")` Ã§aÄŸrÄ±sÄ± ÅŸunu dÃ¶ndÃ¼rÃ¼r (JSX.Element):
```html
<span data-kc-msg="backToLogin">We are <strong>sorry</strong> ...</span>
```

String'e ihtiyacÄ±nÄ±z varsa `msgStr("backToLogin")` kullanÄ±n:
```typescript
const text = msgStr("backToLogin");  // "We are <strong>sorry</strong> ..."
```

**Svelte iÃ§in:**

`{@render msg("backToLogin")}` Ã§aÄŸrÄ±sÄ±:
```html
<span data-kc-msg="backToLogin">We are <strong>sorry</strong> ...</span>
```

**Angular iÃ§in:**

`i18n.msgStr('errorTitleHtml')` string dÃ¶ndÃ¼rÃ¼r ve `[innerHTML]` ile sanitize ederek kullanmanÄ±z gerekir:
```html
<p [innerHTML]="i18n.msgStr('errorTitleHtml') | kcSanitize: 'html'"></p>
```

DOM'da ÅŸu ÅŸekilde render edilir:
```html
<p>
  <span data-kc-msg="backToLogin">We are <strong>sorry</strong> ...</span>
</p>
```

### data-kc-msg Attribute

`data-kc-msg` attribute'unun amacÄ±, DOM'u inspect ederken deÄŸiÅŸtirmek istediÄŸiniz metnin i18n key'ini belirlemenize yardÄ±mcÄ± olmaktÄ±r.

**Ã–rnek:**
Browser DevTools'da inspect ettiÄŸinizde:
```html
<span data-kc-msg="backToLogin">Â« Back to Login</span>
```

Bu, "Back to Login..." metnini deÄŸiÅŸtirmek istiyorsanÄ±z `"backToLogin"` key'ini deÄŸiÅŸtirmeniz gerektiÄŸini gÃ¶sterir.

### i18n API Ã–zeti

**KullanÄ±labilir Fonksiyonlar:**

**1. msg(key: string, ...args)**
- HTML iÃ§eriÄŸi dÃ¶ndÃ¼rÃ¼r (JSX.Element veya render edilebilir snippet)
- HTML tag'leri korunur (`<strong>`, `<em>`, vb.)
- React'te JSX.Element, Svelte'te renderable, Angular'da string

**2. msgStr(key: string, ...args)**
- Plain string dÃ¶ndÃ¼rÃ¼r
- HTML tag'leri korunur (escape edilmez)
- Attribute deÄŸerleri, title, placeholder iÃ§in kullanÄ±ÅŸlÄ±

**3. advancedMsg(key: string)**
- Kompleks interpolasyon iÃ§in
- Template deÄŸiÅŸkenleri ile

**4. advancedMsgStr(key: string)**
- advancedMsg'nin string versiyonu

### i18n Best Practices

**1. Dil seÃ§imi:**
```tsx
// âŒ YanlÄ±ÅŸ: Dropdown'a gÃ¼venme
<LanguageDropdown />

// âœ… DoÄŸru: ui_locales parametresi ile yÃ¶nlendir
login({
  extraQueryParams: {
    ui_locales: currentLanguage  // 'en', 'fr', 'tr', vb.
  }
});
```

**2. HTML iÃ§erikli mesajlar:**
```tsx
// React
<p>{msg("errorMessage")}</p>  // HTML korunur

// Svelte  
<p>{@render msg("errorMessage")}</p>

// Angular
<p [innerHTML]="i18n.msgStr('errorMessage') | kcSanitize: 'html'"></p>
```

**3. Plain string gerektiÄŸinde:**
```tsx
// React
<input placeholder={msgStr("username")} />

// Svelte
<input placeholder={msgStr("username")} />

// Angular
<input [placeholder]="i18n.msgStr('username')" />
```

**4. DOM'da key bulma:**
- Browser DevTools ile inspect et
- `data-kc-msg` attribute'una bak
- Ä°lgili key'i custom translations'ta override et

### Ã–rnek: Custom Translation

VarsayÄ±lan Ã§eviriyi deÄŸiÅŸtirmek iÃ§in:

```typescript
// src/login/i18n.ts
import { createUseI18n } from "keycloakify/login";

export const { useI18n } = createUseI18n({
  en: {
    backToLogin: "â† Return to Login",  // DeÄŸiÅŸtirdik
    // DiÄŸer custom translations...
  },
  fr: {
    backToLogin: "â† Retour Ã  la connexion",
    // ...
  },
  tr: {
    backToLogin: "â† GiriÅŸ SayfasÄ±na DÃ¶n",
    // ...
  }
});
```

### YaygÄ±n i18n Keys

**Login sayfasÄ±:**
- `doLogIn`: "Sign in" butonu
- `username`: "Username or email"
- `password`: "Password"
- `backToLogin`: "Back to Login"

**Register sayfasÄ±:**
- `doRegister`: "Register" butonu
- `firstName`: "First name"
- `lastName`: "Last name"
- `email`: "Email"

**Error mesajlarÄ±:**
- `invalidPasswordMinLengthMessage`: Åifre minimum uzunluk hatasÄ±
- `invalidEmailMessage`: GeÃ§ersiz email hatasÄ±
- `usernameExistsMessage`: KullanÄ±cÄ± adÄ± mevcut hatasÄ±

### i18n Debugging

**1. Hangi key'i kullanmalÄ±yÄ±m?**
- Storybook'ta veya Keycloak'ta sayfayÄ± aÃ§
- DevTools ile inspect et
- `data-kc-msg` attribute'una bak

**2. Ã‡evirim uygulanmÄ±yor:**
- Key adÄ±nÄ± doÄŸrula
- i18n.ts'de doÄŸru dil object'inde olduÄŸundan emin ol
- Browser cache'i temizle

**3. HTML render edilmiyor:**
- `msg()` yerine `msgStr()` kullanÄ±yor olabilirsiniz
- Angular'da `kcSanitize` pipe'Ä±nÄ± unutmayÄ±n

### SÄ±radaki AdÄ±m

ArtÄ±k temel prensipleri anladÄ±nÄ±z, sayfalarÄ±nÄ±zÄ± farklÄ± dillerde nasÄ±l Ã¶nizleyeceÄŸinizi Ã¶ÄŸrenin!

---

## 14. i18n - PREVIEWING PAGES IN DIFFERENT LANGUAGES

### FarklÄ± Dillerde Sayfa Ã–nizleme

ğŸ’¡ **Not:** Bu bÃ¶lÃ¼m, [Testing your Theme Outside of Keycloak](#3-testing-your-theme---outside-of-keycloak-storybook) bÃ¶lÃ¼mÃ¼nÃ¼ okuduÄŸunuzu varsayar.

Componentlerinizi farklÄ± dillerde Ã¶nizlemek iÃ§in, her dil iÃ§in ayrÄ± story'ler oluÅŸturun.

### Storybook ile Dil Ã–nizleme

Her dil iÃ§in ayrÄ± story oluÅŸturarak sayfalarÄ±nÄ±zÄ± farklÄ± dillerde test edebilirsiniz.

**Ã–rnek:**

```tsx
// src/login/pages/Login.stories.tsx
import type { Meta, StoryObj } from "@storybook/react";
import { createKcPageStory } from "../KcPageStory";

const { KcPageStory } = createKcPageStory({ pageId: "login.ftl" });

const meta = {
    title: "login/login.ftl",
    component: KcPageStory
} satisfies Meta<typeof KcPageStory>;

export default meta;

type Story = StoryObj<typeof meta>;

// Default (Ä°ngilizce)
export const Default: Story = {
    render: () => <KcPageStory />
};

// FransÄ±zca
export const French: Story = {
    render: ()=> (
        <KcPageStory
            kcContext={{
                locale: {
                    currentLanguageTag: "fr"
                }
            }}
        />
    )
};

// Ä°spanyolca
export const Spanish: Story = {
    render: ()=> (
        <KcPageStory
            kcContext={{
                locale: {
                    currentLanguageTag: "es"
                }
            }}
        />
    )
};

// TÃ¼rkÃ§e
export const Turkish: Story = {
    render: ()=> (
        <KcPageStory
            kcContext={{
                locale: {
                    currentLanguageTag: "tr"
                }
            }}
        />
    )
};

// DiÄŸer story'ler...
```

**SonuÃ§:** Storybook'ta artÄ±k "French", "Spanish", "Turkish" gibi story'ler gÃ¶receksiniz ve her biri sayfayÄ± o dilde render edecek.

### Storybook Kullanmayanlar iÃ§in Dev Mode Preview

EÄŸer Storybook kullanmÄ±yorsanÄ±z, dev mode'da belirli bir dilde Ã¶nizleme yapabilirsiniz:

```tsx
// src/main.tsx
/* eslint-disable react-refresh/only-export-components */
import { createRoot } from "react-dom/client";
import { StrictMode } from "react";
import { KcPage } from "./kc.gen";

// AÅŸaÄŸÄ±daki blok `npm run dev` ile belirli bir sayfayÄ± test etmek iÃ§in uncomment edilebilir
// Geri comment yapmayÄ± unutmayÄ±n yoksa bundle size artar
import { getKcContextMock } from "./login/KcPageStory";

if (import.meta.env.DEV) {
    window.kcContext = getKcContextMock({
        pageId: "register.ftl",
        overrides: {
            locale: {
                currentLanguageTag: "es"  // Ä°spanyolca'da Ã¶nizle
            }
        }
    });
}

createRoot(document.getElementById("root")!).render(
    <StrictMode>
        {!window.kcContext ? (
            <h1>No Keycloak Context</h1>
        ) : (
            <KcPage kcContext={window.kcContext} />
        )}
    </StrictMode>
);
```

**AdÄ±mlar:**
1. `src/main.tsx`'te `getKcContextMock` import'unu uncomment et
2. `currentLanguageTag` deÄŸerini deÄŸiÅŸtir (`"es"`, `"fr"`, `"tr"`, vb.)
3. `npm run dev` ile dev server'Ä± baÅŸlat
4. SayfayÄ± seÃ§tiÄŸiniz dilde gÃ¶rÃ¼ntÃ¼le

âš ï¸ **UYARI:** Test bittiÄŸinde bu kodu geri comment yapmayÄ± unutmayÄ±n, aksi takdirde bundle size artar!

### TÃ¼m Story'ler iÃ§in Default Dil Ayarlama

TÃ¼m story'lerinizin varsayÄ±lan olarak baÅŸka bir dilde olmasÄ±nÄ± istiyorsanÄ±z:

```tsx
// src/login/KcPageStory.tsx
export const { getKcContextMock } = createGetKcContextMock({
  kcContextExtension,
  kcContextExtensionPerPage,
  overrides: {
    locale: {
      currentLanguageTag: "de",  // Almanca varsayÄ±lan
    },
  },
  overridesPerPage: {},
});
```

Bu sayede tÃ¼m story'ler belirtilen dilde aÃ§Ä±lÄ±r. Ä°stediÄŸiniz story'de override edebilirsiniz.

### Angular iÃ§in Story Ã–rneÄŸi

Angular kullanÄ±yorsanÄ±z:

```typescript
// src/login/pages/login/login.stories.ts
import { Meta, StoryObj } from '@storybook/angular';
import { decorators, KcPageStory } from '../KcPageStory';

const meta: Meta<KcPageStory> = {
    title: 'login/login.ftl',
    component: KcPageStory,
    decorators: decorators,
    globals: {
        pageId: 'login.ftl'
    }
};

export default meta;

type Story = StoryObj<KcPageStory>;

export const Default: Story = {};

export const French: Story = {
    globals: {
        kcContext: {
            locale: {
                currentLanguageTag: "fr"
            }
        }
    }
};

export const Spanish: Story = {
    globals: {
        kcContext: {
            locale: {
                currentLanguageTag: "es"
            }
        }
    }
};
```

### Svelte iÃ§in Story Ã–rneÄŸi

Svelte kullanÄ±yorsanÄ±z:

```html
<!-- src/login/pages/Login.stories.svelte -->
<script context="module" lang="ts">
  import { defineMeta } from '@storybook/addon-svelte-csf';
  import type { KcPageStoryProps } from '../KcPageStory';
  import KcPageStory from '../KcPageStory.svelte';

  const args: KcPageStoryProps = { pageId: 'login.ftl' };
  const { Story } = defineMeta({
    title: 'login/login.ftl',
    component: KcPageStory,
    args: args,
  });
</script>

<!-- Default story -->
<Story name="Default" />

<!-- FransÄ±zca -->
<Story
  name="French"
  args={{
    ...args,
    kcContext: {
      locale: {
        currentLanguageTag: "fr"
      }
    }
  }}
/>

<!-- Ä°spanyolca -->
<Story
  name="Spanish"
  args={{
    ...args,
    kcContext: {
      locale: {
        currentLanguageTag: "es"
      }
    }
  }}
/>

<!-- TÃ¼rkÃ§e -->
<Story
  name="Turkish"
  args={{
    ...args,
    kcContext: {
      locale: {
        currentLanguageTag: "tr"
      }
    }
  }}
/>
```

### Dil KodlarÄ± (Language Tags)

**YaygÄ±n dil kodlarÄ±:**
- `"en"` - English (Ä°ngilizce)
- `"fr"` - FranÃ§ais (FransÄ±zca)
- `"es"` - EspaÃ±ol (Ä°spanyolca)
- `"de"` - Deutsch (Almanca)
- `"it"` - Italiano (Ä°talyanca)
- `"pt"` - PortuguÃªs (Portekizce)
- `"tr"` - TÃ¼rkÃ§e
- `"ar"` - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (ArapÃ§a)
- `"zh-CN"` - ç®€ä½“ä¸­æ–‡ (BasitleÅŸtirilmiÅŸ Ã‡ince)
- `"ja"` - æ—¥æœ¬èª (Japonca)
- `"ko"` - í•œêµ­ì–´ (Korece)
- `"ru"` - Ğ ÑƒÑÑĞºĞ¸Ğ¹ (RusÃ§a)
- `"nl"` - Nederlands (FelemenkÃ§e)
- `"pl"` - Polski (LehÃ§e)
- `"sv"` - Svenska (Ä°sveÃ§Ã§e)

TÃ¼m desteklenen diller iÃ§in `node_modules/keycloakify/src/login/i18n/messages_defaultSet/` dizinine bakÄ±n.

### Best Practices

**1. Sistematik story isimlendirme:**
```tsx
export const Default: Story = { /* ... */ };
export const French: Story = { /* ... */ };
export const Spanish: Story = { /* ... */ };
export const German: Story = { /* ... */ };
```

**2. Story gruplandÄ±rma:**
Storybook'ta daha iyi organizasyon iÃ§in:
```tsx
const meta = {
    title: "login/login.ftl/Languages",  // Alt grup
    component: KcPageStory
} satisfies Meta<typeof KcPageStory>;
```

**3. Story template kullanÄ±mÄ±:**
```tsx
const Template: Story = {
    render: (args) => <KcPageStory {...args} />
};

export const French: Story = {
    ...Template,
    args: {
        kcContext: {
            locale: { currentLanguageTag: "fr" }
        }
    }
};

export const Spanish: Story = {
    ...Template,
    args: {
        kcContext: {
            locale: { currentLanguageTag: "es" }
        }
    }
};
```

**4. TÃ¼m Ã¶nemli dilleri test edin:**
- DesteklediÄŸiniz tÃ¼m diller iÃ§in story oluÅŸturun
- RTL (Right-to-Left) dilleri test edin (ArapÃ§a, Ä°branice)
- Uzun metinli dilleri test edin (Almanca)
- Karakter set'leri farklÄ± olan dilleri test edin (Ã‡ince, Japonca)

### Dil Testing Checklist

âœ… **UI Layout:**
- Metin taÅŸma kontrolÃ¼
- Button boyutlarÄ±
- Form field geniÅŸlikleri
- Responsive davranÄ±ÅŸ

âœ… **RTL Diller iÃ§in:**
- Layout direction doÄŸru mu?
- Icon'lar doÄŸru yÃ¶nde mi?
- Text alignment doÄŸru mu?

âœ… **Ã–zel Karakterler:**
- Accented characters doÄŸru gÃ¶rÃ¼nÃ¼yor mu? (Ã©, Ã±, Ã¼)
- CJK characters render ediliyor mu? (ä¸­æ–‡, æ—¥æœ¬èª, í•œêµ­ì–´)
- Emoji desteÄŸi var mÄ±?

âœ… **Ã‡eviri Kalitesi:**
- TÃ¼m key'ler Ã§evrilmiÅŸ mi?
- Placeholder metinler yok mu?
- Context'e uygun Ã§eviriler mi?

### SÄ±radaki AdÄ±m

ArtÄ±k sayfalarÄ±nÄ±zÄ± farklÄ± dillerde nasÄ±l Ã¶nizleyeceÄŸinizi biliyorsunuz. Åimdi varsayÄ±lan Ã§evirileri nasÄ±l deÄŸiÅŸtirebileceÄŸinizi veya yeni Ã§eviri mesajlarÄ± nasÄ±l ekleyeceÄŸinizi Ã¶ÄŸrenin!

---

## 15. i18n - ADDING NEW TRANSLATION MESSAGES OR CHANGING DEFAULT ONES

### Yeni Ã‡eviri MesajlarÄ± Ekleme veya VarsayÄ±lanlarÄ± DeÄŸiÅŸtirme

Bu bÃ¶lÃ¼mde, varsayÄ±lan Ã§eviri mesajlarÄ±nÄ± nasÄ±l override edeceÄŸinizi ve kendi custom translation'larÄ±nÄ±zÄ± nasÄ±l ekleyeceÄŸinizi gÃ¶receÄŸiz.

### Theme Level'da Custom Translations

#### 1. Message Key'ini Bulma

VarsayÄ±lan olarak, login sayfasÄ± "Sign in to your account" gÃ¶sterir. Bunu deÄŸiÅŸtirmek istediÄŸimizi varsayalÄ±m.

**Ä°lk adÄ±m:** Message key'ini belirleyin. Bunu genellikle sayfanÄ±n HTML'ini inspect ederek bulabilirsiniz.

**Ã–rnek:**
```html
<h1 data-kc-msg="loginAccountTitle">Sign in to your account</h1>
```

Burada **"Sign in to your account"** metninin message key'inin **`loginAccountTitle`** olduÄŸunu gÃ¶rÃ¼yoruz.

#### 2. Translation'Ä± Override Etme

Ä°ngilizce ve FransÄ±zca Ã§evirileri deÄŸiÅŸtirelim:

```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login"; // veya "keycloakify/account"
import type { ThemeName } from "../kc.gen";

/** @see: https://docs.keycloakify.dev/i18n */
const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withExtraLanguages({ /* ... */ })
    .withCustomTranslations({
        // âš ï¸ UYARI: Ã‡evirileri external dosyalardan import edemezsiniz
        en: {
            loginAccountTitle: "Log in to your ACME account"
        },
        // cspell: disable
        fr: {
            loginAccountTitle: "Connectez-vous a votre compte ACME"
        },
        tr: {
            loginAccountTitle: "ACME hesabÄ±nÄ±za giriÅŸ yapÄ±n"
        }
        // cspell: enable
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

**SonuÃ§:**
- Ä°ngilizce: "Log in to your ACME account"
- FransÄ±zca: "Connectez-vous a votre compte ACME"
- TÃ¼rkÃ§e: "ACME hesabÄ±nÄ±za giriÅŸ yapÄ±n"

#### 3. Ã–nemli UyarÄ±: Static Translations

âš ï¸ **Ã‡OK Ã–NEMLÄ°:**

`withCustomTranslations` iÃ§ine verdiÄŸiniz Ã§eviriler **statik olarak deÄŸerlendirilebilir** olmalÄ±dÄ±r. **External dosyalardan import edemezsiniz**. TÃ¼m Ã§eviriler inline olarak tanÄ±mlanmalÄ±dÄ±r.

**NEDEN?**

Keycloakify, build time'da kodunuzu analiz eder ve Keycloak'Ä± base message deÄŸiÅŸikliklerinizden haberdar eder. BÃ¶ylece server-side generated feedback mesajlarÄ± sizin translation'larÄ±nÄ±zÄ± kullanabilir.

**âŒ YANLIÅ (Ã‡ALIÅMAZ):**
```typescript
// translations.ts
export const translations = {
    en: { loginAccountTitle: "..." },
    fr: { loginAccountTitle: "..." }
};

// i18n.ts
import { translations } from "./translations";  // âŒ Ã‡ALIÅMAZ!

i18nBuilder
    .withCustomTranslations(translations)  // âŒ Build time'da analiz edilemez
    .build();
```

**âœ… DOÄRU:**
```typescript
// i18n.ts
i18nBuilder
    .withCustomTranslations({
        en: { loginAccountTitle: "..." },
        fr: { loginAccountTitle: "..." }
    })  // âœ… Statik, inline tanÄ±m
    .build();
```

### Custom Message Key'leri TanÄ±mlama

Component level customization kullanÄ±yorsanÄ±z, kendi custom message key'lerinizi tanÄ±mlamak faydalÄ± olabilir:

```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login";
import type { ThemeName } from "../kc.gen";

const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withExtraLanguages({ /* ... */ })
    .withCustomTranslations({
        en: {
            loginAccountTitle: "Log in to your ACME account",
            myCustomMessage: "This is a custom message",  // âœ… Custom key
            welcomeMessage: "Welcome to ACME Portal",
            footerText: "Â© 2025 ACME Corporation"
        },
        fr: {
            loginAccountTitle: "Connectez-vous a votre compte ACME",
            myCustomMessage: "Ceci est un message personnalisÃ©",
            welcomeMessage: "Bienvenue sur le portail ACME",
            footerText: "Â© 2025 ACME Corporation"
        },
        tr: {
            loginAccountTitle: "ACME hesabÄ±nÄ±za giriÅŸ yapÄ±n",
            myCustomMessage: "Bu Ã¶zel bir mesajdÄ±r",
            welcomeMessage: "ACME PortalÄ±na HoÅŸ Geldiniz",
            footerText: "Â© 2025 ACME Corporation"
        }
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

**Component'te kullanÄ±m:**

```tsx
// src/login/pages/Login.tsx
export default function Login(props: LoginProps) {
    const { i18n } = props;
    const { msg, msgStr } = i18n;

    return (
        <div>
            <h2>{msg("welcomeMessage")}</h2>  {/* âœ… TypeScript bilir */}
            <p>{msg("myCustomMessage")}</p>
            {/* ... */}
            <footer>{msg("footerText")}</footer>
        </div>
    );
}
```

**TypeScript AvantajÄ±:**

TypeScript, "myCustomMessage", "welcomeMessage" gibi custom key'lerinizin valid olduÄŸunu bilir ve autocomplete saÄŸlar! ğŸ‰

### YaygÄ±n Override Edilen Message Key'ler

**Login sayfasÄ±:**
```typescript
{
    loginAccountTitle: "Custom login title",
    doLogIn: "Log In",
    username: "Email Address",
    password: "Password",
    rememberMe: "Stay signed in",
    loginForgotPassword: "Forgot your password?",
    noAccount: "Don't have an account?"
}
```

**Register sayfasÄ±:**
```typescript
{
    registerTitle: "Create your account",
    doRegister: "Sign Up",
    firstName: "First Name",
    lastName: "Last Name",
    email: "Email Address",
    password: "Choose Password",
    passwordConfirm: "Confirm Password"
}
```

**Error mesajlarÄ±:**
```typescript
{
    invalidPasswordMinLengthMessage: "Password must be at least {0} characters",
    invalidEmailMessage: "Please enter a valid email address",
    usernameExistsMessage: "This username is already taken",
    emailExistsMessage: "This email is already registered"
}
```

### Keycloak Realm Configuration'da Translations

BazÄ± mesajlar, Ã¶zellikle Keycloak realm configuration'Ä±na Ã¶zel olanlar, **Keycloak Admin Console'da** tanÄ±mlanabilir ve tanÄ±mlandÄ±klarÄ± gibi Ã§alÄ±ÅŸÄ±rlar.

#### Custom User Attributes iÃ§in Translations

Keycloak'ta custom user attribute tanÄ±mladÄ±ÄŸÄ±nÄ±zda (Ã¶rneÄŸin "favourite_pet"), bunun Display Name, Helper Text ve Select Option Label'larÄ± Admin Console'da tanÄ±mlanabilir:

**AdÄ±mlar:**

**1. User Attribute tanÄ±mlama:**
- Keycloak Admin Console â†’ Realm Settings â†’ User Profile
- "favourite_pet" attribute ekle
- Display Name iÃ§in message key kullan: `${profile.attributes.favourite_pet}`

**2. Translation tanÄ±mlama:**
- Realm Settings â†’ Localization â†’ English â†’ Add Key
- Key: `profile.attributes.favourite_pet`
- Value: `Favourite Pet`

**3. SonuÃ§:**
Register sayfasÄ±nda input field'Ä±n Display Name'i "Favourite Pet" olarak gÃ¶rÃ¼nÃ¼r.

**Ã–rnek realm translations:**
```
Key: profile.attributes.favourite_pet
English: Favourite Pet
French: Animal PrÃ©fÃ©rÃ©
Turkish: Favori Hayvan

Key: profile.attributes.favourite_pet.help
English: What is your favourite pet?
French: Quel est votre animal prÃ©fÃ©rÃ©?
Turkish: Favori hayvanÄ±nÄ±z nedir?
```

### advancedMsg() KullanÄ±mÄ±

Realm'de tanÄ±mlanan message key'leri kullanÄ±rken `advancedMsg()` fonksiyonunu kullanÄ±n:

```tsx
// Component'te
export default function Register(props: RegisterProps) {
    const { i18n, kcContext } = props;
    const { msg, advancedMsg } = i18n;
    const { register } = kcContext;

    return (
        <div>
            {register.formData.map(attribute => (
                <div key={attribute.name}>
                    {/* âœ… advancedMsg: Realm'den gelen dynamic key'ler iÃ§in */}
                    <label>{advancedMsg(attribute.displayName)}</label>
                    
                    {attribute.validators.helpText && (
                        <span className="help-text">
                            {advancedMsg(attribute.validators.helpText)}
                        </span>
                    )}
                    
                    <input name={attribute.name} />
                </div>
            ))}
        </div>
    );
}
```

**msg() vs advancedMsg() FarkÄ±:**

| Fonksiyon | KullanÄ±m | TypeScript Check |
|-----------|----------|------------------|
| `msg("loginAccountTitle")` | Statik olarak tanÄ±mlÄ± key'ler iÃ§in | âœ… TypeScript hata verir key yanlÄ±ÅŸsa |
| `advancedMsg("profile.attributes.favourite_pet")` | Dynamic/realm key'leri iÃ§in | âš ï¸ TypeScript kontrol etmez |
| `advancedMsg(attribute.displayName)` | Runtime'da belirlenen key'ler iÃ§in | âš ï¸ TypeScript kontrol etmez |

**Ne zaman kullanÄ±lÄ±r:**
- `msg()`: Theme'de tanÄ±mladÄ±ÄŸÄ±nÄ±z static key'ler iÃ§in
- `advancedMsg()`: Realm configuration'dan gelen dynamic key'ler iÃ§in

### Realm Override Translation'larÄ± iÃ§in Workaround

âš ï¸ **MEVCUT SINIRLANMA:**

Keycloakify'Ä±n mevcut versiyonunda, **Keycloak realm level'da tanÄ±mlanan tÃ¼m translation'lar theme tarafÄ±ndan pull edilmiyor**.

**Workaround:**

Belirli message key'lerinin realm level'da override edilebilmesini garantilemek iÃ§in `vite.config.ts`'yi dÃ¼zenleyin:

```typescript
// vite.config.ts
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import { keycloakify } from "keycloakify/vite-plugin";

export default defineConfig({
    plugins: [
        react(),
        keycloakify({
            // ...
            kcContextExclusionsFtl: `
                <@addToXKeycloakifyMessagesIfMessageKey str="doRegister" />
                <@addToXKeycloakifyMessagesIfMessageKey str="invalidUserMessage" />
                <@addToXKeycloakifyMessagesIfMessageKey str="termsText" />
            `
        })
    ]
});
```

Bu, belirtilen key'lerin (`doRegister`, `invalidUserMessage`, `termsText`) realm configuration'dan pull edilmesini saÄŸlar.

**YaygÄ±n realm-override key'ler:**
```typescript
kcContextExclusionsFtl: `
    <@addToXKeycloakifyMessagesIfMessageKey str="doRegister" />
    <@addToXKeycloakifyMessagesIfMessageKey str="invalidUserMessage" />
    <@addToXKeycloakifyMessagesIfMessageKey str="termsText" />
    <@addToXKeycloakifyMessagesIfMessageKey str="profile.attributes.favourite_pet" />
    <@addToXKeycloakifyMessagesIfMessageKey str="profile.attributes.company" />
`
```

### Theme Variants iÃ§in Translations

EÄŸer theme variants kullanÄ±yorsanÄ±z, variant bazÄ±nda translations saÄŸlayabilirsiniz:

```typescript
// src/login/i18n.ts
const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withCustomTranslations({
        en: {
            loginAccountTitle: "Default Login Title"
        }
    })
    .build();

// Theme variant iÃ§in
const { useI18n: useI18nVariant } = i18nBuilder
    .withThemeName<ThemeName>()
    .withCustomTranslations({
        en: {
            loginAccountTitle: "Variant Specific Login Title"
        }
    })
    .build();
```

Ä°lgili dokÃ¼mantasyona bakÄ±n: [Theme Variants Documentation]

### Translation Best Practices

**1. Statik translations inline tanÄ±mlayÄ±n:**
```typescript
âœ… DOÄRU:
.withCustomTranslations({
    en: { key: "value" }
})

âŒ YANLIÅ:
import translations from "./file";
.withCustomTranslations(translations)
```

**2. HTML iÃ§erikli mesajlar iÃ§in:**
```typescript
en: {
    welcomeMessage: "Welcome <strong>back</strong>!",
    termsText: "I agree to the <a href='/terms'>Terms and Conditions</a>"
}
```

**3. Parameterized mesajlar iÃ§in:**
```typescript
en: {
    invalidPasswordMinLengthMessage: "Password must be at least {0} characters",
    greeting: "Hello, {0}!"
}

// KullanÄ±m
msg("greeting", "John")  // "Hello, John!"
```

**4. Organization:**
```typescript
en: {
    // Login page
    loginAccountTitle: "...",
    doLogIn: "...",
    
    // Register page
    registerTitle: "...",
    doRegister: "...",
    
    // Errors
    invalidEmailMessage: "...",
    invalidPasswordMessage: "...",
    
    // Custom
    myCustomMessage: "..."
}
```

**5. Testing:**
- TÃ¼m desteklenen dillerde test edin
- Storybook'ta preview yapÄ±n
- Keycloak'ta realm-level override'larÄ± test edin

### Debugging Translation Issues

**1. Translation uygulanmÄ±yor:**
```typescript
// Key adÄ±nÄ± kontrol et
console.log(Object.keys(i18n.messages));

// DoÄŸru fonksiyonu kullanÄ±yor musunuz?
msg("staticKey")        // Static key'ler iÃ§in
advancedMsg("dynamicKey")  // Dynamic key'ler iÃ§in
```

**2. Realm translation pull edilmiyor:**
```typescript
// vite.config.ts'ye ekleyin
kcContextExclusionsFtl: `
    <@addToXKeycloakifyMessagesIfMessageKey str="yourKey" />
`
```

**3. TypeScript hatasÄ±:**
```typescript
// advancedMsg kullanÄ±n (TypeScript check yapmaz)
advancedMsg(attribute.displayName)
```

### Complete i18n.ts Ã–rneÄŸi

```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login";
import type { ThemeName } from "../kc.gen";

/** @see: https://docs.keycloakify.dev/i18n */
const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withExtraLanguages({})
    .withCustomTranslations({
        // English
        en: {
            // Override defaults
            loginAccountTitle: "Sign in to ACME",
            doLogIn: "Sign In",
            
            // Custom keys
            welcomeMessage: "Welcome to ACME Portal",
            footerText: "Â© 2025 ACME Corp",
            
            // Errors
            customErrorMessage: "Something went wrong. Please try again."
        },
        
        // French
        fr: {
            loginAccountTitle: "Connectez-vous Ã  ACME",
            doLogIn: "Se connecter",
            welcomeMessage: "Bienvenue sur le portail ACME",
            footerText: "Â© 2025 ACME Corp",
            customErrorMessage: "Une erreur s'est produite. Veuillez rÃ©essayer."
        },
        
        // Turkish
        tr: {
            loginAccountTitle: "ACME'ye GiriÅŸ Yap",
            doLogIn: "GiriÅŸ Yap",
            welcomeMessage: "ACME PortalÄ±na HoÅŸ Geldiniz",
            footerText: "Â© 2025 ACME Corp",
            customErrorMessage: "Bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin."
        }
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

### SÄ±radaki AdÄ±m

ArtÄ±k custom translation'larÄ± nasÄ±l ekleyeceÄŸinizi biliyorsunuz! Sonraki adÄ±mlarda daha advanced i18n konularÄ±nÄ± Ã¶ÄŸrenebilirsiniz.

---

## 16. i18n - ADDING SUPPORT FOR EXTRA LANGUAGES

### Ekstra Dil DesteÄŸi Ekleme

Åu anda Keycloakify'da varsayÄ±lan olarak **30 dil** desteklenmektedir. Desteklemek istediÄŸiniz dil listede yoksa, bu bÃ¶lÃ¼m manuel olarak nasÄ±l ekleyeceÄŸinizi aÃ§Ä±klar.

### VarsayÄ±lan Desteklenen Diller (30 Dil)

1. **ar** - Arabic (ArapÃ§a)
2. **ca** - Catalan (Katalanca)
3. **cs** - Czech (Ã‡ekÃ§e)
4. **da** - Danish (Danca)
5. **de** - German (Almanca)
6. **el** - Greek (Yunanca)
7. **en** - English (Ä°ngilizce)
8. **es** - Spanish (Ä°spanyolca)
9. **fa** - Persian/Farsi (FarsÃ§a)
10. **fi** - Finnish (Fince)
11. **fr** - French (FransÄ±zca)
12. **hu** - Hungarian (Macarca)
13. **it** - Italian (Ä°talyanca)
14. **ja** - Japanese (Japonca)
15. **ka** - Georgian (GÃ¼rcÃ¼ce)
16. **lt** - Lithuanian (Litvanyaca)
17. **lv** - Latvian (Letonca)
18. **nl** - Dutch (FelemenkÃ§e)
19. **no** - Norwegian (NorveÃ§Ã§e)
20. **pl** - Polish (LehÃ§e)
21. **pt-BR** - Portuguese Brazilian (Brezilya Portekizcesi)
22. **pt** - Portuguese (Portekizce)
23. **ru** - Russian (RusÃ§a)
24. **sk** - Slovak (SlovakÃ§a)
25. **sv** - Swedish (Ä°sveÃ§Ã§e)
26. **th** - Thai (Tayca)
27. **tr** - Turkish (TÃ¼rkÃ§e) âœ…
28. **uk** - Ukrainian (Ukraynaca)
29. **zh-CN** - Chinese Simplified (BasitleÅŸtirilmiÅŸ Ã‡ince)
30. **zh-TW** - Chinese Traditional (Geleneksel Ã‡ince)

### Yeni Dil Ekleme SÃ¼reci

Diliniz listede deÄŸil mi? NasÄ±l ekleyeceÄŸinizi ve Keycloak Admin UI'da nasÄ±l etkinleÅŸtireceÄŸinizi gÃ¶relim.

**Ã–rnek:** Hindi (hi) dilini ekleyeceÄŸiz.

**SonuÃ§:**
- Hindi, Keycloak Admin Console'da "Supported Locales" seÃ§eneÄŸi olarak gÃ¶rÃ¼nÃ¼r
- Hindi, dil seÃ§im dropdown'Ä±nda bir seÃ§enek olarak gÃ¶rÃ¼nÃ¼r

### AdÄ±m 1: Ã‡eviri DosyasÄ± OluÅŸturma

TÃ¼m varsayÄ±lan message key'lerinin Hindi Ã§evirilerini iÃ§eren bir TypeScript dosyasÄ± oluÅŸturun.

**Ã–nerilen konum:** `src/login/i18n.hi.ts` (veya src altÄ±nda herhangi bir yerde)

```typescript
// src/login/i18n.hi.ts
import type { MessageKey_defaultSet } from "keycloakify/login"; // veya "keycloakify/account"

const messages: Record<MessageKey_defaultSet, string> = {
    // cspell: disable
    doLogIn: "à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚",
    doRegister: "à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¤° à¤•à¤°à¥‡à¤‚",
    doRegisterSecurityKey: "à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¤° à¤•à¤°à¥‡à¤‚",
    loginAccountTitle: "à¤…à¤ªà¤¨à¥‡ à¤–à¤¾à¤¤à¥‡ à¤®à¥‡à¤‚ à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚",
    username: "à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤¨à¤¾à¤®",
    password: "à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡",
    email: "à¤ˆà¤®à¥‡à¤²",
    firstName: "à¤ªà¤¹à¤²à¤¾ à¤¨à¤¾à¤®",
    lastName: "à¤…à¤‚à¤¤à¤¿à¤® à¤¨à¤¾à¤®",
    // ... diÄŸer tÃ¼m default message'larÄ±n Ã§evirisi
    // cspell: enable
};

export default messages;
```

### ChatGPT ile Ã‡eviri Yapmak

âš ï¸ **Ã–NEMLÄ°:** YÃ¼zlerce message key var, ama panik yapmayÄ±n! **ChatGPT bunu sizin iÃ§in yapabilir!**

**AdÄ±mlar:**

**1. Ä°ngilizce Ã§evirileri bulun:**

Repo'nuzdaki ÅŸu dosyaya gidin:
```
node_modules/keycloakify/src/login/i18n/messages_defaultSet/en.ts
```

veya Account theme iÃ§in:
```
node_modules/keycloakify/src/account/i18n/messages_defaultSet/en.ts
```

**2. ChatGPT'ye ÅŸunu sorun:**

```
"AÅŸaÄŸÄ±daki TypeScript dosyasÄ±ndaki tÃ¼m mesajlarÄ± Hindi (hi) diline Ã§evir. 
Format olarak aynÄ± yapÄ±yÄ± koru:

[en.ts dosyasÄ±nÄ±n iÃ§eriÄŸini yapÄ±ÅŸtÄ±rÄ±n]
"
```

**3. Devam ettirin:**

ChatGPT birkaÃ§ kez "Continue" diyerek tÃ¼m Ã§evirileri tamamlayacaktÄ±r.

**DiÄŸer diller iÃ§in Ã¶rnekler:**

```typescript
// Azerbaycan TÃ¼rkÃ§esi (az)
// src/login/i18n.az.ts
import type { MessageKey_defaultSet } from "keycloakify/login";

const messages: Record<MessageKey_defaultSet, string> = {
    doLogIn: "Daxil ol",
    doRegister: "Qeydiyyatdan keÃ§",
    loginAccountTitle: "HesabÄ±nÄ±za daxil olun",
    // ...
};

export default messages;
```

```typescript
// Vietnamca (vi)
// src/login/i18n.vi.ts
import type { MessageKey_defaultSet } from "keycloakify/login";

const messages: Record<MessageKey_defaultSet, string> = {
    doLogIn: "ÄÄƒng nháº­p",
    doRegister: "ÄÄƒng kÃ½",
    loginAccountTitle: "ÄÄƒng nháº­p vÃ o tÃ i khoáº£n cá»§a báº¡n",
    // ...
};

export default messages;
```

### âš ï¸ Ã–NEMLÄ° UYARI: Generic Tutun!

ğŸš¨ **Ã‡EVÄ°RÄ°LERÄ° Ã–ZELLEÅTIRMEYIN!**

Bu dosyada Ã§evirileri kendi use case'inize gÃ¶re Ã¶zelleÅŸtirmeyin. Ã‡eviriler **mÃ¼mkÃ¼n olduÄŸunca generic** olmalÄ±dÄ±r.

**NEDEN?**

- Bu sÃ¼reÃ§, Keycloak sizin diliniz iÃ§in destek ekleyene kadar **geÃ§ici bir Ã§Ã¶zÃ¼mdÃ¼r**.
- Keycloak desteÄŸi eklediÄŸinde, bu dosyayÄ± **silebilmeniz gerekir**.
- Custom translations iÃ§in [Adding New Translation Messages](#15-i18n---adding-new-translation-messages-or-changing-default-ones) bÃ¶lÃ¼mÃ¼ne bakÄ±n.

**âŒ YANLIÅ (Ã–zelleÅŸtirme yapmayÄ±n):**
```typescript
const messages: Record<MessageKey_defaultSet, string> = {
    doLogIn: "ACME'ye GiriÅŸ Yap",  // âŒ Ã–zelleÅŸtirilmiÅŸ
    loginAccountTitle: "ACME PortalÄ± - GiriÅŸ",  // âŒ Ã–zelleÅŸtirilmiÅŸ
};
```

**âœ… DOÄRU (Generic tutun):**
```typescript
const messages: Record<MessageKey_defaultSet, string> = {
    doLogIn: "GiriÅŸ Yap",  // âœ… Generic
    loginAccountTitle: "HesabÄ±nÄ±za giriÅŸ yapÄ±n",  // âœ… Generic
};
```

### AdÄ±m 2: i18n.ts'ye Ekleme

OluÅŸturduÄŸunuz Ã§eviri dosyasÄ±nÄ± `src/login/i18n.ts` dosyasÄ±nda index edin:

```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login"; // veya "keycloakify/account"
import type { ThemeName } from "../kc.gen";

/** @see: https://docs.keycloakify.dev/i18n */
const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withExtraLanguages({
        hi: {
            // cspell: disable-next-line
            label: "à¤¹à¤¿à¤¨à¥à¤¦à¥€",  // Dilin kendi dilinde adÄ±
            getMessages: () => import("./i18n.hi")
        }
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

### Birden Fazla Dil Ekleme

Birden fazla dil eklemek iÃ§in:

```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login";
import type { ThemeName } from "../kc.gen";

const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withExtraLanguages({
        hi: {
            // cspell: disable-next-line
            label: "à¤¹à¤¿à¤¨à¥à¤¦à¥€",
            getMessages: () => import("./i18n.hi")
        },
        az: {
            // cspell: disable-next-line
            label: "AzÉ™rbaycanca",
            getMessages: () => import("./i18n.az")
        },
        vi: {
            // cspell: disable-next-line
            label: "Tiáº¿ng Viá»‡t",
            getMessages: () => import("./i18n.vi")
        },
        bn: {
            // cspell: disable-next-line
            label: "à¦¬à¦¾à¦‚à¦²à¦¾",
            getMessages: () => import("./i18n.bn")
        }
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

### AdÄ±m 3: Keycloak Admin Console'da EtkinleÅŸtirme

**1. Realm Settings'e gidin:**
- Keycloak Admin Console aÃ§
- Realm Settings â†’ Themes â†’ Internationalization

**2. Dili etkinleÅŸtirin:**
- **Internationalization:** Enabled
- **Supported Locales:** Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€) seÃ§in

**3. SonuÃ§:**
- Login sayfasÄ±nda dil dropdown'Ä±nda Hindi gÃ¶rÃ¼nÃ¼r
- Account Console'da Hindi seÃ§eneÄŸi gÃ¶rÃ¼nÃ¼r
- KullanÄ±cÄ±lar Hindi dilinde tema gÃ¶rebilir

### Dil Label'larÄ± (Native Names)

Dilleri kendi dillerinde yazÄ±n (native name):

| Kod | Label | Dil |
|-----|-------|-----|
| `hi` | `"à¤¹à¤¿à¤¨à¥à¤¦à¥€"` | Hindi |
| `az` | `"AzÉ™rbaycanca"` | Azerbaycan TÃ¼rkÃ§esi |
| `vi` | `"Tiáº¿ng Viá»‡t"` | Vietnamca |
| `bn` | `"à¦¬à¦¾à¦‚à¦²à¦¾"` | Bengalce |
| `ko` | `"í•œêµ­ì–´"` | Korece |
| `zh-CN` | `"ç®€ä½“ä¸­æ–‡"` | BasitleÅŸtirilmiÅŸ Ã‡ince |
| `zh-TW` | `"ç¹é«”ä¸­æ–‡"` | Geleneksel Ã‡ince |
| `ja` | `"æ—¥æœ¬èª"` | Japonca |
| `ar` | `"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"` | ArapÃ§a |
| `he` | `"×¢×‘×¨×™×ª"` | Ä°branice |
| `fa` | `"ÙØ§Ø±Ø³ÛŒ"` | FarsÃ§a |

### Complete Ã–rnek

**Dosya yapÄ±sÄ±:**
```
src/
  login/
    i18n.ts                 # Ana i18n config
    i18n.hi.ts             # Hindi Ã§evirileri
    i18n.az.ts             # Azerbaycan TÃ¼rkÃ§esi Ã§evirileri
    i18n.vi.ts             # Vietnamca Ã§evirileri
    pages/
      Login.tsx
      Register.tsx
    ...
```

**i18n.hi.ts:**
```typescript
// src/login/i18n.hi.ts
import type { MessageKey_defaultSet } from "keycloakify/login";

const messages: Record<MessageKey_defaultSet, string> = {
    // cspell: disable
    doLogIn: "à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚",
    doRegister: "à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¤° à¤•à¤°à¥‡à¤‚",
    doRegisterSecurityKey: "à¤¸à¥à¤°à¤•à¥à¤·à¤¾ à¤•à¥à¤‚à¤œà¥€ à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¤° à¤•à¤°à¥‡à¤‚",
    loginAccountTitle: "à¤…à¤ªà¤¨à¥‡ à¤–à¤¾à¤¤à¥‡ à¤®à¥‡à¤‚ à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚",
    loginTitle: "à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚",
    loginTitleHtml: "{0} à¤®à¥‡à¤‚ à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚",
    impersonateTitle: "{0} à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤•à¤¾ à¤ªà¥à¤°à¤¤à¤¿à¤°à¥‚à¤ªà¤£ à¤•à¤°à¥‡à¤‚",
    impersonateTitleHtml: "<strong>{0}</strong> à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾ à¤•à¤¾ à¤ªà¥à¤°à¤¤à¤¿à¤°à¥‚à¤ªà¤£ à¤•à¤°à¥‡à¤‚",
    realmChoice: "à¤°à¥€à¤¯à¤²à¥à¤®",
    unknownUser: "à¤…à¤œà¥à¤à¤¾à¤¤ à¤‰à¤ªà¤¯à¥‹à¤—à¤•à¤°à¥à¤¤à¤¾",
    loginTotpTitle: "à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤ªà¥à¤°à¤®à¤¾à¤£à¤• à¤¸à¥‡à¤Ÿà¤…à¤ª",
    loginProfileTitle: "à¤…à¤ªà¤¨à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚",
    loginIdpReviewProfileTitle: "à¤…à¤ªà¤¨à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚",
    loginTimeout: "à¤†à¤ªà¤•à¤¾ à¤²à¥‰à¤—à¤¿à¤¨ à¤…à¤¨à¥à¤°à¥‹à¤§ à¤¸à¤®à¤¾à¤ªà¥à¤¤ à¤¹à¥‹ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤ à¤²à¥‰à¤—à¤¿à¤¨ à¤ªà¥à¤°à¤•à¥à¤°à¤¿à¤¯à¤¾ à¤ªà¥à¤¨à¤ƒ à¤¶à¥à¤°à¥‚ à¤¹à¥‹à¤—à¥€à¥¤",
    // ... tÃ¼m diÄŸer key'ler
    // cspell: enable
};

export default messages;
```

**i18n.ts:**
```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login";
import type { ThemeName } from "../kc.gen";

const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withExtraLanguages({
        hi: {
            label: "à¤¹à¤¿à¤¨à¥à¤¦à¥€",
            getMessages: () => import("./i18n.hi")
        }
    })
    .withCustomTranslations({
        // BurasÄ± custom translations iÃ§in
        en: {
            // Custom keys veya overrides
        }
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

### Testing Ekstra Dilleri

**Storybook'ta test:**
```tsx
// src/login/pages/Login.stories.tsx
export const Hindi: Story = {
    render: () => (
        <KcPageStory
            kcContext={{
                locale: {
                    currentLanguageTag: "hi"
                }
            }}
        />
    )
};
```

**Dev mode'da test:**
```tsx
// src/main.tsx
if (import.meta.env.DEV) {
    window.kcContext = getKcContextMock({
        pageId: "login.ftl",
        overrides: {
            locale: {
                currentLanguageTag: "hi"
            }
        }
    });
}
```

### Best Practices

**1. Dosya isimlendirme:**
```
âœ… DOÄRU:
src/login/i18n.hi.ts
src/login/i18n.az.ts
src/account/i18n.vi.ts

âŒ YANLIÅ:
src/translations/hindi.ts
src/i18n/hi.translation.ts
```

**2. Label native dilinde:**
```typescript
âœ… DOÄRU:
hi: { label: "à¤¹à¤¿à¤¨à¥à¤¦à¥€" }
az: { label: "AzÉ™rbaycanca" }

âŒ YANLIÅ:
hi: { label: "Hindi" }
az: { label: "Azerbaijani" }
```

**3. Generic Ã§eviriler:**
```typescript
âœ… DOÄRU:
doLogIn: "à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚"  // Generic

âŒ YANLIÅ:
doLogIn: "ACME à¤®à¥‡à¤‚ à¤¸à¤¾à¤‡à¤¨ à¤‡à¤¨ à¤•à¤°à¥‡à¤‚"  // Ã–zelleÅŸtirilmiÅŸ
```

**4. Complete translations:**
TÃ¼m key'leri Ã§evirin, eksik bÄ±rakmayÄ±n. Eksik key'ler fallback olarak Ä°ngilizce gÃ¶sterir.

### SÄ±radaki AdÄ±m

ArtÄ±k yeni dil desteÄŸi nasÄ±l ekleneceÄŸini biliyorsunuz! Keycloak resmi olarak desteÄŸi eklediÄŸinde bu dosyalarÄ± silebilirsiniz.

---

## 17. THEME VARIANTS (TEMA VARYANTLARI)

### Tema VaryantlarÄ± Nedir?

Theme variant'lar, **tek bir codebase ile birden fazla Keycloak temasÄ± oluÅŸturmanÄ±zÄ±** saÄŸlar. AynÄ± kod tabanÄ±nda farklÄ± stiller, farklÄ± Ã§eviriler ve farklÄ± branding'lerle birden fazla tema sunabilirsiniz.

**KullanÄ±m SenaryolarÄ±:**
- AynÄ± ÅŸirkette farklÄ± markalar iÃ§in ayrÄ± temalar
- FarklÄ± mÃ¼ÅŸteriler iÃ§in white-label Ã§Ã¶zÃ¼mler
- A/B testing iÃ§in farklÄ± tasarÄ±m varyantlarÄ±
- FarklÄ± bÃ¶lge/diller iÃ§in Ã¶zelleÅŸtirilmiÅŸ temalar

### Theme Variant TanÄ±mlama

Birden fazla tema adÄ± belirterek theme variant'lar oluÅŸturabilirsiniz:

**Vite iÃ§in:**

```typescript
// vite.config.ts
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import { keycloakify } from "keycloakify/vite-plugin";

export default defineConfig({
  plugins: [
    react(),
    keycloakify({
      themeName: ["keycloakify-starter", "keycloakify-starter-variant-1"],
      // Daha fazla variant eklenebilir:
      // themeName: ["acme-default", "acme-dark", "acme-minimal"],
    }),
  ],
});
```

**Webpack/Create-React-App iÃ§in:**

```json
// package.json
{
  "name": "my-keycloakify-theme",
  "keycloakify": {
    "themeName": ["keycloakify-starter", "keycloakify-starter-variant-1"]
  }
}
```

**Ã–rnek proje iÃ§in:**

Bu projede (`keycloakify`) Vite kullanÄ±yoruz, bu yÃ¼zden `vite.config.ts`'yi dÃ¼zenlemelisiniz.

```typescript
// vite.config.ts
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import { keycloakify } from "keycloakify/vite-plugin";

export default defineConfig({
  plugins: [
    react(),
    keycloakify({
      themeName: ["keycloakify", "keycloakify-dark", "keycloakify-minimal"],
    }),
  ],
});
```

### Type Updates

âš ï¸ **Ã–NEMLÄ°:** Theme variant'larÄ± tanÄ±mladÄ±ktan sonra TypeScript type'larÄ±nÄ± gÃ¼ncellemek iÃ§in ÅŸu komutlardan birini Ã§alÄ±ÅŸtÄ±rÄ±n:

```bash
npm run dev
# veya
npm run storybook
# veya
npm run build-keycloak-theme
```

Bu, `ThemeName` type'Ä±nÄ± gÃ¼nceller ve `kcContext.themeName`'in type-safe olmasÄ±nÄ± saÄŸlar.

### Keycloak Admin Console'da GÃ¶rÃ¼nÃ¼m

Theme variant'lar tanÄ±mlandÄ±ÄŸÄ±nda, Keycloak Admin Console'da tema seÃ§im dropdown'Ä±nda gÃ¶rÃ¼nÃ¼rler:

**Realm Settings â†’ Themes â†’ Login Theme:**
```
[Dropdown Menu]
- keycloakify-starter
- keycloakify-starter-variant-1
```

Her realm iÃ§in farklÄ± bir tema variant'Ä± seÃ§ebilirsiniz!

### Kodda Theme Variant'a GÃ¶re Stil YÃ¼kleme

`kcContext.themeName` deÄŸerini kullanarak farklÄ± stiller veya componentler yÃ¼kleyebilirsiniz:

```tsx
// src/login/KcPage.tsx veya herhangi bir component
import { useEffect } from "react";
import type { KcContext } from "./KcContext";

export default function KcPage(props: { kcContext: KcContext }) {
    const { kcContext } = props;

    // Theme variant'a gÃ¶re CSS yÃ¼kle
    useEffect(() => {
        switch (kcContext.themeName) {
            case "keycloakify":
                import("./styles/default.css");
                break;
            case "keycloakify-dark":
                import("./styles/dark.css");
                break;
            case "keycloakify-minimal":
                import("./styles/minimal.css");
                break;
        }
    }, [kcContext.themeName]);

    // Component render...
}
```

**TypeScript ile type-safe:**

```tsx
// src/kc.gen.tsx
export type ThemeName = 
    | "keycloakify"
    | "keycloakify-dark"
    | "keycloakify-minimal";

// Component'te
import type { ThemeName } from "./kc.gen";

function MyComponent(props: { themeName: ThemeName }) {
    // TypeScript, themeName'in sadece belirtilen deÄŸerleri alabileceÄŸini bilir
    if (props.themeName === "keycloakify-dark") {
        // Dark theme logic
    }
}
```

### CSS ile Theme Variant KontrolÃ¼

```css
/* src/login/styles/main.css */

/* Default theme */
.login-container {
    background: white;
    color: black;
}

/* Dark variant iÃ§in override */
[data-theme="keycloakify-dark"] .login-container {
    background: #1a1a1a;
    color: white;
}

/* Minimal variant iÃ§in override */
[data-theme="keycloakify-minimal"] .login-container {
    background: #f5f5f5;
    border: none;
}
```

**Component'te data attribute set etme:**

```tsx
export default function KcPage(props: { kcContext: KcContext }) {
    const { kcContext } = props;

    useEffect(() => {
        document.documentElement.setAttribute("data-theme", kcContext.themeName);
    }, [kcContext.themeName]);

    // ...
}
```

### Theme Variant BazÄ±nda FarklÄ± Ã‡eviriler

Her theme variant iÃ§in **farklÄ± Ã§eviriler** saÄŸlayabilirsiniz. Bu, farklÄ± markalar veya mÃ¼ÅŸteriler iÃ§in Ã¶zelleÅŸtirilmiÅŸ metinler sunmanÄ±zÄ± saÄŸlar.

ğŸ’¡ **Not:** Ã–nce [Adding New Translation Messages](#15-i18n---adding-new-translation-messages-or-changing-default-ones) bÃ¶lÃ¼mÃ¼nÃ¼ okuyun.

**Ã–rnek:**

```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login";
import type { ThemeName } from "../kc.gen";

/** @see: https://docs.keycloakify.dev/i18n */
const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withExtraLanguages({ /* ... */ })
    .withCustomTranslations({
        en: {
            doLogIn: "Log in!",  // TÃ¼m variant'lar iÃ§in ortak
            
            // Variant bazÄ±nda farklÄ± Ã§eviriler
            loginAccountTitle: {
                "keycloakify": "Log in to your account",
                "keycloakify-dark": "Welcome back to ACME Dark",
                "keycloakify-minimal": "Sign in"
            },
            
            // String veya object olabilir
            welcomeMessage: {
                "keycloakify": "Welcome to our portal",
                "keycloakify-dark": "Welcome to the dark side",
                "keycloakify-minimal": "Welcome"
            }
        },
        
        // cspell: disable
        fr: {
            doLogIn: "Se connecter!",
            
            loginAccountTitle: {
                "keycloakify": "Connectez-vous Ã  votre compte",
                "keycloakify-dark": "Bon retour sur ACME Dark",
                "keycloakify-minimal": "Connexion"
            },
            
            welcomeMessage: {
                "keycloakify": "Bienvenue sur notre portail",
                "keycloakify-dark": "Bienvenue du cÃ´tÃ© obscur",
                "keycloakify-minimal": "Bienvenue"
            }
        },
        
        tr: {
            doLogIn: "GiriÅŸ Yap!",
            
            loginAccountTitle: {
                "keycloakify": "HesabÄ±nÄ±za giriÅŸ yapÄ±n",
                "keycloakify-dark": "ACME Dark'a tekrar hoÅŸ geldiniz",
                "keycloakify-minimal": "GiriÅŸ"
            },
            
            welcomeMessage: {
                "keycloakify": "PortalÄ±mÄ±za hoÅŸ geldiniz",
                "keycloakify-dark": "KaranlÄ±k tarafa hoÅŸ geldiniz",
                "keycloakify-minimal": "HoÅŸ geldiniz"
            }
        }
        // cspell: enable
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

**SonuÃ§:**

- **keycloakify** temasÄ±: "Log in to your account"
- **keycloakify-dark** temasÄ±: "Welcome back to ACME Dark"
- **keycloakify-minimal** temasÄ±: "Sign in"

Her tema variant'Ä± kendi Ã¶zelleÅŸtirilmiÅŸ mesajlarÄ±nÄ± gÃ¶sterir!

### Component Seviyesinde Variant KontrolÃ¼

```tsx
// src/login/pages/Login.tsx
import type { LoginProps } from "keycloakify/login";

export default function Login(props: LoginProps) {
    const { kcContext, i18n } = props;
    const { msg, msgStr } = i18n;
    const { themeName } = kcContext;

    // Theme variant'a gÃ¶re farklÄ± logo
    const logoSrc = 
        themeName === "keycloakify-dark" ? "/logo-dark.png" :
        themeName === "keycloakify-minimal" ? "/logo-minimal.png" :
        "/logo-default.png";

    // Theme variant'a gÃ¶re farklÄ± layout
    const containerClass = 
        themeName === "keycloakify-dark" ? "dark-container" :
        themeName === "keycloakify-minimal" ? "minimal-container" :
        "default-container";

    return (
        <div className={containerClass}>
            <img src={logoSrc} alt="Logo" />
            <h1>{msg("loginAccountTitle")}</h1>
            {/* Variant bazÄ±nda Ã§eviri otomatik olarak uygulanÄ±r */}
            {/* ... */}
        </div>
    );
}
```

### Storybook'ta Theme Variant Test Etme

Storybook'ta farklÄ± theme variant'larÄ± test etmek iÃ§in:

```tsx
// src/login/pages/Login.stories.tsx
import type { Meta, StoryObj } from "@storybook/react";
import { createKcPageStory } from "../KcPageStory";

const { KcPageStory } = createKcPageStory({ pageId: "login.ftl" });

const meta = {
    title: "login/login.ftl",
    component: KcPageStory
} satisfies Meta<typeof KcPageStory>;

export default meta;

type Story = StoryObj<typeof meta>;

// Default variant
export const Default: Story = {
    render: () => <KcPageStory />
};

// Dark variant
export const DarkVariant: Story = {
    render: () => (
        <KcPageStory
            kcContext={{
                themeName: "keycloakify-dark"
            }}
        />
    )
};

// Minimal variant
export const MinimalVariant: Story = {
    render: () => (
        <KcPageStory
            kcContext={{
                themeName: "keycloakify-minimal"
            }}
        />
    )
};

// Dark variant + FransÄ±zca
export const DarkVariantFrench: Story = {
    render: () => (
        <KcPageStory
            kcContext={{
                themeName: "keycloakify-dark",
                locale: {
                    currentLanguageTag: "fr"
                }
            }}
        />
    )
};
```

### Complete Ã–rnek: 3 Theme Variant

**vite.config.ts:**
```typescript
export default defineConfig({
  plugins: [
    react(),
    keycloakify({
      themeName: ["acme-corporate", "acme-startup", "acme-enterprise"],
    }),
  ],
});
```

**Dosya yapÄ±sÄ±:**
```
src/
  login/
    styles/
      corporate.css
      startup.css
      enterprise.css
      common.css
    i18n.ts
    KcPage.tsx
    pages/
      Login.tsx
```

**i18n.ts:**
```typescript
const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withCustomTranslations({
        en: {
            loginAccountTitle: {
                "acme-corporate": "ACME Corporate - Secure Login",
                "acme-startup": "Welcome to ACME Startup!",
                "acme-enterprise": "ACME Enterprise Portal"
            },
            footerText: {
                "acme-corporate": "Â© 2025 ACME Corp. All rights reserved.",
                "acme-startup": "Made with â¤ï¸ by ACME Startup",
                "acme-enterprise": "ACME Enterprise Solutions"
            }
        }
    })
    .build();
```

**KcPage.tsx:**
```tsx
useEffect(() => {
    // CSS import based on variant
    switch (kcContext.themeName) {
        case "acme-corporate":
            import("./styles/corporate.css");
            break;
        case "acme-startup":
            import("./styles/startup.css");
            break;
        case "acme-enterprise":
            import("./styles/enterprise.css");
            break;
    }
    
    // Common styles
    import("./styles/common.css");
}, [kcContext.themeName]);
```

### Native Themes iÃ§in Theme Variants

**Email Theme iÃ§in:**
Video: [YouTube - Email Theme Variants (timestamp 11:24)](https://www.youtube.com/watch?v=IZ9LSLfWxqo&t=684s)

**Native Theme (General) iÃ§in:**
Video: [YouTube - Native Theme Variants (timestamp 2:19)](https://youtu.be/OFg9RIM5hSw?si=zQ6Kdd7TgzZMsiH2&t=139)

### Best Practices

**1. AnlamlÄ± variant isimleri:**
```typescript
âœ… DOÄRU:
themeName: ["acme-corporate", "acme-minimal", "acme-dark"]

âŒ YANLIÅ:
themeName: ["theme1", "theme2", "variant"]
```

**2. Shared styles kullanÄ±n:**
```typescript
// TÃ¼m variant'larda ortak olan stilleri ayrÄ± tutun
import "./styles/common.css";  // Her variant iÃ§in
import(`./styles/${themeName}.css`);  // Variant specific
```

**3. Fallback deÄŸerler:**
```typescript
// Variant bazÄ±nda Ã§eviri yoksa generic kullan
loginAccountTitle: {
    "theme-1": "Custom title",
    "theme-2": "Another title"
    // DiÄŸer variant'lar iÃ§in: "Sign in to your account" (default)
}
```

**4. Type-safe kullanÄ±m:**
```typescript
// ThemeName type'Ä±nÄ± kullanÄ±n
function getLogoPath(themeName: ThemeName): string {
    // TypeScript autocomplete saÄŸlar
}
```

**5. Testing:**
- Her variant iÃ§in Storybook story oluÅŸturun
- Her variant'Ä± production'da test edin
- FarklÄ± dil kombinasyonlarÄ±nÄ± test edin

### Debugging Theme Variants

**1. Theme variant gÃ¶rÃ¼nmÃ¼yor:**
```bash
# Type'larÄ± gÃ¼ncelle
npm run dev
# veya
npm run build-keycloak-theme
```

**2. YanlÄ±ÅŸ stil yÃ¼kleniyor:**
```tsx
// Console'da kontrol et
console.log("Current theme:", kcContext.themeName);
```

**3. Ã‡eviri uygulanmÄ±yor:**
```typescript
// i18n.ts'de key adÄ±nÄ± kontrol et
loginAccountTitle: {
    "exact-theme-name": "..."  // Tema adÄ± eÅŸleÅŸmeli
}
```

### SÄ±radaki AdÄ±m

ArtÄ±k tek bir codebase ile birden fazla Keycloak temasÄ± nasÄ±l oluÅŸturacaÄŸÄ±nÄ±zÄ± biliyorsunuz! Her variant iÃ§in farklÄ± stiller, Ã§eviriler ve branding uygulayabilirsiniz.

---

## 18. SINGLE-PAGE ACCOUNT THEME

### Single-Page Account Theme Nedir?

Single-Page Account Theme, Keycloak'Ä±n modern **tek sayfalÄ±k Account Console** temasÄ±dÄ±r. Geleneksel multi-page account theme'den farklÄ± olarak, React SPA (Single-Page Application) olarak Ã§alÄ±ÅŸÄ±r ve daha modern bir kullanÄ±cÄ± deneyimi sunar.

**Ã–zellikler:**
- Modern React SPA mimarisi
- PatternFly component library kullanÄ±mÄ±
- Instant hot reload
- Custom component desteÄŸi
- Full TypeScript desteÄŸi

**Video Tutorial:**
[YouTube - Single-Page Account Theme Tutorial](https://youtu.be/UKU6zGCH-CY)

**Timestamps:**
- [00:00](https://www.youtube.com/watch?v=UKU6zGCH-CY&t=0s) â€“ Intro
- [03:33](https://www.youtube.com/watch?v=UKU6zGCH-CY&t=213s) â€“ Logo deÄŸiÅŸtirme
- [07:46](https://www.youtube.com/watch?v=UKU6zGCH-CY&t=466s) â€“ Custom button component kullanma
- [14:13](https://www.youtube.com/watch?v=UKU6zGCH-CY&t=853s) â€“ Update sÃ¼reci
- [16:55](https://www.youtube.com/watch?v=UKU6zGCH-CY&t=1015s) â€“ Translations (i18n)
- [18:23](https://www.youtube.com/watch?v=UKU6zGCH-CY&t=1103s) â€“ Keycloak Admin Console'da etkinleÅŸtirme

### Single-Page Account Theme OluÅŸturma

Account theme initialize etmek iÃ§in ÅŸu komutu Ã§alÄ±ÅŸtÄ±rÄ±n:

```bash
npx keycloakify initialize-account-theme
```

**Prompt'ta ÅŸunu seÃ§in:**
```
? Which type of account theme do you want to create?
  Multi-Page (Classic)
â¯ Single-Page (Modern, Recommended)
```

**SonuÃ§:**
- `src/account/` dizini oluÅŸturulur
- Single-Page account theme dosyalarÄ± eklenir
- `.gitignore` otomatik gÃ¼ncellenir

### Own Command ile Dosya SahipliÄŸi

Initialize edildikten sonra, birÃ§ok dosya projenize eklenir ancak **git-ignored** olur. Bir dosyayÄ± Ã¶zelleÅŸtirmek ve git tracking'e dahil etmek iÃ§in, **dosyanÄ±n baÅŸÄ±ndaki own command'Ä± Ã§alÄ±ÅŸtÄ±rÄ±n**.

**Ã–rnek:**

`src/account/KcPage.tsx` dosyasÄ±nÄ±n baÅŸÄ±nda ÅŸunu gÃ¶rÃ¼rsÃ¼nÃ¼z:

```tsx
// To own this file, run:
// npx keycloakify own --path "account/KcPage.tsx"

export default function KcPage() {
  // ...
}
```

**Komutu Ã§alÄ±ÅŸtÄ±rÄ±n:**

```bash
npx keycloakify own --path "account/KcPage.tsx"
```

**Bu komut:**
1. DosyayÄ± git tracking'e ekler
2. `.gitignore`'dan Ã§Ä±karÄ±r
3. ArtÄ±k dosyayÄ± Ã¶zelleÅŸtirebilirsiniz

**FaydalarÄ±:**
- Yeni bir kiÅŸi projeyi clone ettiÄŸinde ve `npm install` Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±nda, tÃ¼m gerekli dosyalar otomatik oluÅŸturulur
- Sadece Ã¶zelleÅŸtirdiÄŸiniz dosyalar git'e commit edilir
- Keycloakify update'leri daha kolay yÃ¶netilir

### Server Ã‡alÄ±ÅŸtÄ±rma ve Preview

Single-Page account theme'i Ã¶nizlemek iÃ§in:

```bash
npx keycloakify start-keycloak
```

**Bu komut:**
1. Keycloak'Ä± Docker container'da Ã§alÄ±ÅŸtÄ±rÄ±r
2. TemanÄ±zÄ± otomatik olarak yÃ¼kler
3. Local development ortamÄ± saÄŸlar
4. Hot reload ile instant preview

**AdÄ±mlar:**

1. **Komutu Ã§alÄ±ÅŸtÄ±rÄ±n:**
   ```bash
   npx keycloakify start-keycloak
   ```

2. **Keycloak'a giriÅŸ yapÄ±n:**
   - URL: `http://localhost:8080`
   - Username: `admin`
   - Password: `admin`

3. **Account Console'u aÃ§Ä±n:**
   - Realm seÃ§in (genellikle "myrealm")
   - "Account Console" linkine tÄ±klayÄ±n
   - Test kullanÄ±cÄ±sÄ± ile giriÅŸ yapÄ±n (genellikle "johndoe" / "johndoe")

4. **Development:**
   - ArtÄ±k normal React development gibi Ã§alÄ±ÅŸabilirsiniz
   - Kod deÄŸiÅŸiklikleri instant reload edilir
   - Console'da hatalarÄ± gÃ¶rebilirsiniz

âš ï¸ **Ã–NEMLÄ° NOT:**

EÄŸer Login theme'inizde belirli bir template'i zorla render ediyorsanÄ±z (dev mode iÃ§in), bunu **comment out** edin. Aksi takdirde giriÅŸ yapamayabilirsiniz.

```tsx
// src/main.tsx

// âŒ Bu kÄ±sÄ±m comment out edilmeli
// if (import.meta.env.DEV) {
//     window.kcContext = getKcContextMock({
//         pageId: "login.ftl"
//     });
// }
```

### Logo GÃ¼ncelleme

Account theme'inizin logosunu deÄŸiÅŸtirmek iÃ§in:

**AdÄ±m 1: Header dosyasÄ±nÄ± own edin**

```bash
npx keycloakify own --path "account/root/Header.tsx"
```

**AdÄ±m 2: Kendi logonuzu ekleyin**

Logoyu `src/account/assets/` klasÃ¶rÃ¼ne ekleyin:
```
src/account/assets/
  your-logo.svg
  your-logo.png
```

**AdÄ±m 3: Header.tsx'i gÃ¼ncelleyin**

```tsx
// src/account/root/Header.tsx

// Eskisi:
// import logoSvgUrl from "../assets/logo.svg";

// Yenisi:
import logoSvgUrl from "../assets/your-logo.svg";

export function Header() {
  return (
    <header>
      <img src={logoSvgUrl} alt="Logo" />
      {/* ... */}
    </header>
  );
}
```

**AdÄ±m 4: Test edin**

```bash
npx keycloakify start-keycloak
```

### Custom Component OluÅŸturma

Single-Page account theme **PatternFly** component library kullanÄ±r. PatternFly component'lerini override etmek iÃ§in:

#### Ã–rnek: Custom Button OluÅŸturma

**AdÄ±m 1: Index dosyasÄ±nÄ± own edin**

```bash
npx keycloakify own --path "shared/@patternfly/react-core/index.tsx"
```

**AdÄ±m 2: Custom component dosyasÄ± oluÅŸturun**

`src/shared/@patternfly/react-core/CustomButton.tsx`:

```tsx
// src/shared/@patternfly/react-core/CustomButton.tsx
import { type ButtonProps, Button } from "@patternfly/react-core";
import { css } from "@patternfly/react-styles";
import styles from "./CustomButton.module.css";

export function CustomButton(props: ButtonProps) {
  const { 
    children, 
    variant = "primary", 
    className: className_props, 
    ...rest 
  } = props;

  const className = css(
    styles.button, 
    styles[variant], 
    className_props
  );

  // Link variant iÃ§in PatternFly Button kullan
  if (variant === "link") {
    return (
      <Button {...rest} className={className} variant="link">
        {children}
      </Button>
    );
  }

  // DiÄŸer variant'lar iÃ§in custom button
  return (
    <button {...rest} className={className}>
      {children}
    </button>
  );
}
```

**AdÄ±m 3: CSS Module oluÅŸturun**

`src/shared/@patternfly/react-core/CustomButton.module.css`:

```css
/* CustomButton.module.css */

.button {
  padding: 10px 20px;
  border-radius: 4px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.primary {
  background: #0066cc;
  color: white;
  border: none;
}

.primary:hover {
  background: #0052a3;
}

.secondary {
  background: #f0f0f0;
  color: #333;
  border: 1px solid #ccc;
}

.secondary:hover {
  background: #e0e0e0;
}

.danger {
  background: #c9190b;
  color: white;
  border: none;
}

.danger:hover {
  background: #a30000;
}

.link {
  background: transparent;
  color: #0066cc;
  border: none;
  text-decoration: underline;
}
```

**AdÄ±m 4: Index'te export edin**

`src/shared/@patternfly/react-core/index.tsx`:

```tsx
// src/shared/@patternfly/react-core/index.tsx

// PatternFly'dan her ÅŸeyi export et
export * from "@patternfly/react-core";

// Custom Button'Ä± Button olarak export et (override)
export { CustomButton as Button } from "./CustomButton";
```

**SonuÃ§:**

ArtÄ±k tÃ¼m sayfalarda `Button` import ettiÄŸinizde, otomatik olarak `CustomButton` kullanÄ±lÄ±r! ğŸ‰

```tsx
// Herhangi bir sayfada
import { Button } from "../../shared/@patternfly/react-core";

export function MyPage() {
  return (
    <div>
      <Button variant="primary">Save</Button>  {/* CustomButton render edilir */}
      <Button variant="secondary">Cancel</Button>
      <Button variant="danger">Delete</Button>
    </div>
  );
}
```

### DiÄŸer PatternFly Component'leri Override Etme

AynÄ± pattern'i diÄŸer component'ler iÃ§in de kullanabilirsiniz:

**Alert override:**
```tsx
// src/shared/@patternfly/react-core/CustomAlert.tsx
import { Alert as PfAlert, type AlertProps } from "@patternfly/react-core";

export function CustomAlert(props: AlertProps) {
  // Custom logic
  return <PfAlert {...props} />;
}

// src/shared/@patternfly/react-core/index.tsx
export { CustomAlert as Alert } from "./CustomAlert";
```

**Card override:**
```tsx
// src/shared/@patternfly/react-core/CustomCard.tsx
import { Card as PfCard, type CardProps } from "@patternfly/react-core";

export function CustomCard(props: CardProps) {
  // Custom logic
  return <PfCard {...props} />;
}

// src/shared/@patternfly/react-core/index.tsx
export { CustomCard as Card } from "./CustomCard";
```

### Update SÃ¼reci

Single-Page account theme'in core module'Ã¼ **`@keycloakify/keycloak-account-ui`**'dir.

**Update yapmak iÃ§in:**

```bash
# package.json'da version'Ä± gÃ¼ncelleyin
npm install @keycloakify/keycloak-account-ui@latest

# Veya minor version update iÃ§in
npm update @keycloakify/keycloak-account-ui

# Install script'i Ã§alÄ±ÅŸtÄ±rÄ±n
npm install
```

**âš ï¸ GÃ¼venli Update KurallarÄ±:**

- âœ… **Minor version update'leri gÃ¼venlidir** (Ã¶rn: 1.2.3 â†’ 1.3.0)
- âš ï¸ **Major version update'ler breaking changes iÃ§erebilir** (Ã¶rn: 1.x.x â†’ 2.0.0)

**Update sonrasÄ±:**
1. `npm install` Ã§alÄ±ÅŸtÄ±rÄ±n
2. Own edilmemiÅŸ dosyalar otomatik gÃ¼ncellenir
3. Own edilmiÅŸ dosyalarÄ±nÄ±z korunur
4. Test edin: `npx keycloakify start-keycloak`

### Translations (i18n)

Single-Page account theme'de translations farklÄ± Ã§alÄ±ÅŸÄ±r.

**Genel kural:**
- Base translation dosyasÄ±nÄ± **own etmeyin**
- Sadece **override dosyasÄ±** oluÅŸturun
- Bu, sadece deÄŸiÅŸikliklerinizin etkili olmasÄ±nÄ± saÄŸlar

**Her dosyanÄ±n baÅŸÄ±nda talimatlar vardÄ±r:**

```tsx
// src/account/i18n/en.ts
// To override translations, create:
// src/account/i18n/overrides/en.ts
```

**Override dosyasÄ± oluÅŸturma:**

```typescript
// src/account/i18n/overrides/en.ts
export const en = {
  // Sadece override etmek istediÄŸiniz key'leri ekleyin
  "account.welcome": "Welcome to ACME Account Portal",
  "account.personalInfo": "Personal Information",
  // ...
};
```

```typescript
// src/account/i18n/overrides/tr.ts
export const tr = {
  "account.welcome": "ACME Hesap PortalÄ±na HoÅŸ Geldiniz",
  "account.personalInfo": "KiÅŸisel Bilgiler",
  // ...
};
```

**Daha fazla bilgi iÃ§in:**
[Email Theme i18n Documentation](https://docs.keycloakify.dev/theme-types/email-theme) bÃ¶lÃ¼mÃ¼ne bakÄ±n (benzer prensip).

### Keycloak Admin Console'da EtkinleÅŸtirme

Account theme'inizi Keycloak'ta etkinleÅŸtirmek iÃ§in:

**AdÄ±m 1: Theme'i build edin**

```bash
npm run build-keycloak-theme
```

**AdÄ±m 2: JAR dosyasÄ±nÄ± deploy edin**

Build sonrasÄ± `dist_keycloak/` klasÃ¶rÃ¼nde `.jar` dosyasÄ± oluÅŸur. Bunu Keycloak'a deploy edin.

**AdÄ±m 3: Admin Console'da seÃ§in**

1. Keycloak Admin Console â†’ Realm Settings
2. **Themes** tab
3. **Account Theme** dropdown
4. TemanÄ±zÄ± seÃ§in (Ã¶rn: "keycloakify")
5. **Save**

**AdÄ±m 4: Test edin**

Account Console'u aÃ§Ä±n ve temanÄ±zÄ±n uygulandÄ±ÄŸÄ±nÄ± gÃ¶rÃ¼n!

### Dosya YapÄ±sÄ±

Single-Page account theme dosya yapÄ±sÄ±:

```
src/
  account/
    root/
      Header.tsx           # Header component (logo burada)
      Root.tsx            # Root layout
    pages/
      PersonalInfo.tsx    # Personal info sayfasÄ±
      Security.tsx        # Security sayfasÄ±
      Applications.tsx    # Applications sayfasÄ±
      // ... diÄŸer sayfalar
    assets/
      logo.svg            # Logo ve diÄŸer asset'ler
    i18n/
      en.ts              # Ä°ngilizce translations
      tr.ts              # TÃ¼rkÃ§e translations
      overrides/
        en.ts            # Ä°ngilizce overrides
        tr.ts            # TÃ¼rkÃ§e overrides
    KcPage.tsx           # Ana page component
  shared/
    @patternfly/
      react-core/
        index.tsx        # PatternFly re-exports
        CustomButton.tsx # Custom components
        CustomButton.module.css
```

### Best Practices

**1. Own command kullanÄ±mÄ±:**
```bash
# Sadece Ã¶zelleÅŸtireceÄŸiniz dosyalarÄ± own edin
npx keycloakify own --path "account/root/Header.tsx"  # âœ…
npx keycloakify own --path "account/*"                 # âŒ TÃ¼m dosyalarÄ± own etmeyin
```

**2. Translation overrides:**
```typescript
// âœ… DOÄRU: Override dosyasÄ±
// src/account/i18n/overrides/en.ts
export const en = {
  "account.welcome": "Custom welcome"
};

// âŒ YANLIÅ: Base dosyayÄ± own etme
// src/account/i18n/en.ts (tÃ¼m dosyayÄ± kopyalama)
```

**3. Component organization:**
```
âœ… DOÄRU:
src/shared/@patternfly/react-core/CustomButton.tsx
src/shared/@patternfly/react-core/CustomButton.module.css

âŒ YANLIÅ:
src/account/components/CustomButton.tsx  (PatternFly override iÃ§in yanlÄ±ÅŸ yer)
```

**4. Update stratejisi:**
- Minor updates iÃ§in: `npm update @keycloakify/keycloak-account-ui`
- Major updates iÃ§in: Release notes oku, breaking changes kontrol et
- Own edilmiÅŸ dosyalarÄ±nÄ±zÄ± her zaman yedekleyin

**5. Development workflow:**
```bash
# 1. Server baÅŸlat
npx keycloakify start-keycloak

# 2. Kod deÄŸiÅŸiklikleri yap
# (instant reload ile gÃ¶rÃ¼nÃ¼r)

# 3. Build et
npm run build-keycloak-theme

# 4. Deploy et
# JAR dosyasÄ±nÄ± Keycloak'a deploy et
```

### Debugging

**1. Server baÅŸlamÄ±yor:**
```bash
# Docker'Ä± kontrol et
docker ps

# Port kullanÄ±mda mÄ±?
lsof -i :8080

# Container'Ä± temizle
docker stop $(docker ps -aq)
docker rm $(docker ps -aq)
```

**2. Logo gÃ¶rÃ¼nmÃ¼yor:**
```tsx
// Asset path'ini kontrol et
import logoSvgUrl from "../assets/your-logo.svg";  // DoÄŸru path?
console.log(logoSvgUrl);  // URL'yi kontrol et
```

**3. Custom component Ã§alÄ±ÅŸmÄ±yor:**
```tsx
// Index'te export edildi mi?
// src/shared/@patternfly/react-core/index.tsx
export { CustomButton as Button } from "./CustomButton";  // âœ…

// Import path doÄŸru mu?
import { Button } from "../../shared/@patternfly/react-core";  // âœ…
```

**4. Translation uygulanmÄ±yor:**
```typescript
// Override dosyasÄ± doÄŸru yerde mi?
src/account/i18n/overrides/en.ts  // âœ…

// Key adÄ± doÄŸru mu?
"account.welcome"  // Original key ile eÅŸleÅŸmeli
```

### SÄ±radaki AdÄ±m

ArtÄ±k modern Single-Page Account Theme nasÄ±l oluÅŸturacaÄŸÄ±nÄ±zÄ±, Ã¶zelleÅŸtireceÄŸinizi ve deploy edeceÄŸinizi biliyorsunuz! PatternFly component'lerini override edebilir, custom styling uygulayabilir ve kullanÄ±cÄ±larÄ±nÄ±za modern bir account yÃ¶netim deneyimi sunabilirsiniz.

---

## 19. MULTI-PAGE ACCOUNT THEME

### Multi-Page Account Theme Nedir?

Multi-Page Account Theme, Keycloak'Ä±n **geleneksel multi-page account console** temasÄ±dÄ±r. Single-Page theme'den farklÄ± olarak, her sayfa ayrÄ± bir route ve render'a sahiptir. Login theme ile Ã§ok benzer ÅŸekilde Ã§alÄ±ÅŸÄ±r.

**Ne Zaman KullanÄ±lÄ±r:**
- Login theme ile tutarlÄ± bir deneyim istiyorsanÄ±z
- Daha fazla kontrol ve Ã¶zelleÅŸtirme istiyorsanÄ±z
- Server-side rendering tercih ediyorsanÄ±z
- PatternFly component library kullanmak istemiyorsanÄ±z

**Ã–zellikler:**
- Login theme ile aynÄ± mimari
- Sayfa bazÄ±nda Ã¶zelleÅŸtirme
- FreeMarker template'leri
- `kcContext` ile data akÄ±ÅŸÄ±
- Storybook desteÄŸi

### Multi-Page Account Theme OluÅŸturma

Account theme initialize etmek iÃ§in:

```bash
npx keycloakify initialize-account-theme
```

**Prompt'ta ÅŸunu seÃ§in:**
```
? Which type of account theme do you want to create?
â¯ Multi-Page (Classic)
  Single-Page (Modern, Recommended)
```

**SonuÃ§:**
- `src/account/` dizini oluÅŸturulur
- Multi-Page account theme dosyalarÄ± eklenir
- Login theme ile benzer yapÄ±

**Ã–ncesi (varsayÄ±lan Keycloak account theme):**
- Basic gÃ¶rÃ¼nÃ¼m
- Keycloak default styling
- SÄ±nÄ±rlÄ± Ã¶zelleÅŸtirme

**SonrasÄ± (Ã¶zelleÅŸtirilmiÅŸ multi-page theme):**
- Custom styling
- Kendi componentleriniz
- Marka kimliÄŸi

### CLI Commands

Multi-Page account theme, Login theme ile **tamamen aynÄ± ÅŸekilde** Ã§alÄ±ÅŸÄ±r. AynÄ± CLI command'larÄ± kullanabilirsiniz:

#### 1. Story Ekleme

```bash
npx keycloakify add-story
```

**Prompt'ta "account" seÃ§in:**
```
? Which theme type?
  login
â¯ account
```

**Ã–rnek: Account sayfasÄ± iÃ§in story ekleme:**
```bash
npx keycloakify add-story

# Prompt:
? Which theme type? account
? Which page? account.ftl
```

**SonuÃ§:**
- `src/account/pages/Account.stories.tsx` oluÅŸturulur
- Storybook'ta preview edebilirsiniz

#### 2. Sayfa Eject Etme

```bash
npx keycloakify eject-page
```

**Prompt'ta "account" seÃ§in:**
```
? Which theme type?
  login
â¯ account
```

**Ã–rnek: Password sayfasÄ±nÄ± eject etme:**
```bash
npx keycloakify eject-page

# Prompt:
? Which theme type? account
? Which page? password.ftl
```

**SonuÃ§:**
- `src/account/pages/Password.tsx` oluÅŸturulur
- VarsayÄ±lan implementation kopyalanÄ±r
- Ã–zelleÅŸtirebilirsiniz

### Dosya YapÄ±sÄ±

Multi-Page account theme yapÄ±sÄ± Login theme ile aynÄ±dÄ±r:

```
src/
  account/
    pages/
      Account.tsx         # account.ftl sayfasÄ±
      Password.tsx        # password.ftl sayfasÄ±
      Sessions.tsx        # sessions.ftl sayfasÄ±
      Applications.tsx    # applications.ftl sayfasÄ±
      Totp.tsx           # totp.ftl sayfasÄ±
      Federatedidentity.tsx  # federatedIdentity.ftl
      Log.tsx            # log.ftl sayfasÄ±
      
      Account.stories.tsx     # Storybook story'leri
      Password.stories.tsx
      // ...
    
    i18n.ts              # Internationalization config
    KcContext.ts         # Context type definitions
    KcPage.tsx          # Ana page router
    KcPageStory.tsx     # Storybook helper
  
  login/
    // Login theme dosyalarÄ±
```

### Internationalization (i18n)

Multi-Page account theme'de i18n, **Login theme ile tamamen aynÄ±** Ã§alÄ±ÅŸÄ±r. Sadece import path'lerinde **/login/** yerine **/account/** kullanÄ±n.

**Login theme i18n:**
```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login";
import type { ThemeName } from "../kc.gen";

const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withCustomTranslations({
        en: {
            doLogIn: "Sign in"
        }
    })
    .build();
```

**Account theme i18n (aynÄ± mantÄ±k):**
```typescript
// src/account/i18n.ts
import { i18nBuilder } from "keycloakify/account";  // â† account
import type { ThemeName } from "../kc.gen";

const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withCustomTranslations({
        en: {
            // Account-specific translations
            account: "Account Management",
            editAccountHtmlTitle: "Edit Account",
            personalInfoHtmlTitle: "Personal Info",
            changePasswordHtmlTitle: "Change Password",
            accountManagementTitle: "Account Management",
            authenticatorTitle: "Authenticator",
            sessions: "Sessions",
            applications: "Applications"
        },
        tr: {
            account: "Hesap YÃ¶netimi",
            editAccountHtmlTitle: "HesabÄ± DÃ¼zenle",
            personalInfoHtmlTitle: "KiÅŸisel Bilgiler",
            changePasswordHtmlTitle: "Åifre DeÄŸiÅŸtir",
            accountManagementTitle: "Hesap YÃ¶netimi",
            authenticatorTitle: "Kimlik DoÄŸrulayÄ±cÄ±",
            sessions: "Oturumlar",
            applications: "Uygulamalar"
        }
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

**TÃ¼m i18n Ã¶zellikler aynen geÃ§erli:**
- `withExtraLanguages()` - Ekstra diller eklemek iÃ§in
- `withCustomTranslations()` - Custom translations iÃ§in
- Theme variant bazÄ±nda farklÄ± Ã§eviriler
- `msg()` ve `advancedMsg()` kullanÄ±mÄ±

Ä°lgili dokÃ¼mantasyon: [i18n BÃ¶lÃ¼mleri](#13-i18n-internationalization---basic-principles)

### KcContext KullanÄ±mÄ±

Multi-Page account theme'de `kcContext`, login theme'dekine Ã§ok benzer:

```typescript
// src/account/KcContext.ts
import { createGetKcContextMock } from "keycloakify/account";

export type KcContextExtension = 
    | { pageId: "account.ftl" }
    | { pageId: "password.ftl" }
    | { pageId: "sessions.ftl" }
    | { pageId: "applications.ftl" }
    | { pageId: "totp.ftl" }
    | { pageId: "federatedIdentity.ftl" }
    | { pageId: "log.ftl" };

export const { getKcContextMock } = createGetKcContextMock({
    kcContextExtension: {} as KcContextExtension,
});

export type KcContext = ReturnType<typeof getKcContextMock>;
```

**Component'te kullanÄ±m:**

```tsx
// src/account/pages/Account.tsx
import type { KcContext } from "../KcContext";
import type { I18n } from "../i18n";

export default function Account(props: {
    kcContext: Extract<KcContext, { pageId: "account.ftl" }>;
    i18n: I18n;
}) {
    const { kcContext, i18n } = props;
    const { msg } = i18n;
    const { url, account } = kcContext;

    return (
        <div>
            <h1>{msg("editAccountHtmlTitle")}</h1>
            
            <form action={url.accountUrl} method="post">
                <input 
                    type="text" 
                    name="username" 
                    defaultValue={account.username} 
                />
                <input 
                    type="email" 
                    name="email" 
                    defaultValue={account.email} 
                />
                <button type="submit">{msg("doSave")}</button>
            </form>
        </div>
    );
}
```

### Storybook ile Preview

Login theme gibi, Storybook ile preview edebilirsiniz:

```tsx
// src/account/pages/Account.stories.tsx
import type { Meta, StoryObj } from "@storybook/react";
import { createKcPageStory } from "../KcPageStory";

const { KcPageStory } = createKcPageStory({ pageId: "account.ftl" });

const meta = {
    title: "account/account.ftl",
    component: KcPageStory
} satisfies Meta<typeof KcPageStory>;

export default meta;

type Story = StoryObj<typeof meta>;

export const Default: Story = {
    render: () => <KcPageStory />
};

export const WithCustomData: Story = {
    render: () => (
        <KcPageStory
            kcContext={{
                account: {
                    username: "johndoe",
                    email: "john@example.com",
                    firstName: "John",
                    lastName: "Doe"
                }
            }}
        />
    )
};

// TÃ¼rkÃ§e preview
export const Turkish: Story = {
    render: () => (
        <KcPageStory
            kcContext={{
                locale: {
                    currentLanguageTag: "tr"
                }
            }}
        />
    )
};
```

**Storybook baÅŸlatma:**
```bash
npm run storybook
```

### REST API KullanÄ±mÄ± (Advanced)

Multi-Page theme kullanÄ±yor olsanÄ±z bile, **Single-Page Account theme'in kullandÄ±ÄŸÄ± REST API'yi** consume edebilirsiniz. EÄŸer `kcContext`'te ihtiyacÄ±nÄ±z olan data yoksa, dynamically fetch edebilirsiniz.

**Video Tutorial:**
[YouTube - Using Account REST API](https://youtu.be/FrFr-hqyjb4)

#### Ã–rnek Projeler

**React:**
[GitHub - Keycloakify Starter with Account API](https://github.com/keycloakify/keycloakify-starter/tree/account_api_poc)

**Angular:**
[GitHub - Keycloakify Angular Starter with Account API](https://github.com/keycloakify/keycloakify-starter-angular-vite/tree/account_api_poc)

**Svelte:**
TODO (henÃ¼z mevcut deÄŸil)

#### REST API Endpoints

Account v3 theme'in kodunu inceleyerek available endpoints'leri bulabilirsiniz:

[Keycloak Account UI API Code](https://github.com/keycloak/keycloak/tree/main/js/apps/account-ui/src/api)

**Veya:** Keycloak'ta Account v3 theme'i etkinleÅŸtirin ve Network tab'inde endpoint'leri gÃ¶rÃ¼n.

#### Ã–rnek: REST API KullanÄ±mÄ±

```tsx
// src/account/pages/Account.tsx
import { useState, useEffect } from "react";
import type { KcContext } from "../KcContext";
import type { I18n } from "../i18n";

// Account API response type
type AccountResponse = {
    username: string;
    email: string;
    firstName: string;
    lastName: string;
    emailVerified: boolean;
    // ... diÄŸer fields
};

export default function Account(props: {
    kcContext: Extract<KcContext, { pageId: "account.ftl" }>;
    i18n: I18n;
}) {
    const { kcContext, i18n } = props;
    const { msg } = i18n;
    const { url } = kcContext;
    
    const [accountData, setAccountData] = useState<AccountResponse | null>(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        // Fetch account data from REST API
        fetch(`${url.resourcesPath}/../account/`, {
            method: "GET",
            headers: {
                "Accept": "application/json"
            }
        })
            .then(res => res.json())
            .then(data => {
                setAccountData(data);
                setLoading(false);
            })
            .catch(err => {
                console.error("Failed to fetch account data:", err);
                setLoading(false);
            });
    }, [url.resourcesPath]);

    if (loading) {
        return <div>Loading...</div>;
    }

    return (
        <div>
            <h1>{msg("editAccountHtmlTitle")}</h1>
            
            {accountData && (
                <div>
                    <p>Username: {accountData.username}</p>
                    <p>Email: {accountData.email}</p>
                    <p>Verified: {accountData.emailVerified ? "Yes" : "No"}</p>
                </div>
            )}
            
            {/* Rest of the form */}
        </div>
    );
}
```

#### Available API Endpoints (Ã–rnekler)

```typescript
// Account bilgilerini getir
GET /realms/{realm}/account/

// Sessions listesi
GET /realms/{realm}/account/sessions

// Applications listesi
GET /realms/{realm}/account/applications

// Account gÃ¼ncelleme
POST /realms/{realm}/account/
Body: { firstName, lastName, email, ... }

// Password deÄŸiÅŸtir
POST /realms/{realm}/account/credentials/password
Body: { currentPassword, newPassword, confirmation }

// TOTP device ekle
POST /realms/{realm}/account/credentials/totp
Body: { secret, ... }

// Federated identities
GET /realms/{realm}/account/linked-accounts
POST /realms/{realm}/account/linked-accounts/{provider}/link
DELETE /realms/{realm}/account/linked-accounts/{provider}
```

### CSS Customization

Multi-Page account theme'de CSS customization, Login theme ile aynÄ±dÄ±r:

```css
/* src/account/main.css */

/* Override Keycloak default styles */
#kc-page-title {
    font-size: 2rem;
    color: #0066cc;
}

.card-pf {
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* Custom classes */
.account-form {
    max-width: 600px;
    margin: 0 auto;
}

.account-form input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.account-form button {
    background: #0066cc;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
```

Ä°lgili dokÃ¼mantasyon: [CSS Customization](#2-css-customization)

### Testing ve Deployment

**Testing (Storybook):**
```bash
npm run storybook
```

**Testing (Keycloak iÃ§inde):**
```bash
npx keycloakify start-keycloak
```

**Production Build:**
```bash
npm run build-keycloak-theme
```

**Deploy:**
1. `dist_keycloak/` klasÃ¶rÃ¼ndeki `.jar` dosyasÄ±nÄ± alÄ±n
2. Keycloak'a deploy edin
3. Admin Console â†’ Realm Settings â†’ Themes â†’ Account Theme
4. TemanÄ±zÄ± seÃ§in ve kaydedin

Ä°lgili dokÃ¼mantasyonlar:
- [Testing Outside Keycloak (Storybook)](#3-testing-your-theme---outside-of-keycloak-storybook)
- [Testing Inside Keycloak](#4-testing-your-theme---inside-of-keycloak)
- [Deploying Your Theme](#5-deploying-your-theme-production)

### Best Practices

**1. Login theme ile tutarlÄ±lÄ±k:**
```typescript
// AynÄ± styling ve pattern'leri kullanÄ±n
// src/login/main.css ve src/account/main.css benzer olsun
```

**2. Component reuse:**
```tsx
// src/shared/components/Button.tsx
export function Button(props: ButtonProps) {
    // Hem login hem account'ta kullanÄ±labilir
}

// src/login/pages/Login.tsx
import { Button } from "../../shared/components/Button";

// src/account/pages/Account.tsx
import { Button } from "../../shared/components/Button";
```

**3. i18n tutarlÄ±lÄ±ÄŸÄ±:**
```typescript
// Ortak translations iÃ§in shared key'ler kullanÄ±n
const commonTranslations = {
    doSave: "Save",
    doCancel: "Cancel",
    doSubmit: "Submit"
};

// Login i18n
.withCustomTranslations({
    en: {
        ...commonTranslations,
        doLogIn: "Sign in"
    }
})

// Account i18n
.withCustomTranslations({
    en: {
        ...commonTranslations,
        editAccount: "Edit Account"
    }
})
```

**4. Type safety:**
```typescript
// KcContext type'larÄ±nÄ± kullanÄ±n
export default function Account(props: {
    kcContext: Extract<KcContext, { pageId: "account.ftl" }>;
    i18n: I18n;
}) {
    // TypeScript type checking
}
```

### Single-Page vs Multi-Page: Hangisini SeÃ§meli?

| Ã–zellik | Multi-Page | Single-Page |
|---------|------------|-------------|
| **Mimari** | Server-side routing | Client-side SPA |
| **Login theme benzerliÄŸi** | âœ… Ã‡ok benzer | âŒ FarklÄ± |
| **Ã–zelleÅŸtirme Ã¶zgÃ¼rlÃ¼ÄŸÃ¼** | âœ… Tam kontrol | âš ï¸ PatternFly sÄ±nÄ±rlarÄ± |
| **Component library** | âŒ Yok (kendi componentleriniz) | âœ… PatternFly |
| **Update complexity** | âœ… Kolay | âš ï¸ Dependency updates |
| **Development DX** | âœ… Storybook | âœ… Hot reload |
| **REST API** | âœ… Ä°steÄŸe baÄŸlÄ± kullanabilir | âœ… Built-in |
| **Keycloak versiyonu** | âœ… TÃ¼m versiyonlar | âš ï¸ Newer versions |

**Multi-Page seÃ§in eÄŸer:**
- Login theme ile tutarlÄ± UX istiyorsanÄ±z
- Tam kontrol ve Ã¶zelleÅŸtirme istiyorsanÄ±z
- Kendi component library'nizi kullanacaksanÄ±z
- Server-side rendering tercih ediyorsanÄ±z

**Single-Page seÃ§in eÄŸer:**
- Modern SPA deneyimi istiyorsanÄ±z
- PatternFly component library kullanacaksanÄ±z
- Keycloak'Ä±n default Account v3 theme'ine yakÄ±n kalacaksanÄ±z
- Instant hot reload development istiyorsanÄ±z

### Debugging

**1. Sayfa render edilmiyor:**
```tsx
// KcPage.tsx'te route eklenmiÅŸ mi?
case "account.ftl":
    return <Account {...props} />;  // âœ…
```

**2. CSS uygulanmÄ±yor:**
```tsx
// main.css import edilmiÅŸ mi?
import "./main.css";
```

**3. i18n Ã§alÄ±ÅŸmÄ±yor:**
```typescript
// Import path doÄŸru mu?
import { i18nBuilder } from "keycloakify/account";  // âœ…
import { i18nBuilder } from "keycloakify/login";   // âŒ
```

**4. Story gÃ¶rÃ¼nmÃ¼yor:**
```bash
# Story dosyasÄ± .stories.tsx ile bitiyor mu?
src/account/pages/Account.stories.tsx  # âœ…
src/account/pages/Account.story.tsx    # âŒ
```

### SÄ±radaki AdÄ±m

ArtÄ±k Multi-Page Account Theme nasÄ±l oluÅŸturacaÄŸÄ±nÄ±zÄ± ve Login theme ile aynÄ± ÅŸekilde Ã¶zelleÅŸtireceÄŸinizi biliyorsunuz! GerektiÄŸinde REST API ile dinamik data fetch edebilir ve kullanÄ±cÄ±larÄ±nÄ±za tutarlÄ± bir account yÃ¶netim deneyimi sunabilirsiniz.

---

## 20. EMAIL THEME

### Email Theme Nedir?

Email Theme, Keycloak'Ä±n kullanÄ±cÄ±lara gÃ¶nderdiÄŸi **email'lerin gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ ve iÃ§eriÄŸini** Ã¶zelleÅŸtirmenize olanak tanÄ±r. Åifre sÄ±fÄ±rlama, email doÄŸrulama, hesap aktivasyonu gibi durumlarda gÃ¶nderilen email'leri markanÄ±za uygun hale getirebilirsiniz.

**Email tÃ¼rleri:**
- Password reset (Åifre sÄ±fÄ±rlama)
- Email verification (Email doÄŸrulama)
- Account activation (Hesap aktivasyonu)
- Update email confirmation (Email gÃ¼ncelleme onayÄ±)
- Execute actions (Ä°ÅŸlem yÃ¼rÃ¼tme)
- Event notifications (Olay bildirimleri)

### Ä°ki Email Theme YaklaÅŸÄ±mÄ±

Keycloakify ile email theme oluÅŸturmanÄ±n **iki yolu** vardÄ±r:

1. **keycloakify-emails plugin** - Modern, React/JSX tabanlÄ± (Ã–nerilen)
2. **Native FreeMarker** - Geleneksel, template-based

### 1. keycloakify-emails Plugin KullanÄ±mÄ± (Modern, Ã–nerilen)

**keycloakify-emails**, Keycloakify iÃ§in bir plugin'dir ve **jsx-email** veya baÅŸka email templating Ã§Ã¶zÃ¼mleri ile email theme oluÅŸturmanÄ±zÄ± saÄŸlar.

**GitHub:**
[keycloakify-emails](https://github.com/timofei-iatsenko/keycloakify-emails)

**Ã–zellikler:**
- Modern JSX/TSX syntax
- React component'leri ile email tasarÄ±mÄ±
- jsx-email desteÄŸi
- Hot reload development
- TypeScript support
- Component reusability

âš ï¸ **SINIRLANMA:**

Bu yaklaÅŸÄ±m **sadece Vite projelerinde** Ã§alÄ±ÅŸÄ±r. Webpack/Create-React-App projelerinde **kullanÄ±lamaz**.

**âœ… Ã‡alÄ±ÅŸÄ±r:**
- Vite + React
- Vite + Svelte
- Vite + Angular

**âŒ Ã‡alÄ±ÅŸmaz:**
- Create-React-App (Webpack)
- Custom Webpack setup

**Not:** Bu plugin, gelecekte Keycloakify core'a entegre edilecek.

#### React ile Email Theme (jsx-email)

**Ã–rnek proje:**
[GitHub - keycloakify-emails React Example](https://github.com/garronej/keycloakify-emails/tree/dir_location_new/example)

**Kurulum:**

```bash
# keycloakify-emails plugin'i ekleyin
npm install keycloakify-emails

# jsx-email kurulumu (opsiyonel ama Ã¶nerilen)
npm install jsx-email
```

**Vite config:**

```typescript
// vite.config.ts
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import { keycloakify } from "keycloakify/vite-plugin";
import { keycloakifyEmails } from "keycloakify-emails/vite-plugin";

export default defineConfig({
  plugins: [
    react(),
    keycloakify({
      themeName: "keycloakify",
    }),
    keycloakifyEmails()  // âœ… Email plugin ekle
  ],
});
```

**Email component Ã¶rneÄŸi:**

```tsx
// src/email/templates/PasswordReset.tsx
import { Html, Head, Body, Container, Heading, Text, Button } from "jsx-email";

interface PasswordResetProps {
  username: string;
  link: string;
  realmName: string;
}

export default function PasswordReset(props: PasswordResetProps) {
  const { username, link, realmName } = props;

  return (
    <Html>
      <Head />
      <Body style={{ fontFamily: "Arial, sans-serif", padding: "20px" }}>
        <Container style={{ maxWidth: "600px", margin: "0 auto" }}>
          <Heading>Password Reset Request</Heading>
          
          <Text>Hello {username},</Text>
          
          <Text>
            You have requested to reset your password for {realmName}.
            Click the button below to reset your password.
          </Text>
          
          <Button
            href={link}
            style={{
              background: "#0066cc",
              color: "white",
              padding: "12px 24px",
              borderRadius: "4px",
              textDecoration: "none",
              display: "inline-block"
            }}
          >
            Reset Password
          </Button>
          
          <Text style={{ fontSize: "12px", color: "#666", marginTop: "20px" }}>
            If you didn't request this, you can safely ignore this email.
          </Text>
        </Container>
      </Body>
    </Html>
  );
}
```

**TÃ¼rkÃ§e email Ã¶rneÄŸi:**

```tsx
// src/email/templates/PasswordReset.tr.tsx
import { Html, Head, Body, Container, Heading, Text, Button } from "jsx-email";

interface PasswordResetProps {
  username: string;
  link: string;
  realmName: string;
}

export default function PasswordReeset(props: PasswordResetProps) {
  const { username, link, realmName } = props;

  return (
    <Html>
      <Head />
      <Body style={{ fontFamily: "Arial, sans-serif", padding: "20px" }}>
        <Container style={{ maxWidth: "600px", margin: "0 auto" }}>
          <Heading>Åifre SÄ±fÄ±rlama Talebi</Heading>
          
          <Text>Merhaba {username},</Text>
          
          <Text>
            {realmName} iÃ§in ÅŸifrenizi sÄ±fÄ±rlama talebinde bulundunuz.
            Åifrenizi sÄ±fÄ±rlamak iÃ§in aÅŸaÄŸÄ±daki butona tÄ±klayÄ±n.
          </Text>
          
          <Button
            href={link}
            style={{
              background: "#0066cc",
              color: "white",
              padding: "12px 24px",
              borderRadius: "4px",
              textDecoration: "none",
              display: "inline-block"
            }}
          >
            Åifreyi SÄ±fÄ±rla
          </Button>
          
          <Text style={{ fontSize: "12px", color: "#666", marginTop: "20px" }}>
            Bu talebi siz yapmadÄ±ysanÄ±z, bu e-postayÄ± gÃ¼venle yok sayabilirsiniz.
          </Text>
        </Container>
      </Body>
    </Html>
  );
}
```

#### Svelte ile Email Theme

**Ã–rnek proje:**
[GitHub - keycloakify Svelte Email](https://github.com/keycloakify/svelte-email)

**Kurulum:**

```bash
npm install keycloakify-emails
```

**Svelte email component:**

```html
<!-- src/email/templates/PasswordReset.svelte -->
<script lang="ts">
  export let username: string;
  export let link: string;
  export let realmName: string;
</script>

<html>
  <head>
    <meta charset="utf-8" />
  </head>
  <body style="font-family: Arial, sans-serif; padding: 20px;">
    <div style="max-width: 600px; margin: 0 auto;">
      <h1>Password Reset Request</h1>
      
      <p>Hello {username},</p>
      
      <p>
        You have requested to reset your password for {realmName}.
        Click the button below to reset your password.
      </p>
      
      <a 
        href={link}
        style="background: #0066cc; color: white; padding: 12px 24px; border-radius: 4px; text-decoration: none; display: inline-block;"
      >
        Reset Password
      </a>
      
      <p style="font-size: 12px; color: #666; margin-top: 20px;">
        If you didn't request this, you can safely ignore this email.
      </p>
    </div>
  </body>
</html>
```

#### Angular ile Email Theme

**Ã–rnek proje:**
[GitHub - keycloakify Angular Email](https://github.com/keycloakify/angular-email)

**Kurulum:**

```bash
npm install keycloakify-emails
```

**Angular email component:**

```typescript
// src/email/templates/password-reset.component.ts
import { Component, Input } from '@angular/core';

@Component({
  selector: 'email-password-reset',
  template: `
    <html>
      <head>
        <meta charset="utf-8" />
      </head>
      <body style="font-family: Arial, sans-serif; padding: 20px;">
        <div style="max-width: 600px; margin: 0 auto;">
          <h1>Password Reset Request</h1>
          
          <p>Hello {{ username }},</p>
          
          <p>
            You have requested to reset your password for {{ realmName }}.
            Click the button below to reset your password.
          </p>
          
          <a 
            [href]="link"
            style="background: #0066cc; color: white; padding: 12px 24px; border-radius: 4px; text-decoration: none; display: inline-block;"
          >
            Reset Password
          </a>
          
          <p style="font-size: 12px; color: #666; margin-top: 20px;">
            If you didn't request this, you can safely ignore this email.
          </p>
        </div>
      </body>
    </html>
  `
})
export class PasswordResetEmailComponent {
  @Input() username!: string;
  @Input() link!: string;
  @Input() realmName!: string;
}
```

### 2. Native FreeMarker Email Theme

FreeMarker template'leri ile geleneksel email theme oluÅŸturabilirsiniz.

**Video Tutorial:**
[YouTube - Native Email Theme](https://youtu.be/IZ9LSLfWxqo)

**Initialize:**

```bash
npx keycloakify initialize-email-theme
```

**Prompt'ta "native" seÃ§in:**
```
? Which approach do you want to use?
  keycloakify-emails (Modern, JSX)
â¯ native (FreeMarker templates)
```

**SonuÃ§:**
- `src/email/` dizini oluÅŸturulur
- FreeMarker template dosyalarÄ± eklenir
- `src/email/resources/` klasÃ¶rÃ¼ oluÅŸturulur (asset'ler iÃ§in)

#### Dosya YapÄ±sÄ±

```
src/
  email/
    html/
      email-verification.ftl        # Email doÄŸrulama
      password-reset.ftl            # Åifre sÄ±fÄ±rlama
      execute-actions.ftl           # Ä°ÅŸlem yÃ¼rÃ¼tme
      update-email.ftl              # Email gÃ¼ncelleme
      event-update-password.ftl     # Åifre gÃ¼ncelleme bildirimi
      // ... diÄŸer email template'leri
    
    text/
      email-verification.ftl        # Plain text versiyonlar
      password-reset.ftl
      // ...
    
    resources/
      kc-logo.png                   # Logo ve asset'ler
      banner.jpg
      // ...
    
    messages/
      messages_en.properties        # Ä°ngilizce translations
      messages_tr.properties        # TÃ¼rkÃ§e translations
      // ...
    
    theme.properties                # Theme configuration
```

#### FreeMarker Template Ã–rneÄŸi

```ftl
<!-- src/email/html/password-reset.ftl -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${msg("passwordResetTitle")}</title>
</head>
<body style="font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5;">
    <table style="max-width: 600px; margin: 0 auto; background: white; border-radius: 8px; padding: 30px;">
        <tr>
            <td style="text-align: center;">
                <img src="${url.resourcesUrl}/kc-logo.png" alt="Logo" style="max-width: 200px;" />
            </td>
        </tr>
        <tr>
            <td>
                <h1 style="color: #333;">${msg("passwordResetTitle")}</h1>
            </td>
        </tr>
        <tr>
            <td>
                <p>${msg("passwordResetBody", user.username, realmName)}</p>
            </td>
        </tr>
        <tr>
            <td style="text-align: center; padding: 20px 0;">
                <a href="${link}" 
                   style="background: #0066cc; color: white; padding: 12px 24px; border-radius: 4px; text-decoration: none; display: inline-block;">
                    ${msg("passwordResetButton")}
                </a>
            </td>
        </tr>
        <tr>
            <td>
                <p style="font-size: 12px; color: #666;">
                    ${msg("passwordResetFooter")}
                </p>
            </td>
        </tr>
        <tr>
            <td style="font-size: 12px; color: #999; padding-top: 20px; border-top: 1px solid #eee;">
                <p>${msg("passwordResetValidity", linkExpiration)}</p>
                <p>${msg("passwordResetNoRequest")}</p>
            </td>
        </tr>
    </table>
</body>
</html>
```

#### Asset KullanÄ±mÄ± (Resimler, Logo)

Asset'leri `src/email/resources/` klasÃ¶rÃ¼ne ekleyin:

**Dosya yapÄ±sÄ±:**
```
src/email/resources/
  kc-logo.png           # Logo
  banner.jpg            # Banner resmi
  icon-email.png        # Email ikonu
  icon-lock.png         # Kilit ikonu
```

**FreeMarker'da kullanÄ±m:**

```ftl
<!-- Logo -->
<img src="${url.resourcesUrl}/kc-logo.png" alt="Logo" />

<!-- Banner -->
<img src="${url.resourcesUrl}/banner.jpg" alt="Banner" />

<!-- Icon -->
<img src="${url.resourcesUrl}/icon-email.png" alt="Email" />
```

**`${url.resourcesUrl}` deÄŸiÅŸkeni**, `src/email/resources/` dizinine otomatik olarak point eder.

**Ã–rnek: Logo ile header:**

```ftl
<table style="max-width: 600px; margin: 0 auto;">
    <!-- Header with logo -->
    <tr>
        <td style="text-align: center; padding: 20px; background: #0066cc;">
            <img 
                src="${url.resourcesUrl}/kc-logo.png" 
                alt="Company Logo" 
                style="max-width: 180px; height: auto;"
            />
        </td>
    </tr>
    
    <!-- Content -->
    <tr>
        <td style="padding: 30px; background: white;">
            <h1>Welcome!</h1>
            <p>Email content here...</p>
        </td>
    </tr>
    
    <!-- Footer with icon -->
    <tr>
        <td style="text-align: center; padding: 20px; background: #f5f5f5;">
            <img 
                src="${url.resourcesUrl}/icon-lock.png" 
                alt="Secure" 
                style="width: 24px; height: 24px;"
            />
            <p style="font-size: 12px; color: #666;">Secure communication</p>
        </td>
    </tr>
</table>
```

#### Translations (messages.properties)

```properties
# src/email/messages/messages_en.properties
passwordResetTitle=Password Reset Request
passwordResetBody=Hello {0}, you have requested to reset your password for {1}.
passwordResetButton=Reset Password
passwordResetFooter=If you didn't request this, you can safely ignore this email.
passwordResetValidity=This link will expire in {0} minutes.
passwordResetNoRequest=If you didn't make this request, someone may be trying to access your account. Please secure your account immediately.
```

```properties
# src/email/messages/messages_tr.properties
passwordResetTitle=Åifre SÄ±fÄ±rlama Talebi
passwordResetBody=Merhaba {0}, {1} iÃ§in ÅŸifrenizi sÄ±fÄ±rlama talebinde bulundunuz.
passwordResetButton=Åifreyi SÄ±fÄ±rla
passwordResetFooter=Bu talebi siz yapmadÄ±ysanÄ±z, bu e-postayÄ± gÃ¼venle yok sayabilirsiniz.
passwordResetValidity=Bu baÄŸlantÄ± {0} dakika iÃ§inde geÃ§erliliÄŸini yitire
cektir.
passwordResetNoRequest=Bu talebi siz yapmadÄ±ysanÄ±z, birisi hesabÄ±nÄ±za eriÅŸmeye Ã§alÄ±ÅŸÄ±yor olabilir. LÃ¼tfen hesabÄ±nÄ±zÄ± derhal gÃ¼vence altÄ±na alÄ±n.
```

#### Plain Text Email VersiyonlarÄ±

Her HTML email iÃ§in bir **plain text versiyonu** da oluÅŸturmalÄ±sÄ±nÄ±z:

```ftl
<!-- src/email/text/password-reset.ftl -->
${msg("passwordResetTitle")}

${msg("passwordResetBody", user.username, realmName)}

${msg("passwordResetButton")}: ${link}

${msg("passwordResetFooter")}

${msg("passwordResetValidity", linkExpiration)}
${msg("passwordResetNoRequest")}
```

### Email Theme Testing

**Build:**
```bash
npm run build-keycloak-theme
```

**Deploy:**
1. `dist_keycloak/` klasÃ¶rÃ¼ndeki `.jar` dosyasÄ±nÄ± alÄ±n
2. Keycloak'a deploy edin
3. Admin Console â†’ Realm Settings â†’ Themes â†’ Email Theme
4. TemanÄ±zÄ± seÃ§in ve kaydedin

**Test etme:**

1. **Password reset test:**
   - Login sayfasÄ±nda "Forgot Password?" tÄ±klayÄ±n
   - Email adresinizi girin
   - Gelen email'i kontrol edin

2. **Email verification test:**
   - Yeni bir kullanÄ±cÄ± oluÅŸturun (email verification required)
   - Gelen email'i kontrol edin

3. **Local email server (Development):**
   ```bash
   # MailHog kullanarak local email test
   docker run -d -p 1025:1025 -p 8025:8025 mailhog/mailhog
   
   # Keycloak SMTP config:
   # Host: host.docker.internal (veya local IP)
   # Port: 1025
   # From: noreply@example.com
   
   # Email'leri gÃ¶rÃ¼ntÃ¼le: http://localhost:8025
   ```

### Email Template'leri

Keycloak'Ä±n desteklediÄŸi email template'leri:

| Template | AÃ§Ä±klama |
|----------|----------|
| `email-verification.ftl` | Email doÄŸrulama |
| `password-reset.ftl` | Åifre sÄ±fÄ±rlama |
| `execute-actions.ftl` | Ä°ÅŸlem yÃ¼rÃ¼tme (update password, vb.) |
| `update-email.ftl` | Email gÃ¼ncelleme onayÄ± |
| `email-test.ftl` | Test email (SMTP test) |
| `event-login_error.ftl` | GiriÅŸ hatasÄ± bildirimi |
| `event-remove_totp.ftl` | TOTP kaldÄ±rma bildirimi |
| `event-update_password.ftl` | Åifre gÃ¼ncelleme bildirimi |
| `event-update_totp.ftl` | TOTP gÃ¼ncelleme bildirimi |

### Best Practices

**1. Responsive email tasarÄ±mÄ±:**
```html
<!-- Mobile-friendly -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Table-based layout (email uyumluluÄŸu iÃ§in) -->
<table style="max-width: 600px; width: 100%;">
  <!-- Content -->
</table>

<!-- Inline CSS (external CSS Ã§alÄ±ÅŸmaz) -->
<p style="color: #333; font-size: 16px;">Text</p>
```

**2. Asset optimization:**
```
âœ… DOÄRU:
- PNG/JPG formatÄ± kullanÄ±n
- Dosya boyutunu kÃ¼Ã§Ã¼k tutun (< 100KB)
- Absolute URL kullanÄ±n: ${url.resourcesUrl}/logo.png

âŒ YANLIÅ:
- SVG kullanmayÄ±n (email client desteÄŸi zayÄ±f)
- BÃ¼yÃ¼k dosyalar (> 500KB)
- Relative path: ../resources/logo.png
```

**3. Plain text versiyonu her zaman ekleyin:**
```
âœ… Hem HTML hem text versiyonu
src/email/html/password-reset.ftl
src/email/text/password-reset.ftl

âŒ Sadece HTML
src/email/html/password-reset.ftl
```

**4. Translation key'leri:**
```properties
# Parametric mesajlar
passwordResetBody=Hello {0}, reset for {1}

# FreeMarker'da kullanÄ±m
${msg("passwordResetBody", user.username, realmName)}
```

**5. Link gÃ¼venliÄŸi:**
```ftl
<!-- âœ… DOÄRU: Direct link -->
<a href="${link}">Reset Password</a>

<!-- âŒ YANLIÅ: JavaScript -->
<a href="javascript:void(0)">Reset Password</a>

<!-- âœ… Link expiration uyarÄ±sÄ± -->
<p>This link expires in ${linkExpiration} minutes.</p>
```

### Email Client UyumluluÄŸu

Email client'lar HTML/CSS desteÄŸi konusunda sÄ±nÄ±rlÄ±dÄ±r:

**âœ… Desteklenir:**
- Inline CSS
- Table-based layout
- Basic HTML tags (`<p>`, `<h1>`, `<a>`, `<img>`, `<table>`)
- Web-safe fonts (Arial, Helvetica, Times New Roman)

**âŒ Desteklenmez veya SÄ±nÄ±rlÄ±:**
- External CSS (`<link>` tag)
- `<div>` based layout (bazÄ± client'larda sorunlu)
- Flexbox / Grid
- JavaScript
- SVG (bazÄ± client'larda)
- Web fonts (@font-face)
- Video / Audio
- Forms (input, button)

### Debugging

**1. Email gÃ¶nderilmiyor:**
```
# SMTP ayarlarÄ±nÄ± kontrol et
Keycloak Admin â†’ Realm Settings â†’ Email

# SMTP baÄŸlantÄ±sÄ±nÄ± test et
"Test connection" butonuna tÄ±kla
```

**2. Asset gÃ¶rÃ¼nmÃ¼yor:**
```ftl
<!-- URL'yi kontrol et -->
<img src="${url.resourcesUrl}/logo.png" />

<!-- Console'da URL'yi gÃ¶rÃ¼ntÃ¼le -->
<!-- ${url.resourcesUrl} = https://keycloak.example.com/resources/... -->
```

**3. Translation uygulanmÄ±yor:**
```properties
# Key adÄ±nÄ± kontrol et
# messages_en.properties
passwordResetTitle=Reset Password

# FreeMarker'da
${msg("passwordResetTitle")}  # âœ… DoÄŸru key
${msg("passwordReset")}       # âŒ YanlÄ±ÅŸ key
```

**4. Layout bozuk:**
```html
<!-- Table-based layout kullanÄ±n -->
âœ… DOÄRU:
<table>
  <tr>
    <td>Content</td>
  </tr>
</table>

âŒ YANLIÅ:
<div style="display: flex;">
  <div>Content</div>
</div>
```

### SÄ±radaki AdÄ±m

ArtÄ±k Keycloak Email Theme nasÄ±l oluÅŸturacaÄŸÄ±nÄ±zÄ± biliyorsunuz! Ä°ster modern jsx-email ile ister geleneksel FreeMarker ile, markanÄ±za uygun, profesyonel email'ler gÃ¶nderebilirsiniz.

---

## SONUÃ‡

ğŸ‰ **Tebrikler!** ArtÄ±k Keycloakify'Ä±n tÃ¼m Ã¶zelliklerini biliyorsunuz:

âœ… **Temel Konular:**
1. Quick Start - Projeye baÅŸlangÄ±Ã§
2. CSS Customization - Stil Ã¶zelleÅŸtirme
3. Testing (Storybook) - Keycloak dÄ±ÅŸÄ±nda test
4. Testing (Inside Keycloak) - Keycloak iÃ§inde test
5. Deploying Your Theme - Production'a deploy

âœ… **Advanced Entegrasyonlar:**
6. Vite Integration - Mevcut Vite projesine entegrasyon
7. Create-React-App / Webpack - CRA/Webpack entegrasyonu
8. Nx Monorepo - Nx workspace entegrasyonu

âœ… **Component & Styling:**
9. Using Component Library - MUI, shadcn/ui kullanÄ±mÄ±
10. Custom Fonts - Ã–zel font ekleme
11. Using Tailwind CSS - Tailwind entegrasyonu
12. Dark Mode Persistence - Dark/Light mode state transfer

âœ… **Internationalization (i18n):**
13. i18n Basic Principles - Temel prensipler
14. Previewing Pages in Different Languages - Dil Ã¶nizleme
15. Adding New Translation Messages - Custom translations
16. Adding Extra Languages - Yeni dil desteÄŸi

âœ… **Advanced Features:**
17. Theme Variants - Birden fazla tema, tek codebase
18. Single-Page Account Theme - Modern SPA account theme
19. Multi-Page Account Theme - Geleneksel account theme
20. Email Theme - Email Ã¶zelleÅŸtirme
21. Terms and Conditions Page - KullanÄ±m ÅŸartlarÄ± sayfasÄ±

**Bu proje iÃ§in unutmayÄ±n:**
- âœ… NPM kullanÄ±yoruz (yarn deÄŸil)
- âœ… Proje adÄ±: `keycloakify`
- âœ… Vite build tool
- âœ… Storybook ile development

BaÅŸarÄ±lar! ğŸš€

---

## 21. TERMS AND CONDITIONS PAGE (KULLANIM ÅARTLARI SAYFASI)

### Terms and Conditions Nedir?

Keycloak'Ä±n **Terms and Conditions** Ã¶zelliÄŸi, kullanÄ±cÄ±larÄ±n kayÄ±t sÄ±rasÄ±nda veya ilk giriÅŸ sÄ±rasÄ±nda hizmet kullanÄ±m ÅŸartlarÄ±nÄ±zÄ± kabul etmelerini saÄŸlar. Bu, yasal gereklilikler iÃ§in Ã¶nemli bir Ã¶zelliktir.

**KullanÄ±m senaryolarÄ±:**
- Yeni kullanÄ±cÄ± kaydÄ±nda kullanÄ±m ÅŸartlarÄ±nÄ± gÃ¶sterme
- GDPR/KVKK uyumluluÄŸu iÃ§in onay alma
- Gizlilik politikasÄ± kabulÃ¼
- Hizmet koÅŸullarÄ±nÄ± gÃ¼ncellediÄŸinizde mevcut kullanÄ±cÄ±lara tekrar gÃ¶sterme

**Preview:**
[Storybook - Terms.ftl Default Preview](https://storybook.keycloakify.dev/?path=/story/login-terms-ftl--default)
[Storybook - Terms.ftl Long Message](https://storybook.keycloakify.dev/?path=/story/login-terms-ftl--long-message)

### Feature'Ä± EtkinleÅŸtirme

Terms and Conditions sayfasÄ±nÄ± gÃ¶stermek iÃ§in Keycloak Admin Console'da etkinleÅŸtirmeniz gerekir:

**AdÄ±mlar:**

1. **Realm'inize gidin**
   - Keycloak Admin Console'u aÃ§Ä±n
   - Ä°lgili realm'i seÃ§in

2. **Authentication â†’ Required Actions**
   - Sol menÃ¼den **Authentication** seÃ§in
   - **Required Actions** tab'ine tÄ±klayÄ±n

3. **Terms and Conditions'Ä± etkinleÅŸtirin**
   - **Terms and Conditions** satÄ±rÄ±nÄ± bulun
   - **Enabled** checkbox'Ä±nÄ± iÅŸaretleyin
   - **Set as Default Action** checkbox'Ä±nÄ± iÅŸaretleyin

4. **Kaydedin**

**SonuÃ§:**
- Yeni kullanÄ±cÄ±lar kayÄ±t olduktan sonra Terms sayfasÄ±nÄ± gÃ¶recek
- KullanÄ±cÄ±lar kabul etmeden devam edemeyecek
- Kabul etme durumu Keycloak'ta saklanacak

### Terms Metnini TanÄ±mlama

Terms and Conditions metninizi Keycloak realm configuration'Ä±nda tanÄ±mlamanÄ±z gerekir. **`termsText`** message key'ini override ederek yaparsÄ±nÄ±z.

**Video Tutorial:**
[YouTube - Defining Terms Text](https://youtu.be/naW2TxwJZsA)

#### Keycloak Admin Console'da Terms TanÄ±mlama

Modern Keycloak versiyonlarÄ±nda, Admin Console Ã¼zerinden yapabilirsiniz:

**AdÄ±mlar:**

1. **Realm Settings â†’ Localization**
   - Sol menÃ¼den **Realm Settings**
   - **Localization** tab

2. **Ä°ngilizce iÃ§in:**
   - Language: **English**
   - **Create** veya mevcut translation'Ä± edit edin
   - Key: `termsText`
   - Value: (KullanÄ±m ÅŸartlarÄ± metniniz)

**Ã–rnek Terms Text (Ä°ngilizce):**

```html
<h2>Terms and Conditions</h2>

<p>Welcome to our service. By creating an account, you agree to the following terms:</p>

<h3>1. Acceptance of Terms</h3>
<p>By accessing and using this service, you accept and agree to be bound by the terms and provision of this agreement.</p>

<h3>2. Use License</h3>
<p>Permission is granted to temporarily access the materials on our service for personal, non-commercial transitory viewing only.</p>

<h3>3. User Accounts</h3>
<p>You are responsible for safeguarding the password that you use to access the service and for any activities or actions under your password.</p>

<h3>4. Privacy Policy</h3>
<p>Your use of our service is also governed by our Privacy Policy. Please review our Privacy Policy, which also governs the service and informs users of our data collection practices.</p>

<h3>5. Modifications</h3>
<p>We reserve the right to modify or replace these Terms at any time. We will provide notice of any changes by posting the new Terms on this site.</p>

<p><strong>By clicking "I Accept", you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions.</strong></p>
```

**Ã–rnek Terms Text (TÃ¼rkÃ§e):**

```html
<h2>KullanÄ±m ÅartlarÄ± ve KoÅŸullarÄ±</h2>

<p>Hizmetimize hoÅŸ geldiniz. Hesap oluÅŸturarak aÅŸaÄŸÄ±daki ÅŸartlarÄ± kabul etmiÅŸ olursunuz:</p>

<h3>1. ÅartlarÄ±n KabulÃ¼</h3>
<p>Bu hizmete eriÅŸerek ve kullanarak, bu sÃ¶zleÅŸmenin ÅŸart ve hÃ¼kÃ¼mlerine baÄŸlÄ± kalmayÄ± kabul edersiniz.</p>

<h3>2. KullanÄ±m LisansÄ±</h3>
<p>Hizmetimizdeki materyallere kiÅŸisel, ticari olmayan geÃ§ici gÃ¶rÃ¼ntÃ¼leme iÃ§in geÃ§ici olarak eriÅŸim izni verilmiÅŸtir.</p>

<h3>3. KullanÄ±cÄ± HesaplarÄ±</h3>
<p>Hizmete eriÅŸmek iÃ§in kullandÄ±ÄŸÄ±nÄ±z ÅŸifreyi korumaktan ve ÅŸifreniz altÄ±ndaki tÃ¼m aktivitelerden veya eylemlerden siz sorumlusunuz.</p>

<h3>4. Gizlilik PolitikasÄ±</h3>
<p>Hizmetimizi kullanÄ±mÄ±nÄ±z aynÄ± zamanda Gizlilik PolitikamÄ±z tarafÄ±ndan da yÃ¶netilir. LÃ¼tfen hizmeti yÃ¶neten ve kullanÄ±cÄ±larÄ± veri toplama uygulamalarÄ±mÄ±z konusunda bilgilendiren Gizlilik PolitikamÄ±zÄ± inceleyin.</p>

<h3>5. DeÄŸiÅŸiklikler</h3>
<p>Bu ÅartlarÄ± herhangi bir zamanda deÄŸiÅŸtirme veya deÄŸiÅŸtirme hakkÄ±nÄ± saklÄ± tutarÄ±z. Yeni ÅartlarÄ± bu sitede yayÄ±nlayarak herhangi bir deÄŸiÅŸiklik hakkÄ±nda bildirimde bulunacaÄŸÄ±z.</p>

<p><strong>"Kabul Ediyorum"a tÄ±klayarak, bu KullanÄ±m ÅartlarÄ±nÄ± okuduÄŸunuzu, anladÄ±ÄŸÄ±nÄ±zÄ± ve bunlara baÄŸlÄ± kalmayÄ± kabul ettiÄŸinizi beyan edersiniz.</strong></p>
```

#### Ã‡oklu Dil DesteÄŸi

Her dil iÃ§in ayrÄ± terms text tanÄ±mlayÄ±n:

**Realm Settings â†’ Localization:**

1. **English (en):**
   - Key: `termsText`
   - Value: (Ä°ngilizce terms)

2. **TÃ¼rkÃ§e (tr):**
   - Key: `termsText`
   - Value: (TÃ¼rkÃ§e terms)

3. **FranÃ§ais (fr):**
   - Key: `termsText`
   - Value: (FransÄ±zca terms)

**SonuÃ§:**
KullanÄ±cÄ±lar hangi dilde gÃ¶rÃ¼ntÃ¼lÃ¼yorlarsa, o dildeki terms gÃ¶sterilir.

### iframe ile Terms GÃ¶sterme

Terms metnini external bir sayfadan (iframe) yÃ¼klemek isterseniz:

**GitHub Discussion:**
[Using iframe for Terms](https://github.com/keycloakify/keycloakify/discussions/687)

**Ã–rnek:**

```html
<!-- Realm Settings â†’ Localization â†’ termsText -->
<iframe 
  src="https://example.com/terms-and-conditions" 
  style="width: 100%; height: 500px; border: 1px solid #ccc;"
  title="Terms and Conditions"
></iframe>

<p>By clicking "I Accept", you agree to our <a href="https://example.com/terms-and-conditions" target="_blank">Terms and Conditions</a>.</p>
```

### Terms SayfasÄ±nÄ± Ã–zelleÅŸtirme

Terms sayfasÄ±nÄ±n gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ ve davranÄ±ÅŸÄ±nÄ± Ã¶zelleÅŸtirmek iÃ§in sayfayÄ± eject edin:

#### AdÄ±m 1: SayfayÄ± Eject Edin

```bash
npx keycloakify eject-page
```

**Prompt'ta seÃ§in:**
```
? Which theme type? login
? Which page? terms.ftl
```

**SonuÃ§:**
- `src/login/pages/Terms.tsx` oluÅŸturulur
- VarsayÄ±lan implementation kopyalanÄ±r

#### AdÄ±m 2: Story Ekleyin (Opsiyonel ama Ã–nerilen)

```bash
npx keycloakify add-story
```

**Prompt'ta seÃ§in:**
```
? Which theme type? login
? Which page? terms.ftl
```

**SonuÃ§:**
- `src/login/pages/Terms.stories.tsx` oluÅŸturulur
- Storybook'ta preview edebilirsiniz

#### Terms.tsx Ã–rneÄŸi

```tsx
// src/login/pages/Terms.tsx
import { useState } from "react";
import type { PageProps } from "keycloakify/login/pages/PageProps";
import type { KcContext } from "../KcContext";
import type { I18n } from "../i18n";

export default function Terms(props: PageProps<Extract<KcContext, { pageId: "terms.ftl" }>, I18n>) {
    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;
    const { msg, msgStr } = i18n;
    const { url } = kcContext;

    const [isTermsAccepted, setIsTermsAccepted] = useState(false);

    return (
        <Template
            kcContext={kcContext}
            i18n={i18n}
            doUseDefaultCss={doUseDefaultCss}
            classes={classes}
            displayMessage={false}
            headerNode={msg("termsTitle")}
        >
            <div className="terms-container">
                {/* Terms metni - HTML olarak render edilir */}
                <div 
                    className="terms-content"
                    style={{
                        maxHeight: "400px",
                        overflowY: "auto",
                        border: "1px solid #ccc",
                        padding: "20px",
                        marginBottom: "20px",
                        background: "#f9f9f9"
                    }}
                >
                    {msg("termsText")}
                </div>

                {/* Acceptance checkbox */}
                <div style={{ marginBottom: "20px" }}>
                    <label>
                        <input
                            type="checkbox"
                            checked={isTermsAccepted}
                            onChange={e => setIsTermsAccepted(e.target.checked)}
                            style={{ marginRight: "8px" }}
                        />
                        {msg("acceptTerms")}
                    </label>
                </div>

                {/* Form buttons */}
                <form action={url.loginAction} method="post">
                    <button
                        type="submit"
                        name="accept"
                        value="accept"
                        disabled={!isTermsAccepted}
                        style={{
                            background: isTermsAccepted ? "#0066cc" : "#ccc",
                            color: "white",
                            padding: "10px 20px",
                            border: "none",
                            borderRadius: "4px",
                            cursor: isTermsAccepted ? "pointer" : "not-allowed",
                            marginRight: "10px"
                        }}
                    >
                        {msg("doAccept")}
                    </button>
                    
                    <button
                        type="submit"
                        name="cancel"
                        value="cancel"
                        style={{
                            background: "#f0f0f0",
                            color: "#333",
                            padding: "10px 20px",
                            border: "1px solid #ccc",
                            borderRadius: "4px",
                            cursor: "pointer"
                        }}
                    >
                        {msg("doDecline")}
                    </button>
                </form>
            </div>
        </Template>
    );
}
```

### msg() vs msgStr() KullanÄ±mÄ±

âš ï¸ **Ã–NEMLÄ°:** Terms sayfasÄ±nda `msg()` ve `msgStr()` farkÄ±nÄ± anlamak kritik!

#### msg("termsText") - HTML Render

`msg("termsText")` fonksiyonu, terms metnini **HTML olarak render eder** ve `JSX.Element` dÃ¶ndÃ¼rÃ¼r.

```tsx
// âœ… DOÄRU: Direkt olarak render et
<div>
    {msg("termsText")}
</div>

// SonuÃ§: HTML tag'leri render edilir
// <h2>Terms</h2><p>Content...</p>
```

**KullanÄ±m:**
- Terms metnini olduÄŸu gibi gÃ¶stermek iÃ§in
- HTML formatting korunur
- Direkt render iÃ§in

**âŒ YAPILAMAZ:**
```tsx
// String transformation yapÄ±lamaz
const text = msg("termsText");  // JSX.Element
const uppercase = text.toUpperCase();  // âŒ Hata!
```

#### msgStr("termsText") - Plain String

`msgStr("termsText")` fonksiyonu, terms metnini **plain string** olarak dÃ¶ndÃ¼rÃ¼r.

```tsx
// âœ… DOÄRU: String transformation iÃ§in
const termsText = msgStr("termsText");
const wordCount = termsText.split(" ").length;
const preview = termsText.substring(0, 100) + "...";

// String manipulation
const searchTerm = "privacy";
const hasPrivacySection = termsText.toLowerCase().includes(searchTerm);
```

**KullanÄ±m:**
- String manipulation yapmak iÃ§in
- Text analysis iÃ§in
- Custom rendering iÃ§in

**Ã–rnek: Custom rendering:**

```tsx
export default function Terms(props: PageProps<Extract<KcContext, { pageId: "terms.ftl" }>, I18n>) {
    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;
    const { msg, msgStr } = i18n;
    const { url } = kcContext;

    // msgStr ile plain string al
    const termsText = msgStr("termsText");
    
    // Custom processing
    const sections = termsText.split("<h3>");
    const wordCount = termsText.replace(/<[^>]*>/g, "").split(" ").length;

    return (
        <Template {...props}>
            <div>
                <p>Terms length: {wordCount} words</p>
                <p>Sections: {sections.length - 1}</p>
                
                {/* Original text'i render et */}
                <div dangerouslySetInnerHTML={{ __html: termsText }} />
                
                {/* Veya msg() kullan */}
                <div>{msg("termsText")}</div>
            </div>
        </Template>
    );
}
```

### Custom Translations

Terms sayfasÄ± iÃ§in custom translations ekleyebilirsiniz:

```typescript
// src/login/i18n.ts
import { i18nBuilder } from "keycloakify/login";
import type { ThemeName } from "../kc.gen";

const { useI18n, ofTypeI18n } = i18nBuilder
    .withThemeName<ThemeName>()
    .withCustomTranslations({
        en: {
            termsTitle: "Terms and Conditions",
            acceptTerms: "I have read and accept the Terms and Conditions",
            doAccept: "I Accept",
            doDecline: "I Decline",
            termsRequiredMessage: "You must accept the terms to continue"
        },
        tr: {
            termsTitle: "KullanÄ±m ÅartlarÄ± ve KoÅŸullarÄ±",
            acceptTerms: "KullanÄ±m ÅartlarÄ±nÄ± okudum ve kabul ediyorum",
            doAccept: "Kabul Ediyorum",
            doDecline: "Kabul Etmiyorum",
            termsRequiredMessage: "Devam etmek iÃ§in ÅŸartlarÄ± kabul etmelisiniz"
        }
    })
    .build();

type I18n = typeof ofTypeI18n;

export { useI18n, type I18n };
```

### Storybook Preview

Terms sayfasÄ±nÄ± Storybook'ta test edin:

```tsx
// src/login/pages/Terms.stories.tsx
import type { Meta, StoryObj } from "@storybook/react";
import { createKcPageStory } from "../KcPageStory";

const { KcPageStory } = createKcPageStory({ pageId: "terms.ftl" });

const meta = {
    title: "login/terms.ftl",
    component: KcPageStory
} satisfies Meta<typeof KcPageStory>;

export default meta;

type Story = StoryObj<typeof meta>;

// Default terms
export const Default: Story = {
    render: () => <KcPageStory />
};

// Uzun terms metni
export const LongTerms: Story = {
    render: () => (
        <KcPageStory
            kcContext={{
                // Mock long terms text
            }}
        />
    )
};

// TÃ¼rkÃ§e
export const Turkish: Story = {
    render: () => (
        <KcPageStory
            kcContext={{
                locale: {
                    currentLanguageTag: "tr"
                }
            }}
        />
    )
};
```

**Storybook baÅŸlatma:**
```bash
npm run storybook
```

### Advanced: Programmatic Terms Display

Terms sayfasÄ±nÄ± dinamik olarak gÃ¶stermek iÃ§in:

```tsx
// src/login/pages/Terms.tsx
import { useState, useEffect } from "react";
import type { PageProps } from "keycloakify/login/pages/PageProps";
import type { KcContext } from "../KcContext";
import type { I18n } from "../i18n";

export default function Terms(props: PageProps<Extract<KcContext, { pageId: "terms.ftl" }>, I18n>) {
    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;
    const { msg, msgStr } = i18n;
    const { url, locale } = kcContext;

    const [isTermsAccepted, setIsTermsAccepted] = useState(false);
    const [hasScrolledToBottom, setHasScrolledToBottom] = useState(false);

    // Scroll tracking
    const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {
        const element = e.currentTarget;
        const isBottom = element.scrollHeight - element.scrollTop === element.clientHeight;
        if (isBottom && !hasScrolledToBottom) {
            setHasScrolledToBottom(true);
        }
    };

    // Analytics
    useEffect(() => {
        console.log("Terms page viewed", {
            language: locale?.currentLanguageTag,
            timestamp: new Date().toISOString()
        });
    }, [locale]);

    const termsText = msgStr("termsText");
    const estimatedReadTime = Math.ceil(termsText.replace(/<[^>]*>/g, "").split(" ").length / 200);

    return (
        <Template
            kcContext={kcContext}
            i18n={i18n}
            doUseDefaultCss={doUseDefaultCss}
            classes={classes}
            headerNode={msg("termsTitle")}
        >
            <div className="terms-page">
                {/* Read time estimate */}
                <p style={{ color: "#666", fontSize: "14px" }}>
                    Estimated reading time: {estimatedReadTime} minute{estimatedReadTime > 1 ? "s" : ""}
                </p>

                {/* Scrollable terms */}
                <div 
                    className="terms-content"
                    onScroll={handleScroll}
                    style={{
                        maxHeight: "400px",
                        overflowY: "auto",
                        border: "1px solid #ccc",
                        padding: "20px",
                        marginBottom: "20px",
                        background: "#f9f9f9"
                    }}
                >
                    {msg("termsText")}
                </div>

                {/* Scroll indicator */}
                {!hasScrolledToBottom && (
                    <p style={{ color: "#ff6600", fontSize: "14px" }}>
                        â¬‡ï¸ Please scroll to the bottom to read all terms
                    </p>
                )}

                {/* Acceptance */}
                <div style={{ marginBottom: "20px" }}>
                    <label>
                        <input
                            type="checkbox"
                            checked={isTermsAccepted}
                            onChange={e => setIsTermsAccepted(e.target.checked)}
                            disabled={!hasScrolledToBottom}
                            style={{ marginRight: "8px" }}
                        />
                        {msg("acceptTerms")}
                        {!hasScrolledToBottom && (
                            <span style={{ color: "#999", fontSize: "12px" }}>
                                {" "}(Read all terms first)
                            </span>
                        )}
                    </label>
                </div>

                {/* Buttons */}
                <form action={url.loginAction} method="post">
                    <button
                        type="submit"
                        name="accept"
                        value="accept"
                        disabled={!isTermsAccepted}
                        style={{
                            background: isTermsAccepted ? "#0066cc" : "#ccc",
                            color: "white",
                            padding: "10px 20px",
                            border: "none",
                            borderRadius: "4px",
                            cursor: isTermsAccepted ? "pointer" : "not-allowed",
                            marginRight: "10px"
                        }}
                    >
                        {msg("doAccept")}
                    </button>
                    
                    <button
                        type="submit"
                        name="cancel"
                        value="cancel"
                        style={{
                            background: "#f0f0f0",
                            color: "#333",
                            padding: "10px 20px",
                            border: "1px solid #ccc",
                            borderRadius: "4px",
                            cursor: "pointer"
                        }}
                    >
                        {msg("doDecline")}
                    </button>
                </form>
            </div>
        </Template>
    );
}
```

### Best Practices

**1. Terms metnini gÃ¼ncel tutun:**
```
âœ… DOÄRU:
- Terms deÄŸiÅŸtiÄŸinde versiyon numarasÄ± ekleyin
- "Last updated: January 2025" gibi tarih belirtin
- Major changes iÃ§in kullanÄ±cÄ±larÄ± tekrar onaylatÄ±n

âŒ YANLIÅ:
- Eski, gÃ¼ncellenmeyen terms metni
- Tarihsiz veya versiyonsuz
```

**2. Okunabilirlik:**
```html
âœ… DOÄRU:
<h2>Terms and Conditions</h2>
<h3>1. Section Title</h3>
<p>Clear, concise content...</p>

âŒ YANLIÅ:
TÃ¼m metin tek paragrafta, hiÃ§ baÅŸlÄ±k yok
```

**3. Scroll tracking:**
```tsx
// KullanÄ±cÄ±nÄ±n tÃ¼m terms'i okumasÄ±nÄ± saÄŸla
const [hasScrolledToBottom, setHasScrolledToBottom] = useState(false);
// Accept button'Ä± ancak scroll yapÄ±nca aktif olsun
```

**4. Multiple languages:**
```
âœ… Her dil iÃ§in ayrÄ±, doÄŸru Ã§eviriler
Realm Settings â†’ Localization â†’ tr â†’ termsText
Realm Settings â†’ Localization â†’ en â†’ termsText
```

**5. Legal review:**
```
âš ï¸ Terms metnini hukuk danÄ±ÅŸmanÄ±nÄ±za inceletin
âš ï¸ GDPR/KVKK uyumluluÄŸunu kontrol edin
âš ï¸ Ãœlke/bÃ¶lge specific gereklilikler
```

### Debugging

**1. Terms sayfasÄ± gÃ¶rÃ¼nmÃ¼yor:**
```
# Authentication â†’ Required Actions kontrol et
â˜‘ Terms and Conditions: Enabled
â˜‘ Set as Default Action: Checked
```

**2. Terms metni boÅŸ:**
```
# Realm Settings â†’ Localization kontrol et
Key: termsText
Value: (Metin var mÄ±?)
```

**3. HTML render edilmiyor:**
```tsx
// msg() kullanÄ±yor musunuz?
{msg("termsText")}  // âœ… HTML render edilir

{msgStr("termsText")}  // âŒ Plain string, HTML render edilmez
```

**4. Accept butonu Ã§alÄ±ÅŸmÄ±yor:**
```tsx
// Form action doÄŸru mu?
<form action={url.loginAction} method="post">
    <button type="submit" name="accept" value="accept">
        Accept
    </button>
</form>
```

### SÄ±radaki AdÄ±m

ArtÄ±k Keycloak Terms and Conditions sayfasÄ±nÄ± nasÄ±l etkinleÅŸtireceÄŸinizi, Ã¶zelleÅŸtireceÄŸinizi ve yÃ¶net eceÄŸinizi biliyorsunuz! KullanÄ±cÄ±larÄ±nÄ±zÄ±n hizmet ÅŸartlarÄ±nÄ±zÄ± kabul etmelerini saÄŸlayabilir ve yasal uyumluluk saÄŸlayabilirsiniz.
